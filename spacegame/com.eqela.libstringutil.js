var com=com||{};com.eqela=com.eqela||{};com.eqela.libstringutil=com.eqela.libstringutil||{};com.eqela.libstringutil.HashTableVariableProvider=function(){eq.api.Object.call(this);this.com_eqela_libstringutil_HashTableVariableProvider_values=null;{}};P=com.eqela.libstringutil.HashTableVariableProvider.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libstringutil.VariableProvider']=true;P._t['com.eqela.libstringutil.HashTableVariableProvider']=true;P.constructor=com.eqela.libstringutil.HashTableVariableProvider;com.eqela.libstringutil.HashTableVariableProvider.for_hashtable=function(ht){return(com.eqela.libstringutil.HashTableVariableProvider.prototype.set_values.call(new com.eqela.libstringutil.HashTableVariableProvider(),ht));};P.get_variable_value=function(_name){if(this.com_eqela_libstringutil_HashTableVariableProvider_values===null){return(null);}return(eq.api.HashTable.prototype.get_string.call(this.com_eqela_libstringutil_HashTableVariableProvider_values,_name,null));};P.set_values=function(v){this.com_eqela_libstringutil_HashTableVariableProvider_values=v;return(this);};P.get_values=function(){return(this.com_eqela_libstringutil_HashTableVariableProvider_values);};com.eqela.libstringutil.JSONHashTableVariableProvider=function(){eq.api.Object.call(this);this.com_eqela_libstringutil_JSONHashTableVariableProvider_values=null;{}};P=com.eqela.libstringutil.JSONHashTableVariableProvider.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libstringutil.VariableProvider']=true;P._t['com.eqela.libstringutil.JSONHashTableVariableProvider']=true;P.constructor=com.eqela.libstringutil.JSONHashTableVariableProvider;com.eqela.libstringutil.JSONHashTableVariableProvider.for_hashtable=function(ht){return(com.eqela.libstringutil.JSONHashTableVariableProvider.prototype.set_values.call(new com.eqela.libstringutil.JSONHashTableVariableProvider(),ht));};P.get_variable_value=function(_name){var _t5=null;var _t4=null;if((this.com_eqela_libstringutil_JSONHashTableVariableProvider_values===null)||(_name===null)){return(null);}var it=_name.split('.'.charCodeAt(0),-1);var cc=this.com_eqela_libstringutil_JSONHashTableVariableProvider_values;var comp=null;while((comp=((function(l,r){return(l!=null&&l._t[r]===true);})((_t4=it.next()),"eq.api.String")?_t4:null))!==null){if(((function(l,r){return(l!=null&&l._t[r]===true);})(cc,"eq.api.HashTable"))===false){return(null);}cc=eq.api.HashTable.prototype.get.call(cc,comp);}return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t5=cc),"eq.api.String")?_t5:null));};P.set_values=function(v){this.com_eqela_libstringutil_JSONHashTableVariableProvider_values=v;return(this);};P.get_values=function(){return(this.com_eqela_libstringutil_JSONHashTableVariableProvider_values);};com.eqela.libstringutil.QuotedString=function(){eq.api.Object.call(this);{}};P=com.eqela.libstringutil.QuotedString.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libstringutil.QuotedString']=true;P.constructor=com.eqela.libstringutil.QuotedString;com.eqela.libstringutil.QuotedString.to_collection=function(str,delim){if(str===null){return(eq.api.LinkedList.create());}var dquote=false;var quote=false;var sb=null;var v=eq.api.LinkedList.create();var c=0;var it=str.iterate();while((c=it.next_char()) > 0){if((c==='"'.charCodeAt(0))&&(quote===false)){dquote=!dquote;}else {if((c==='\''.charCodeAt(0))&&(dquote===false)){quote=!quote;}else {if(((quote===false)&&(dquote===false))&&(c===delim)){if(sb!==null){var r=sb.to_string();if(r===null){r=eq.api.StringStatic.for_strptr("");}v.add(r);}sb=null;}else {if(sb===null){sb=eq.api.StringBufferStatic.create(null);}sb.append_c(c);}}}if(((quote===true)||(dquote===true))&&(sb===null)){sb=eq.api.StringBufferStatic.create(null);}}if(sb!==null){var r=sb.to_string();if(r===null){r=eq.api.StringStatic.for_strptr("");}v.add(r);}return(v);};com.eqela.libstringutil.QuotedString.to_hashtable=function(str,delim){var _t7=null;var _t6=null;var v=eq.api.HashTable.create();{var _t0=eq.api.IteratorStatic.for_object(com.eqela.libstringutil.QuotedString.to_collection(str,delim));if(_t0!==null){var _t1=null;for(_t1=_t0.next();_t1!==null;_t1=_t0.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t1,"eq.api.String")){var c=_t1;{var sp=c.split('='.charCodeAt(0),2);var key=((function(l,r){return(l!=null&&l._t[r]===true);})((_t6=sp.next()),"eq.api.String")?_t6:null);var val=((function(l,r){return(l!=null&&l._t[r]===true);})((_t7=sp.next()),"eq.api.String")?_t7:null);if(eq.api.StringStatic.is_empty(key)===false){eq.api.HashTable.prototype.set.call(v,key,val);}}}}}}return(v);};com.eqela.libstringutil.SplitQuoted=function(){eq.api.Object.call(this);{}};P=com.eqela.libstringutil.SplitQuoted.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libstringutil.SplitQuoted']=true;P.constructor=com.eqela.libstringutil.SplitQuoted;com.eqela.libstringutil.SplitQuoted.split=function(str,delim){return(com.eqela.libstringutil.QuotedString.to_collection(str,delim));};com.eqela.libstringutil.VariableSubstitutor=function(){eq.api.Object.call(this);{}};P=com.eqela.libstringutil.VariableSubstitutor.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libstringutil.VariableSubstitutor']=true;P.constructor=com.eqela.libstringutil.VariableSubstitutor;com.eqela.libstringutil.VariableSubstitutor.substitute=function(orig,vars){var _t9=null;var _t8=null;if(orig===null){return(orig);}if(orig.str(eq.api.StringStatic.for_strptr("${")) < 0){return(orig);}var sb=eq.api.StringBufferStatic.create(null);var varbuf=null;var flag=false;{var _t2=eq.api.IteratorStatic.for_object(orig);if(_t2!==null){var _t3=null;for(_t3=_t2.next();_t3!==null;_t3=_t2.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t3,"eq.api.Integer")){var i=_t3;{var c=i.to_integer();if(varbuf!==null){if(c==='}'.charCodeAt(0)){var varname=varbuf.to_string();if(vars!==null){var varcut=null;if(varname.chr('!'.charCodeAt(0)) > 0){var sp=varname.split('!'.charCodeAt(0),2);varname=((function(l,r){return(l!=null&&l._t[r]===true);})((_t8=sp.next()),"eq.api.String")?_t8:null);varcut=((function(l,r){return(l!=null&&l._t[r]===true);})((_t9=sp.next()),"eq.api.String")?_t9:null);}var r=vars.get_variable_value(varname);if(eq.api.StringStatic.is_empty(varcut)===false){var it=varcut.iterate();var cx=0;while((cx=it.next_char()) > 0){var n=r.rchr(cx);if(n < 0){break;}r=r.substring(0,n);}}sb.append(r);}varbuf=null;}else {varbuf.append_c(c);}continue;}if(flag===true){flag=false;if(c==='{'.charCodeAt(0)){varbuf=eq.api.StringBufferStatic.create(null);}else {sb.append_c('$'.charCodeAt(0));sb.append_c(c);}continue;}if(c==='$'.charCodeAt(0)){flag=true;continue;}sb.append_c(c);}}}}}return(sb.to_string());};