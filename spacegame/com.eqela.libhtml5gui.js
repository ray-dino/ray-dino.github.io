var com=com||{};com.eqela=com.eqela||{};com.eqela.libhtml5gui=com.eqela.libhtml5gui||{};com.eqela.libhtml5gui.GuiEngine=function(){eq.api.Object.call(this);{}};P=com.eqela.libhtml5gui.GuiEngine.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.GUI']=true;P._t['com.eqela.libhtml5gui.GuiEngine']=true;P.constructor=com.eqela.libhtml5gui.GuiEngine;P.is_image_file=function(file){if(file===null){return(false);}return(file.has_extension(eq.api.StringStatic.for_strptr("png"))||file.has_extension(eq.api.StringStatic.for_strptr("jpg")));};P.create_renderable_image=function(w,h){return(com.eqela.libhtml5canvas.HTML5RenderableImage.create(w,h));};P.create_image_for_buffer=function(buffer,type){return(com.eqela.libhtml5canvas.HTML5RealImage.for_data(buffer,type));};P.create_image_for_file=function(file,w,h){return(null);};P.create_image_for_resource=function(id,w,h){var v=com.eqela.libhtml5canvas.HTML5RealImage.for_url(eq.api.StringStatic.for_strptr("%s.png").printf().add(id).to_string());if(v===null){return(null);}return(v.resize(w,h));};P.get_default_clipboard=function(){return(null);};P.layout_text=function(props,frame,dpi){var d=dpi;if((d < 0)&&(frame!==null)){d=frame.get_dpi();}if(d < 0){d=96;}var fontinfo=com.eqela.libgui.TextProperties.prototype.get_font.call(props);if(fontinfo!==null){var fn=com.eqela.libgui.Font.prototype.get_name.call(fontinfo);if((fn!==null)&&(fn.has_suffix(eq.api.StringStatic.for_strptr(".ttf"))||fn.has_suffix(eq.api.StringStatic.for_strptr(".otf")))){com.eqela.libhtml5gui.HTML5FontFaceManager.add_font(frame,fn);}}return(com.eqela.libhtml5canvas.HTML5TextLayout.create(props,d));};P.open_url=function(url){if(url!==null){var win = window.open(url.to_strptr());if(win == null) {win = window.open(url.to_strptr(), '_parent','' ,false);}}return(true);};P.open_file=function(file){return(false);};P.get_background_task_manager=function(){return((new com.eqela.libhtml5gui.HTML5BackgroundTaskManager()));};P.execute=function(main,argv0,args){return(false);};P.get_window_manager=function(){return((new com.eqela.libhtml5gui.HTML5WindowManager()));};com.eqela.libhtml5gui.HTML5BackgroundTaskManager=function(){eq.api.Object.call(this);{}};P=com.eqela.libhtml5gui.HTML5BackgroundTaskManager.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libbackgroundtask.BackgroundTaskManager']=true;P._t['com.eqela.libhtml5gui.HTML5BackgroundTaskManager']=true;P.constructor=com.eqela.libhtml5gui.HTML5BackgroundTaskManager;com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_apitimer=null;this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_arg=null;this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_interval=0;this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_is_stop=false;{}};P2=P;P=com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libbackgroundtask.BackgroundTask']=true;P._t['com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper']=true;P.constructor=com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper;com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper.create=function(t,arg){var v=new com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper();v.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_apitimer=t;v.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_arg=arg;v.timer = null;return(v);};P.start=function(usec){var v=false;var self = this;this.timer = setInterval(function() { self.on_timer(); }, usec / 1000);v = true;this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_interval=usec;return(v);};P.abort=function(){clearInterval(this.timer);this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_is_stop=true;return(true);};P.on_timer=function(){if((this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_apitimer!==null)&&(!this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_is_stop)){if(this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_apitimer.on_timer(this.com_eqela_libhtml5gui_HTML5BackgroundTaskManager_TimerWrapper_arg)===false){this.abort();}}};P=P2;P2=null;P.start_timer=function(usec,o,arg){var v=com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper.create(o,arg);if(com.eqela.libhtml5gui.HTML5BackgroundTaskManager.TimerWrapper.prototype.start.call(v,usec)===false){v=null;}return(v);};P.start_task=function(task,listener){return(null);};com.eqela.libhtml5gui.HTML5ElementSurface=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTML5ElementSurface_element=null;this.com_eqela_libhtml5gui_HTML5ElementSurface_x=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface_y=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface_w=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface_h=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface__alpha=1.0;this.com_eqela_libhtml5gui_HTML5ElementSurface__scale=1.0;this.com_eqela_libhtml5gui_HTML5ElementSurface__rot=0.0;{}};P=com.eqela.libhtml5gui.HTML5ElementSurface.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.Position']=true;P._t['com.eqela.libgui.Size']=true;P._t['com.eqela.libgui.Surface']=true;P._t['com.eqela.libgui.SurfaceWithId']=true;P._t['com.eqela.libhtml5gui.HTML5ElementSurface']=true;P.constructor=com.eqela.libhtml5gui.HTML5ElementSurface;P.set_surface_id=function(id){if(this.com_eqela_libhtml5gui_HTML5ElementSurface_element===null){return;}com.eqela.libhtml5gui.HTMLElement.prototype.set_attribute.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("id"),id);};P.append_to=function(parent){if(parent===null){return;}com.eqela.libhtml5gui.HTMLElement.prototype.append_child.call(parent,this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};P.prepend_to=function(parent){if(parent===null){return;}com.eqela.libhtml5gui.HTMLElement.prototype.prepend_child.call(parent,this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};P.remove=function(){com.eqela.libhtml5gui.HTMLElement.prototype.remove_from_dom.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};P.get_device_pixel_ratio=function(){return(1.0);};P.move=function(x,y){if(x!==this.com_eqela_libhtml5gui_HTML5ElementSurface_x){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("left"),eq.api.StringStatic.for_strptr("%d").printf().add(eq.api.Primitive.for_double(x)).to_string());}if(y!==this.com_eqela_libhtml5gui_HTML5ElementSurface_y){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("top"),eq.api.StringStatic.for_strptr("%d").printf().add(eq.api.Primitive.for_double(y)).to_string());}this.com_eqela_libhtml5gui_HTML5ElementSurface_x=x;this.com_eqela_libhtml5gui_HTML5ElementSurface_y=y;};P.resize=function(w,h){if(this.com_eqela_libhtml5gui_HTML5ElementSurface_w!==w){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("width"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_integer(~~(w))).to_string());}if(this.com_eqela_libhtml5gui_HTML5ElementSurface_h!==h){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("height"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_integer(~~(h))).to_string());}this.com_eqela_libhtml5gui_HTML5ElementSurface_w=w;this.com_eqela_libhtml5gui_HTML5ElementSurface_h=h;};P.move_resize=function(x,y,w,h){this.move(x,y);this.resize(w,h);};P.set_scale=function(s){this.com_eqela_libhtml5gui_HTML5ElementSurface__scale=s;};P.set_alpha=function(f){this.com_eqela_libhtml5gui_HTML5ElementSurface__alpha=f;com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("opacity"),eq.api.StringStatic.for_strptr("%f").printf().add(eq.api.Primitive.for_double(f)).to_string());};P.set_rotation_angle=function(a){var ang=(a*180.0)/eq.api.MathConstant.eq_api_MathConstant_M_PI;var str=eq.api.StringStatic.for_strptr("rotate(%ddeg)").printf().add(eq.api.Primitive.for_double(ang)).to_string();com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("transform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("webkitTransform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("msTransform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("oTransform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("mozTransform"),str);this.com_eqela_libhtml5gui_HTML5ElementSurface__rot=a;};P.get_scale=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface__scale);};P.get_alpha=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface__alpha);};P.get_rotation_angle=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface__rot);};P.get_x=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_x);};P.get_y=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_y);};P.get_width=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_w);};P.get_height=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_h);};P.set_element=function(v){this.com_eqela_libhtml5gui_HTML5ElementSurface_element=v;return(this);};P.get_element=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};com.eqela.libhtml5gui.HTML5ElementContainerSurface=function(){com.eqela.libhtml5gui.HTML5ElementSurface.call(this);{var element=com.eqela.libhtml5gui.HTMLElement.create(eq.api.StringStatic.for_strptr("div"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("overflow"),eq.api.StringStatic.for_strptr("hidden"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("position"),eq.api.StringStatic.for_strptr("absolute"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("left"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("top"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("width"),eq.api.StringStatic.for_strptr("0px"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("height"),eq.api.StringStatic.for_strptr("0px"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("margin"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("padding"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTML5ElementSurface.prototype.set_element.call(this,element);}};P=com.eqela.libhtml5gui.HTML5ElementContainerSurface.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libhtml5gui.HTML5ElementSurface.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.Position']=true;P._t['com.eqela.libgui.Size']=true;P._t['com.eqela.libgui.Surface']=true;P._t['com.eqela.libgui.SurfaceWithId']=true;P._t['com.eqela.libhtml5gui.HTML5ElementSurface']=true;P._t['com.eqela.libhtml5gui.HTML5ElementContainerSurface']=true;P.constructor=com.eqela.libhtml5gui.HTML5ElementContainerSurface;com.eqela.libhtml5gui.HTML5ElementRenderableSurface=function(){com.eqela.libhtml5gui.HTML5ElementSurface.call(this);{var element=com.eqela.libhtml5gui.HTMLElement.create(eq.api.StringStatic.for_strptr("canvas"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("position"),eq.api.StringStatic.for_strptr("absolute"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("left"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("top"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("width"),eq.api.StringStatic.for_strptr("0px"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("height"),eq.api.StringStatic.for_strptr("0px"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("margin"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("padding"),eq.api.StringStatic.for_strptr("0"));com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("-webkit-tap-highlight-color"),eq.api.StringStatic.for_strptr("rgba(255, 255, 255, 0)"));com.eqela.libhtml5gui.HTML5ElementSurface.prototype.set_element.call(this,element);}};P=com.eqela.libhtml5gui.HTML5ElementRenderableSurface.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libhtml5gui.HTML5ElementSurface.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.Renderable']=true;P._t['com.eqela.libgui.Position']=true;P._t['com.eqela.libgui.Size']=true;P._t['com.eqela.libgui.Surface']=true;P._t['com.eqela.libgui.SurfaceWithId']=true;P._t['com.eqela.libhtml5gui.HTML5ElementSurface']=true;P._t['com.eqela.libhtml5gui.HTML5ElementRenderableSurface']=true;P.constructor=com.eqela.libhtml5gui.HTML5ElementRenderableSurface;P.resize=function(w,h){com.eqela.libhtml5gui.HTML5ElementSurface.prototype.resize.call(this,w,h);var rat=com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_device_pixel_ratio.call(this);var element=com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(this);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("width"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_double(w)).to_string());com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(element,eq.api.StringStatic.for_strptr("height"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_double(h)).to_string());com.eqela.libhtml5gui.HTMLElement.prototype.set_attribute.call(element,eq.api.StringStatic.for_strptr("width"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_double(w*rat)).to_string());com.eqela.libhtml5gui.HTMLElement.prototype.set_attribute.call(element,eq.api.StringStatic.for_strptr("height"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_double(h*rat)).to_string());};P.render=function(ops){var canvas=com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(this);var ctx=com.eqela.libhtml5canvas.HTML5CanvasVgContext.for_canvas_element(com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(canvas),com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_device_pixel_ratio.call(this));ctx.clear(0,0,com.eqela.libvg.VgPathRectangle.create(0,0,~~(this.get_width()),~~(this.get_height())),null);if(eq.api.CollectionStatic.is_empty(ops)===false){com.eqela.libvg.VgRenderer.render_to_vg_context(ops,ctx,0,0);}};com.eqela.libhtml5gui.HTML5ElementSurface=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTML5ElementSurface_element=null;this.com_eqela_libhtml5gui_HTML5ElementSurface_x=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface_y=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface_w=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface_h=0.0;this.com_eqela_libhtml5gui_HTML5ElementSurface__alpha=1.0;this.com_eqela_libhtml5gui_HTML5ElementSurface__scale=1.0;this.com_eqela_libhtml5gui_HTML5ElementSurface__rot=0.0;{}};P=com.eqela.libhtml5gui.HTML5ElementSurface.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.Position']=true;P._t['com.eqela.libgui.Size']=true;P._t['com.eqela.libgui.Surface']=true;P._t['com.eqela.libgui.SurfaceWithId']=true;P._t['com.eqela.libhtml5gui.HTML5ElementSurface']=true;P.constructor=com.eqela.libhtml5gui.HTML5ElementSurface;P.set_surface_id=function(id){if(this.com_eqela_libhtml5gui_HTML5ElementSurface_element===null){return;}com.eqela.libhtml5gui.HTMLElement.prototype.set_attribute.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("id"),id);};P.append_to=function(parent){if(parent===null){return;}com.eqela.libhtml5gui.HTMLElement.prototype.append_child.call(parent,this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};P.prepend_to=function(parent){if(parent===null){return;}com.eqela.libhtml5gui.HTMLElement.prototype.prepend_child.call(parent,this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};P.remove=function(){com.eqela.libhtml5gui.HTMLElement.prototype.remove_from_dom.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};P.get_device_pixel_ratio=function(){return(1.0);};P.move=function(x,y){if(x!==this.com_eqela_libhtml5gui_HTML5ElementSurface_x){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("left"),eq.api.StringStatic.for_strptr("%d").printf().add(eq.api.Primitive.for_double(x)).to_string());}if(y!==this.com_eqela_libhtml5gui_HTML5ElementSurface_y){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("top"),eq.api.StringStatic.for_strptr("%d").printf().add(eq.api.Primitive.for_double(y)).to_string());}this.com_eqela_libhtml5gui_HTML5ElementSurface_x=x;this.com_eqela_libhtml5gui_HTML5ElementSurface_y=y;};P.resize=function(w,h){if(this.com_eqela_libhtml5gui_HTML5ElementSurface_w!==w){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("width"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_integer(~~(w))).to_string());}if(this.com_eqela_libhtml5gui_HTML5ElementSurface_h!==h){com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("height"),eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_integer(~~(h))).to_string());}this.com_eqela_libhtml5gui_HTML5ElementSurface_w=w;this.com_eqela_libhtml5gui_HTML5ElementSurface_h=h;};P.move_resize=function(x,y,w,h){this.move(x,y);this.resize(w,h);};P.set_scale=function(s){this.com_eqela_libhtml5gui_HTML5ElementSurface__scale=s;};P.set_alpha=function(f){this.com_eqela_libhtml5gui_HTML5ElementSurface__alpha=f;com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("opacity"),eq.api.StringStatic.for_strptr("%f").printf().add(eq.api.Primitive.for_double(f)).to_string());};P.set_rotation_angle=function(a){var ang=(a*180.0)/eq.api.MathConstant.eq_api_MathConstant_M_PI;var str=eq.api.StringStatic.for_strptr("rotate(%ddeg)").printf().add(eq.api.Primitive.for_double(ang)).to_string();com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("transform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("webkitTransform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("msTransform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("oTransform"),str);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(this.com_eqela_libhtml5gui_HTML5ElementSurface_element,eq.api.StringStatic.for_strptr("mozTransform"),str);this.com_eqela_libhtml5gui_HTML5ElementSurface__rot=a;};P.get_scale=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface__scale);};P.get_alpha=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface__alpha);};P.get_rotation_angle=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface__rot);};P.get_x=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_x);};P.get_y=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_y);};P.get_width=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_w);};P.get_height=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_h);};P.set_element=function(v){this.com_eqela_libhtml5gui_HTML5ElementSurface_element=v;return(this);};P.get_element=function(){return(this.com_eqela_libhtml5gui_HTML5ElementSurface_element);};com.eqela.libhtml5gui.HTML5FontFaceManager=function(){eq.api.Object.call(this);{}};P=com.eqela.libhtml5gui.HTML5FontFaceManager.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libhtml5gui.HTML5FontFaceManager']=true;P.constructor=com.eqela.libhtml5gui.HTML5FontFaceManager;com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTML5FontFaceManager_HTML5FontFaceStyle_styleff=null;{}};P2=P;P=com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle']=true;P.constructor=com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle;P.set_styleff=function(v){this.com_eqela_libhtml5gui_HTML5FontFaceManager_HTML5FontFaceStyle_styleff=v;return(this);};P.get_styleff=function(){return(this.com_eqela_libhtml5gui_HTML5FontFaceManager_HTML5FontFaceStyle_styleff);};P=P2;P2=null;com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces=null;com.eqela.libhtml5gui.HTML5FontFaceManager.add_font=function(frame,font){var _t4=null;if((font===null)||((font.has_suffix(eq.api.StringStatic.for_strptr(".ttf"))===false)&&(font.has_suffix(eq.api.StringStatic.for_strptr(".otf"))===false))){return;}if(com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces===null){com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces=eq.api.HashTable.create();}if(eq.api.HashTable.prototype.get.call(com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces,font)!==null){return;}var ff=((function(l,r){return(l!=null&&l._t[r]===true);})((_t4=frame),"com.eqela.libhtml5gui.HTML5Frame")?_t4:null);if(ff!==null){var doc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(ff);if(doc===null){return;}var proper_name=font.substring(0,font.get_length()-4).replace_char('_'.charCodeAt(0),' '.charCodeAt(0));var pn_jstr=proper_name.to_strptr();var name_jstr=font.to_strptr();var style=null;var head = doc.head;style = doc.createElement("style");style.appendChild(doc.createTextNode("@font-face { font-family: " + pn_jstr + "; src: url('" + name_jstr +  "');}"));head.appendChild(style);eq.api.HashTable.prototype.set.call(com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces,font,com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle.prototype.set_styleff.call(new com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle(),style));}};com.eqela.libhtml5gui.HTML5FontFaceManager.remove_font=function(font){var _t5=null;if((com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces===null)||(font===null)){return;}var hffs=((function(l,r){return(l!=null&&l._t[r]===true);})((_t5=eq.api.HashTable.prototype.get.call(com.eqela.libhtml5gui.HTML5FontFaceManager.com_eqela_libhtml5gui_HTML5FontFaceManager_fontfaces,font)),"com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle")?_t5:null);if(hffs!==null){var style=com.eqela.libhtml5gui.HTML5FontFaceManager.HTML5FontFaceStyle.prototype.get_styleff.call(hffs);style.parentNode.removeChild(style);}};com.eqela.libhtml5gui.HTML5Frame=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTML5Frame_ppi=96;this.com_eqela_libhtml5gui_HTML5Frame_mywidth=-1;this.com_eqela_libhtml5gui_HTML5Frame_myheight=-1;this.com_eqela_libhtml5gui_HTML5Frame_controller=null;this.com_eqela_libhtml5gui_HTML5Frame_is_opera=false;this.com_eqela_libhtml5gui_HTML5Frame_is_webkit=false;this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_x=0;this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_y=0;this.com_eqela_libhtml5gui_HTML5Frame_iframe=null;this.com_eqela_libhtml5gui_HTML5Frame_window=null;this.com_eqela_libhtml5gui_HTML5Frame_documentptr=null;this.com_eqela_libhtml5gui_HTML5Frame_vkb_on=false;this.com_eqela_libhtml5gui_HTML5Frame_disable_key_capture=false;{}};P=com.eqela.libhtml5gui.HTML5Frame.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.Size']=true;P._t['com.eqela.libgui.SurfaceContainer']=true;P._t['com.eqela.libgui.Frame']=true;P._t['com.eqela.libgui.ColoredFrame']=true;P._t['com.eqela.libgui.TitledFrame']=true;P._t['com.eqela.libgui.ClosableFrame']=true;P._t['com.eqela.libhtml5gui.HTML5Frame']=true;P.constructor=com.eqela.libhtml5gui.HTML5Frame;com.eqela.libhtml5gui.HTML5Frame.for_frame_controller=function(fc,iframe,window){var v=new com.eqela.libhtml5gui.HTML5Frame();if(iframe!==null){com.eqela.libhtml5gui.HTML5Frame.prototype.set_iframe.call(v,iframe);}if(window!==null){var mydoc=null;mydoc = window.document;com.eqela.libhtml5gui.HTML5Frame.prototype.set_document.call(v,mydoc);com.eqela.libhtml5gui.HTML5Frame.prototype.set_window.call(v,window);}if(com.eqela.libhtml5gui.HTML5Frame.prototype.initialize.call(v,fc)===false){return(null);}return(v);};P.to_js_rgba_string=function(c){if(c===null){return(eq.api.StringStatic.for_strptr(""));}var v=eq.api.StringStatic.for_strptr("rgba(%d,%d,%d,%f)").printf().add(eq.api.Primitive.for_integer(~~((com.eqela.libgui.Color.prototype.get_r.call(c)*255)))).add(eq.api.Primitive.for_integer(~~((com.eqela.libgui.Color.prototype.get_g.call(c)*255)))).add(eq.api.Primitive.for_integer(~~((com.eqela.libgui.Color.prototype.get_b.call(c)*255)))).add(eq.api.Primitive.for_double(com.eqela.libgui.Color.prototype.get_a.call(c))).to_string();return(v);};P.set_frame_background_color=function(color){var body=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document_body.call(this);if((body===null)||(color===null)){return;}var cc=com.eqela.libhtml5gui.HTML5Frame.prototype.to_js_rgba_string.call(this,color);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(body,eq.api.StringStatic.for_strptr("background-color"),cc);com.eqela.libhtml5gui.HTMLElement.prototype.set_style.call(body,eq.api.StringStatic.for_strptr("backgroundColor"),cc);};P.set_icon=function(icon){var _t6=null;var href=null;var img=((function(l,r){return(l!=null&&l._t[r]===true);})((_t6=icon),"com.eqela.libhtml5canvas.HTML5Image")?_t6:null);if(img!==null){href=img.get_url();}if(href===null){href=eq.api.StringStatic.for_strptr("");}var mydoc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);var oldlink = mydoc.getElementById('dynamic-favicon');var link = mydoc.createElement('link');link.id = 'dynamic-favicon';link.rel = 'shortcut icon';link.href = href.to_strptr();var hh = document.head || document.getElementsByTagName('head')[0];if(oldlink) {hh.removeChild(oldlink);}hh.appendChild(link);};P.set_title=function(title){var doc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);if(doc===null){return;}var tt=title;if(tt===null){tt=eq.api.StringStatic.for_strptr("");}doc.title = tt.to_strptr();};P.close=function(){if(this.com_eqela_libhtml5gui_HTML5Frame_iframe!==null){var ifr=this.com_eqela_libhtml5gui_HTML5Frame_iframe;ifr.parentNode.removeChild(ifr);this.com_eqela_libhtml5gui_HTML5Frame_iframe=null;}if(this.com_eqela_libhtml5gui_HTML5Frame_window!==null){var ww=this.com_eqela_libhtml5gui_HTML5Frame_window;ww.close();this.com_eqela_libhtml5gui_HTML5Frame_window=null;}};P.set_document=function(p){this.com_eqela_libhtml5gui_HTML5Frame_documentptr=p;};P.get_document=function(){var v=this.com_eqela_libhtml5gui_HTML5Frame_documentptr;if((v===null)&&(this.com_eqela_libhtml5gui_HTML5Frame_iframe!==null)){var mydoc=null;var ifr=this.com_eqela_libhtml5gui_HTML5Frame_iframe;mydoc = (ifr.contentWindow.document) ? ifr.contentWindow.document : (ifr.contentDocument.document) ? ifr.contentDocument.document : ifr.contentDocument;this.com_eqela_libhtml5gui_HTML5Frame_documentptr=mydoc;v=mydoc;}if(v===null){v = document;}return(v);};P.get_document_body=function(){var doc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);var v=null;v = doc.body;return(com.eqela.libhtml5gui.HTMLElement.for_element(v));};P.get_controller=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_controller);};P.load_icon_js=function(ss){if(ss===null){return;}com.eqela.libgui.IconCache.load(eq.api.StringStatic.for_strptr(ss));};com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_frame=null;this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_fc=null;{}};P2=P;P=com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libbackgroundtask.TimerHandler']=true;P._t['com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer']=true;P.constructor=com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer;P.on_timer=function(arg){if(com.eqela.libgui.IconCache.is_loaded()===false){return(true);}eq.api.Log.debug(eq.api.StringStatic.for_strptr("Done waiting for icons. Starting the frame controller"),null);if(this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_frame!==null){com.eqela.libhtml5gui.HTML5Frame.prototype.do_initialize.call(this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_frame,this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_fc);}this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_frame=null;this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_fc=null;return(false);};P.set_frame=function(v){this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_frame=v;return(this);};P.get_frame=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_frame);};P.set_fc=function(v){this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_fc=v;return(this);};P.get_fc=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_WaitForIconsTimer_fc);};P=P2;P2=null;P.initialize=function(fc){var btm=com.eqela.libgui.GUIStatic.com_eqela_libgui_GUIStatic_engine.get_background_task_manager();if(btm===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("No background task manager (?). Unable to start icon wait timer."),null);return(com.eqela.libhtml5gui.HTML5Frame.prototype.do_initialize.call(this,fc));}eq.api.Log.debug(eq.api.StringStatic.for_strptr("Waiting for icons to load .."),null);btm.start_timer(10000,com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer.prototype.set_fc.call(com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer.prototype.set_frame.call(new com.eqela.libhtml5gui.HTML5Frame.WaitForIconsTimer(),this),fc),null);return(true);};P.do_initialize=function(fc){if(fc===null){return(false);}eq.api.Log.debug(eq.api.StringStatic.for_strptr("HTML5Frame: Initializing frame"),null);this.com_eqela_libhtml5gui_HTML5Frame_controller=fc;this.com_eqela_libhtml5gui_HTML5Frame_ppi=com.eqela.libhtml5gui.HTML5Frame.prototype.determine_ppi.call(this);fc.initialize_frame(this);com.eqela.libhtml5gui.HTML5Frame.prototype.on_resize.call(this);var ifr=this.com_eqela_libhtml5gui_HTML5Frame_iframe;var wi=this.com_eqela_libhtml5gui_HTML5Frame_window;var mydoc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);mydoc.body.ondragstart = function() {return(false);};mydoc.body.ondrop = function() {return(false);};if(navigator.userAgent.indexOf("Opera") >= 0) {this.is_opera = true;}if(navigator.userAgent.indexOf("WebKit") >= 0) {this.is_webkit = true;}var self = this;if(ifr != null) {var wor = ifr.onresize;ifr.onresize = function() {self.on_resize();if(wor) {wor();}};}else if(wi != null) {var wor = wi.onresize;wi.onresize = function() {self.on_resize();if(wor) {wor();}};}else {var wor = window.onresize;window.onresize = function() {self.on_resize();if(wor) {wor();}};}self.on_js_mouse_move = function(e) {if(!('ontouchstart' in mydoc)) {var posx = 0;var posy = 0;if(!e) {e = window.event;}if(e.pageX || e.pageY) {posx = e.pageX;posy = e.pageY;}else if(e.clientX || e.clientY) {posx = e.clientX + mydoc.body.scrollLeft + mydoc.documentElement.scrollLeft;posy = e.clientY + mydoc.body.scrollTop + mydoc.documentElement.scrollTop;}self.move_x = posx;self.move_y = posy;if(!self.timeoutid) {self.timeoutid = setTimeout(self.on_js_event_timeout, 0);}}self.check_vk_is_enabled();};self.on_js_mouse_down = function(e) {if(!('ontouchstart' in mydoc)) {if(!e) {e = window.event;}self.on_mouse_down();}self.check_vk_is_enabled();};self.on_js_mouse_up = function(e) {if(!('ontouchstart' in mydoc)) {if(!e) {e = window.event;}self.on_mouse_up();}self.check_vk_is_enabled();};self.on_js_key_down = function(e) {if(self.on_key_down(e)) {return(true);}if(navigator.userAgent.indexOf("WebKit") >= 0) {if(e.keyCode == 9 || e.keyCode == 8) {if(e.preventDefault) {e.preventDefault();}}else if(e.ctrlKey) {self.on_key_press(e);if(e.preventDefault) {e.preventDefault();}}}else {if(e.preventDefault) {e.preventDefault();}}return(false);};self.on_js_key_press = function(e) {if(self.on_key_press(e)) {return(true);}if(e.preventDefault) {e.preventDefault();}return(false);};self.on_js_key_up = function(e) {if(self.on_key_up(e)) {return(true);}if(e.preventDefault) {e.preventDefault();}return(false);};self.on_js_touch_start = function(e) {for(i=0; i<e.touches.length; i++) {self.on_mouse_move(e.touches[i].pageX, e.touches[i].pageY);}self.on_mouse_down();};self.on_js_touch_move = function(e) {for(i=0; i<e.touches.length; i++) {self.move_x = e.touches[i].pageX;self.move_y = e.touches[i].pageY;}if(!self.timeoutid) {self.timeoutid = setTimeout(self.on_js_event_timeout, 0);}e.preventDefault();};self.on_js_event_timeout = function() {self.on_mouse_move(self.move_x, self.move_y);self.timeoutid = 0;};self.on_js_touch_end = function(e) {self.on_mouse_up();};self.on_js_mouse_wheel = function(e) {var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));self.on_mouse_wheel(delta);};mydoc.addEventListener('touchstart', function(e) { if(self.on_js_touch_start) { self.on_js_touch_start(e) } }, false);mydoc.addEventListener('touchmove', function(e) { if(self.on_js_touch_move) { self.on_js_touch_move(e); } }, false);mydoc.addEventListener('touchend', function(e) { if(self.on_js_touch_end) { self.on_js_touch_end(e); } }, false);mydoc.addEventListener('mousemove', function(e) { if(self.on_js_mouse_move) { self.on_js_mouse_move(e); } }, false);mydoc.addEventListener('mousedown', function(e) { if(self.on_js_mouse_down) { self.on_js_mouse_down(e); } }, false);mydoc.addEventListener('mouseup', function(e) { if(self.on_js_mouse_up) { self.on_js_mouse_up(e); } }, false);mydoc.addEventListener('mousewheel', function(e) { if(self.on_js_mouse_wheel) { self.on_js_mouse_wheel(e); } }, false);mydoc.addEventListener('DOMMouseScroll', function(e) { if(self.on_js_mouse_wheel) { self.on_js_mouse_wheel(e); } }, false);mydoc.addEventListener('keydown', function(e) { if(self.on_js_key_down) { self.on_js_key_down(e); } }, false);mydoc.addEventListener('keypress', function(e) { if(self.on_js_key_press) { self.on_js_key_press(e); } }, false);mydoc.addEventListener('keyup', function(e) { if(self.on_js_key_up) { self.on_js_key_up(e); } }, false);fc.start();if(this.com_eqela_libhtml5gui_HTML5Frame_iframe!==null){var psz=fc.get_preferred_size();if(psz!==null){var ifrm=this.com_eqela_libhtml5gui_HTML5Frame_iframe;ifrm.frameBorder = 0;ifrm.width = psz.get_width();ifrm.height = psz.get_height();ifrm.style.position = "fixed";ifrm.style.left = window.innerWidth/2 - ifrm.width / 2;ifrm.style.top = window.innerHeight/2 - ifrm.height / 2;ifrm.focus();com.eqela.libhtml5gui.HTML5Frame.prototype.on_resize.call(this);}}if(this.com_eqela_libhtml5gui_HTML5Frame_window!==null){var psz=fc.get_preferred_size();if(psz!==null){var ww=this.com_eqela_libhtml5gui_HTML5Frame_window;ww.resizeTo(psz.get_width(), psz.get_height());ww.focus();com.eqela.libhtml5gui.HTML5Frame.prototype.on_resize.call(this);}}eq.api.Log.debug(eq.api.StringStatic.for_strptr("HTML5Frame: Initial size determined as %dx%d").printf().add(eq.api.Primitive.for_integer(this.com_eqela_libhtml5gui_HTML5Frame_mywidth)).add(eq.api.Primitive.for_integer(this.com_eqela_libhtml5gui_HTML5Frame_myheight)),null);return(true);};P.virtual_keyboard=function(show){if(show){if(this.com_eqela_libhtml5gui_HTML5Frame_vkb_on){this.textinput.focus();return;}this.com_eqela_libhtml5gui_HTML5Frame_vkb_on=true;var mydoc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);var bodys = mydoc.getElementsByTagName("body");this.textinput = mydoc.createElement("textarea");this.textinput.setAttribute("style", "-webkit-tap-highlight-color: rgba(255, 255, 255, 0);");this.textinput.style.color = "transparent";this.textinput.style.backgroundColor = "transparent";this.textinput.style.borderColor = "transparent";this.textinput.style.position = "absolute";this.textinput.style.left = 0;this.textinput.style.top = 0;this.textinput.style.width = 0;this.textinput.style.height = 0;bodys[0].appendChild(this.textinput);this.textinput.addEventListener('keydown', function(e) { if(this.on_js_key_down) { this.on_js_key_down(e); } }, false);this.textinput.addEventListener('keypress', function(e) { if(this.on_js_key_press) { this.on_js_key_press(e); } }, false);this.textinput.addEventListener('keyup', function(e) { if(this.on_js_key_up) { this.on_js_key_up(e); } }, false);}else {this.com_eqela_libhtml5gui_HTML5Frame_vkb_on=false;var mydoc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);this.textinput.setAttribute('style', 'display: none;');mydoc.body.removeChild(this.textinput);}};P.check_vk_is_enabled=function(){if(this.com_eqela_libhtml5gui_HTML5Frame_vkb_on){this.textinput.focus();}};P.keyname=function(keycode){var v=null;if(keycode===32){v=eq.api.StringStatic.for_strptr("space");}else if(keycode===13){v=eq.api.StringStatic.for_strptr("enter");}else if(keycode===9){v=eq.api.StringStatic.for_strptr("tab");}else if(keycode===27){v=eq.api.StringStatic.for_strptr("escape");}else if(keycode===8){v=eq.api.StringStatic.for_strptr("backspace");}else if(keycode===16){v=eq.api.StringStatic.for_strptr("shift");}else if(keycode===17){v=eq.api.StringStatic.for_strptr("control");}else if(keycode===18){v=eq.api.StringStatic.for_strptr("alt");}else if(keycode===20){v=eq.api.StringStatic.for_strptr("capslock");}else if(keycode===144){v=eq.api.StringStatic.for_strptr("numlock");}else if(keycode===37){v=eq.api.StringStatic.for_strptr("left");}else if(keycode===38){v=eq.api.StringStatic.for_strptr("up");}else if(keycode===39){v=eq.api.StringStatic.for_strptr("right");}else if(keycode===40){v=eq.api.StringStatic.for_strptr("down");}else if(keycode===45){v=eq.api.StringStatic.for_strptr("insert");}else if(keycode===46){v=eq.api.StringStatic.for_strptr("delete");}else if(keycode===36){v=eq.api.StringStatic.for_strptr("home");}else if(keycode===35){v=eq.api.StringStatic.for_strptr("end");}else if(keycode===33){v=eq.api.StringStatic.for_strptr("pageup");}else if(keycode===34){v=eq.api.StringStatic.for_strptr("pagedown");}else if(keycode===112){v=eq.api.StringStatic.for_strptr("f1");}else if(keycode===113){v=eq.api.StringStatic.for_strptr("f2");}else if(keycode===114){v=eq.api.StringStatic.for_strptr("f3");}else if(keycode===115){v=eq.api.StringStatic.for_strptr("f4");}else if(keycode===116){v=eq.api.StringStatic.for_strptr("f5");}else if(keycode===117){v=eq.api.StringStatic.for_strptr("f6");}else if(keycode===118){v=eq.api.StringStatic.for_strptr("f7");}else if(keycode===119){v=eq.api.StringStatic.for_strptr("f8");}else if(keycode===120){v=eq.api.StringStatic.for_strptr("f9");}else if(keycode===121){v=eq.api.StringStatic.for_strptr("f10");}else if(keycode===122){v=eq.api.StringStatic.for_strptr("f11");}else if(keycode===123){v=eq.api.StringStatic.for_strptr("f12");}else if(keycode===224){v=eq.api.StringStatic.for_strptr("super");}else if(keycode===91){v=eq.api.StringStatic.for_strptr("super");}else if(keycode===92){v=eq.api.StringStatic.for_strptr("super");}else if(keycode===93){v=eq.api.StringStatic.for_strptr("super");}return(v);};P.on_key_down=function(e){var keycode=0;var shift=false;var alt=false;var ctrl=false;keycode = e.keyCode;shift = e.shiftKey;alt = e.altKey;ctrl = e.ctrlKey;var kn=com.eqela.libhtml5gui.HTML5Frame.prototype.keyname.call(this,keycode);if((eq.api.StringStatic.for_strptr("tab").equals(kn)===false)&&this.com_eqela_libhtml5gui_HTML5Frame_disable_key_capture){return(true);}if(kn!==null){var ev=new com.eqela.libgui.KeyPressEvent();com.eqela.libgui.KeyEvent.prototype.set_name.call(ev,kn);com.eqela.libgui.KeyEvent.prototype.set_keycode.call(ev,keycode);if(eq.api.StringStatic.for_strptr("space").equals(kn)){com.eqela.libgui.KeyEvent.prototype.set_str.call(ev,eq.api.StringStatic.for_strptr(" "));}else {if(eq.api.StringStatic.for_strptr("tab").equals(kn)){com.eqela.libgui.KeyEvent.prototype.set_str.call(ev,eq.api.StringStatic.for_strptr("\t"));}}if(shift){com.eqela.libgui.KeyEvent.prototype.set_shift.call(ev,true);}if(alt){com.eqela.libgui.KeyEvent.prototype.set_alt.call(ev,true);}if(ctrl){com.eqela.libgui.KeyEvent.prototype.set_ctrl.call(ev,true);}com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,ev);}return(false);};P.on_key_press=function(e){var keycode=0;var charcode=0;var shift=false;var alt=false;var ctrl=false;keycode = e.keyCode;if(this.is_opera) {charcode = e.which;}else if(this.is_webkit) {charcode = e.keyCode;}else {charcode = e.charCode;}shift = e.shiftKey;alt = e.altKey;ctrl = e.ctrlKey;var kn=com.eqela.libhtml5gui.HTML5Frame.prototype.keyname.call(this,keycode);if((eq.api.StringStatic.for_strptr("tab").equals(kn)===false)&&this.com_eqela_libhtml5gui_HTML5Frame_disable_key_capture){return(true);}if((this.com_eqela_libhtml5gui_HTML5Frame_is_opera===false)&&(this.com_eqela_libhtml5gui_HTML5Frame_is_webkit===false)){if((keycode > 0)&&(kn!==null)){return(false);}}if(((charcode===32)||(charcode===9))||(charcode===8)){return(false);}if(charcode > 0){var str=eq.api.StringStatic.for_character(charcode);if(ctrl){str=str.lowercase();}var en=new com.eqela.libgui.KeyPressEvent();com.eqela.libgui.KeyEvent.prototype.set_name.call(en,str);com.eqela.libgui.KeyEvent.prototype.set_str.call(en,str);com.eqela.libgui.KeyEvent.prototype.set_keycode.call(en,keycode);if(shift){com.eqela.libgui.KeyEvent.prototype.set_shift.call(en,true);}if(alt){com.eqela.libgui.KeyEvent.prototype.set_alt.call(en,true);}if(ctrl){com.eqela.libgui.KeyEvent.prototype.set_ctrl.call(en,true);}com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,en);}return(false);};P.on_key_up=function(e){var keycode=0;var shift=false;var alt=false;var ctrl=false;keycode = e.keyCode;shift = e.shiftKey;alt = e.altKey;ctrl = e.ctrlKey;var kn=com.eqela.libhtml5gui.HTML5Frame.prototype.keyname.call(this,keycode);if(kn!==null){var ee=new com.eqela.libgui.KeyReleaseEvent();com.eqela.libgui.KeyEvent.prototype.set_name.call(ee,kn);com.eqela.libgui.KeyEvent.prototype.set_keycode.call(ee,keycode);if(eq.api.StringStatic.for_strptr("space").equals(kn)){com.eqela.libgui.KeyEvent.prototype.set_str.call(ee,eq.api.StringStatic.for_strptr(" "));}else {if(eq.api.StringStatic.for_strptr("tab").equals(kn)){com.eqela.libgui.KeyEvent.prototype.set_str.call(ee,eq.api.StringStatic.for_strptr("\t"));}}if(shift){com.eqela.libgui.KeyEvent.prototype.set_shift.call(ee,true);}if(alt){com.eqela.libgui.KeyEvent.prototype.set_alt.call(ee,true);}if(ctrl){com.eqela.libgui.KeyEvent.prototype.set_ctrl.call(ee,true);}if((eq.api.StringStatic.for_strptr("tab").equals(kn)===false)&&this.com_eqela_libhtml5gui_HTML5Frame_disable_key_capture){return(true);}com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,ee);}return(false);};P.on_mouse_move=function(x,y){this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_x=x;this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_y=y;com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,com.eqela.libgui.PointerEvent.prototype.set_id.call(com.eqela.libgui.PointerEvent.prototype.set_pointer_type.call(com.eqela.libgui.PointerEvent.prototype.set_y.call(com.eqela.libgui.PointerEvent.prototype.set_x.call((new com.eqela.libgui.PointerMoveEvent()),x),y),com.eqela.libgui.PointerEvent.com_eqela_libgui_PointerEvent_MOUSE),0));};P.on_mouse_down=function(){com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,com.eqela.libgui.PointerEvent.prototype.set_id.call(com.eqela.libgui.PointerEvent.prototype.set_pointer_type.call(com.eqela.libgui.PointerEvent.prototype.set_y.call(com.eqela.libgui.PointerEvent.prototype.set_x.call(com.eqela.libgui.PointerPressEvent.prototype.set_button.call(new com.eqela.libgui.PointerPressEvent(),1),this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_x),this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_y),com.eqela.libgui.PointerEvent.com_eqela_libgui_PointerEvent_MOUSE),0));};P.on_mouse_up=function(){com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,com.eqela.libgui.PointerEvent.prototype.set_id.call(com.eqela.libgui.PointerEvent.prototype.set_pointer_type.call(com.eqela.libgui.PointerEvent.prototype.set_y.call(com.eqela.libgui.PointerEvent.prototype.set_x.call(com.eqela.libgui.PointerReleaseEvent.prototype.set_button.call(new com.eqela.libgui.PointerReleaseEvent(),1),this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_x),this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_y),com.eqela.libgui.PointerEvent.com_eqela_libgui_PointerEvent_MOUSE),0));};P.on_mouse_wheel=function(delta){com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,com.eqela.libgui.ScrollEvent.prototype.set_dy.call(com.eqela.libgui.ScrollEvent.prototype.set_dx.call(com.eqela.libgui.ScrollEvent.prototype.set_y.call(com.eqela.libgui.ScrollEvent.prototype.set_x.call(new com.eqela.libgui.ScrollEvent(),this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_x),this.com_eqela_libhtml5gui_HTML5Frame_mouse_pos_y),0),delta*32));};P.determine_ppi=function(){var ppi=0;var mydoc=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(this);var div = mydoc.createElement("div");div.setAttribute("style", "width: 1.3in; padding: 0; visibility: hidden; position: absolute; left: 0; top: 0;");var bodys = mydoc.getElementsByTagName("body");bodys[0].appendChild(div);ppi = div.offsetWidth;if(ppi < 1) {ppi = 1;}bodys[0].removeChild(div);eq.api.Log.debug(eq.api.StringStatic.for_strptr("DPI determined as %d").printf().add(eq.api.Primitive.for_integer(ppi)),null);var dpienv=com.eqela.libos.SystemEnvironment.get_env_var(eq.api.StringStatic.for_strptr("EQ_DPI"));if(eq.api.StringStatic.is_empty(dpienv)===false){var dpienvi=dpienv.to_integer();if(dpienvi > 0){ppi=dpienvi;eq.api.Log.debug(eq.api.StringStatic.for_strptr("DPI manually configured to %d via EQ_DPI").printf().add(eq.api.Primitive.for_integer(ppi)),null);}}return(ppi);};P.event=function(o){if(this.com_eqela_libhtml5gui_HTML5Frame_controller!==null){this.com_eqela_libhtml5gui_HTML5Frame_controller.on_event(o);}};P.on_resize=function(){var nw=0;var nh=0;if(this.com_eqela_libhtml5gui_HTML5Frame_iframe!==null){var ifr=this.com_eqela_libhtml5gui_HTML5Frame_iframe;nw = ifr.width;nh = ifr.height;if(!nw) {nw = 0;}if(!nh) {nh = 0;}}else {if(this.com_eqela_libhtml5gui_HTML5Frame_window!==null){var ww=this.com_eqela_libhtml5gui_HTML5Frame_window;nw = ww.innerWidth;nh = ww.innerHeight;}else {nw = window.innerWidth;nh = window.innerHeight;}}if((this.com_eqela_libhtml5gui_HTML5Frame_mywidth!==nw)||(this.com_eqela_libhtml5gui_HTML5Frame_myheight!==nh)){this.com_eqela_libhtml5gui_HTML5Frame_mywidth=nw;this.com_eqela_libhtml5gui_HTML5Frame_myheight=nh;com.eqela.libhtml5gui.HTML5Frame.prototype.event.call(this,com.eqela.libgui.FrameResizeEvent.prototype.set_height.call(com.eqela.libgui.FrameResizeEvent.prototype.set_width.call(new com.eqela.libgui.FrameResizeEvent(),this.com_eqela_libhtml5gui_HTML5Frame_mywidth),this.com_eqela_libhtml5gui_HTML5Frame_myheight));}};P.get_dpi=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_ppi);};P.add_surface=function(opts){var _t10=null;var _t9=null;var _t8=null;var _t7=null;if(opts===null){return(null);}var v=((function(l,r){return(l!=null&&l._t[r]===true);})((_t7=com.eqela.libgui.SurfaceOptions.prototype.get_surface.call(opts)),"com.eqela.libhtml5gui.HTML5ElementSurface")?_t7:null);if(v===null){if(com.eqela.libgui.SurfaceOptions.prototype.get_surface_type.call(opts)===com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_SURFACE_TYPE_CONTAINER){v=(new com.eqela.libhtml5gui.HTML5ElementContainerSurface());}else {v=(new com.eqela.libhtml5gui.HTML5ElementRenderableSurface());}}if(com.eqela.libgui.SurfaceOptions.prototype.get_placement.call(opts)===com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_TOP){com.eqela.libhtml5gui.HTML5ElementSurface.prototype.append_to.call(v,com.eqela.libhtml5gui.HTML5Frame.prototype.get_document_body.call(this));}else {if(com.eqela.libgui.SurfaceOptions.prototype.get_placement.call(opts)===com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_BOTTOM){com.eqela.libhtml5gui.HTML5ElementSurface.prototype.prepend_to.call(v,com.eqela.libhtml5gui.HTML5Frame.prototype.get_document_body.call(this));}else {if(com.eqela.libgui.SurfaceOptions.prototype.get_placement.call(opts)===com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_ABOVE){var refel=null;var rel=((function(l,r){return(l!=null&&l._t[r]===true);})((_t8=com.eqela.libgui.SurfaceOptions.prototype.get_relative.call(opts)),"com.eqela.libhtml5gui.HTML5ElementSurface")?_t8:null);if(rel!==null){refel=com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(rel);}if(refel===null){com.eqela.libhtml5gui.HTML5ElementSurface.prototype.append_to.call(v,com.eqela.libhtml5gui.HTML5Frame.prototype.get_document_body.call(this));}else {com.eqela.libhtml5gui.HTMLElement.prototype.add_sibling_after.call(refel,com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(v));}}else {if(com.eqela.libgui.SurfaceOptions.prototype.get_placement.call(opts)===com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_BELOW){var refel=null;var rel=((function(l,r){return(l!=null&&l._t[r]===true);})((_t9=com.eqela.libgui.SurfaceOptions.prototype.get_relative.call(opts)),"com.eqela.libhtml5gui.HTML5ElementSurface")?_t9:null);if(rel!==null){refel=com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(rel);}if(refel===null){com.eqela.libhtml5gui.HTML5ElementSurface.prototype.append_to.call(v,com.eqela.libhtml5gui.HTML5Frame.prototype.get_document_body.call(this));}else {com.eqela.libhtml5gui.HTMLElement.prototype.add_sibling_before.call(refel,com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(v));}}else {if(com.eqela.libgui.SurfaceOptions.prototype.get_placement.call(opts)===com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_INSIDE){var refel=null;var rel=((function(l,r){return(l!=null&&l._t[r]===true);})((_t10=com.eqela.libgui.SurfaceOptions.prototype.get_relative.call(opts)),"com.eqela.libhtml5gui.HTML5ElementSurface")?_t10:null);if(rel!==null){refel=com.eqela.libhtml5gui.HTML5ElementSurface.prototype.get_element.call(rel);}if(refel===null){com.eqela.libhtml5gui.HTML5ElementSurface.prototype.append_to.call(v,com.eqela.libhtml5gui.HTML5Frame.prototype.get_document_body.call(this));}else {com.eqela.libhtml5gui.HTML5ElementSurface.prototype.append_to.call(v,refel);}}else {v=null;}}}}}return(v);};P.remove_surface=function(ss){var _t11=null;var s=((function(l,r){return(l!=null&&l._t[r]===true);})((_t11=ss),"com.eqela.libhtml5gui.HTML5ElementSurface")?_t11:null);if(s===null){return;}com.eqela.libhtml5gui.HTML5ElementSurface.prototype.remove.call(s);};P.get_width=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_mywidth);};P.get_height=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_myheight);};P.set_iframe=function(v){this.com_eqela_libhtml5gui_HTML5Frame_iframe=v;return(this);};P.get_iframe=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_iframe);};P.set_window=function(v){this.com_eqela_libhtml5gui_HTML5Frame_window=v;return(this);};P.get_window=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_window);};P.set_disable_key_capture=function(v){this.com_eqela_libhtml5gui_HTML5Frame_disable_key_capture=v;return(this);};P.get_disable_key_capture=function(){return(this.com_eqela_libhtml5gui_HTML5Frame_disable_key_capture);};com.eqela.libhtml5gui.HTML5WindowManager=function(){eq.api.Object.call(this);{}};P=com.eqela.libhtml5gui.HTML5WindowManager.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.WindowManager']=true;P._t['com.eqela.libhtml5gui.HTML5WindowManager']=true;P.constructor=com.eqela.libhtml5gui.HTML5WindowManager;P.get_default_screen=function(){return(null);};P.get_screens=function(){return(null);};P.create_frame=function(fc,opts){var _t12=null;if((opts===null)||(fc===null)){return(null);}var pp=((function(l,r){return(l!=null&&l._t[r]===true);})((_t12=com.eqela.libgui.CreateFrameOptions.prototype.get_parent.call(opts)),"com.eqela.libhtml5gui.HTML5Frame")?_t12:null);if(pp!==null){var pd=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(pp);if(pd!==null){var iframe=null;iframe = pd.createElement("iframe");pd.body.appendChild(iframe);return(com.eqela.libhtml5gui.HTML5Frame.for_frame_controller(fc,iframe,null));}return(null);}var ww=null;ww = window.open('', '', 'toolbar=no,status=no,menubar=no,scrollbars=no,resizable=yes,width=1,height=1');return(com.eqela.libhtml5gui.HTML5Frame.for_frame_controller(fc,null,ww));};com.eqela.libhtml5gui.HTMLElement=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTMLElement_element=null;{}};P=com.eqela.libhtml5gui.HTMLElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libhtml5gui.HTMLElement']=true;P.constructor=com.eqela.libhtml5gui.HTMLElement;com.eqela.libhtml5gui.HTMLElement.create=function(type){if(type===null){return(null);}var el=null;el = document.createElement(type.to_strptr());if(el===null){return(null);}return(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),el));};com.eqela.libhtml5gui.HTMLElement.for_element=function(el){return(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),el));};P.get_id=function(){return(com.eqela.libhtml5gui.HTMLElement.prototype.get_attribute.call(this,eq.api.StringStatic.for_strptr("id")));};P.get_classes=function(){return(eq.api.LinkedList.for_iterator(eq.api.StringSplitter.split(com.eqela.libhtml5gui.HTMLElement.prototype.get_attribute.call(this,eq.api.StringStatic.for_strptr("class")),' '.charCodeAt(0),-1)));};P.remove_from_dom=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return;}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.parentNode.removeChild(ee);};P.get_attribute=function(attr){if((attr===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(null);}var v="";var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.getAttribute(attr.to_strptr());if(v===null){return(null);}return(eq.api.StringStatic.for_strptr(v));};P.set_attribute=function(attr,val){if((attr===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;if(val===null){ee.removeAttribute(attr.to_strptr());}else {ee.setAttribute(attr.to_strptr(), val.to_strptr());}return(this);};P.set_style=function(key,val){if((key===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(this);}var v=val;if(v===null){v=eq.api.StringStatic.for_strptr("");}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.style[key.to_strptr()] = v.to_strptr();return(this);};P.get_style=function(key){if((key===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(null);}var v="";var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.style[key.to_strptr()];if(v===null){return(null);}return(eq.api.StringStatic.for_strptr(v));};P.add_sibling_before=function(sibling){if(sibling===null){return(this);}var tel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(this);var nel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(sibling);if((tel===null)||(nel===null)){return(this);}tel.parentNode.insertBefore(nel, tel);return(this);};P.add_sibling_after=function(sibling){if(sibling===null){return(this);}var tel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(this);var nel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(sibling);if((tel===null)||(nel===null)){return(this);}tel.parentNode.insertBefore(nel, tel.nextSibling);return(this);};P.append_child=function(child){if(((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(child===null))||(com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(child)===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.appendChild(child.get_element());return(this);};P.prepend_child=function(child){if(((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(child===null))||(com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(child)===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.insertBefore(child.get_element(), ee.firstChild);return(this);};P.get_children=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(null);}var v=eq.api.LinkedList.create();var p=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;if(ee.children && ee.children.length) {var els = ee.children;for(var i = 0; i<els.length; i++) {p = els[i];v.append(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),p));}}return(v);};P.get_width=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(0);}var v=0;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.offsetWidth;return(v);};P.get_height=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(0);}var v=0;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.offsetHeight;return(v);};P.get_inner_html=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(null);}var v="";var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.innerHTML;if(v===null){return(null);}return(eq.api.StringStatic.for_strptr(v));};P.set_inner_html=function(ahtml){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(this);}var html=ahtml;if(html===null){html=eq.api.StringStatic.for_strptr("");}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.innerHTML = html.to_strptr();return(this);};P.get_element_by_id=function(id){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(null);}var el=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;el = ee.getElementById(id.to_strptr());if(el===null){return(null);}return(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),el));};P.get_elements_by_class=function(cls){if((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(cls===null)){return(null);}var v=eq.api.LinkedList.create();var p=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;var els = ee.getElementsByClassName(cls.to_strptr());for(var i = 0; i<els.length; i++) {p = els[i];v.append(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),p));}return(v);};P.get_elements_by_tag=function(tag){if((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(tag===null)){return(null);}var v=eq.api.LinkedList.create();var p=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;var els = ee.getElementsByTagName(tag.to_strptr());for(var i = 0; i<els.length; i++) {p = els[i];v.append(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),p));}return(v);};P.add_event_listener=function(event,handler){if(((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(event===null))||(handler===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;var self = this;ee.addEventListener(event.to_strptr(), function(e) {handler.on_html_event(self, event.to_strptr(), e);});return(this);};P.set_element=function(v){this.com_eqela_libhtml5gui_HTMLElement_element=v;return(this);};P.get_element=function(){return(this.com_eqela_libhtml5gui_HTMLElement_element);};com.eqela.libhtml5gui.HTMLDocument=function(){com.eqela.libhtml5gui.HTMLElement.call(this);this.com_eqela_libhtml5gui_HTMLDocument_register_click_handlers=true;{var el=null;el = document;com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(this,el);}};P=com.eqela.libhtml5gui.HTMLDocument.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libhtml5gui.HTMLElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libhtml5gui.HTMLElement']=true;P._t['com.eqela.libhtml5gui.HTMLDocument']=true;P.constructor=com.eqela.libhtml5gui.HTMLDocument;com.eqela.libhtml5gui.HTMLDocument.instance=function(){return(new com.eqela.libhtml5gui.HTMLDocument());};P.initialize=function(){var self = this;window.onload = function() {self.on_load();};window.onresize = function() {self.on_resize(window.innerWidth, window.innerHeight);};};com.eqela.libhtml5gui.HTMLDocument.ClickHandler=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTMLDocument_ClickHandler_doc=null;{}};P2=P;P=com.eqela.libhtml5gui.HTMLDocument.ClickHandler.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libhtml5gui.HTMLEventListener']=true;P._t['com.eqela.libhtml5gui.HTMLDocument.ClickHandler']=true;P.constructor=com.eqela.libhtml5gui.HTMLDocument.ClickHandler;P.on_html_event=function(e,_name,data){if(e!==null){this.com_eqela_libhtml5gui_HTMLDocument_ClickHandler_doc.on_click_id(com.eqela.libhtml5gui.HTMLElement.prototype.get_id.call(e));}};P.set_doc=function(v){this.com_eqela_libhtml5gui_HTMLDocument_ClickHandler_doc=v;return(this);};P.get_doc=function(){return(this.com_eqela_libhtml5gui_HTMLDocument_ClickHandler_doc);};P=P2;P2=null;P.on_load=function(){if(this.com_eqela_libhtml5gui_HTMLDocument_register_click_handlers){var ch=com.eqela.libhtml5gui.HTMLDocument.ClickHandler.prototype.set_doc.call(new com.eqela.libhtml5gui.HTMLDocument.ClickHandler(),this);{var _t0=eq.api.IteratorStatic.for_object(com.eqela.libhtml5gui.HTMLElement.prototype.get_elements_by_tag.call(this,eq.api.StringStatic.for_strptr("a")));if(_t0!==null){var _t1=null;for(_t1=_t0.next();_t1!==null;_t1=_t0.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t1,"com.eqela.libhtml5gui.HTMLElement")){var e=_t1;{com.eqela.libhtml5gui.HTMLElement.prototype.add_event_listener.call(e,eq.api.StringStatic.for_strptr("click"),ch);}}}}}{var _t2=eq.api.IteratorStatic.for_object(com.eqela.libhtml5gui.HTMLElement.prototype.get_elements_by_tag.call(this,eq.api.StringStatic.for_strptr("button")));if(_t2!==null){var _t3=null;for(_t3=_t2.next();_t3!==null;_t3=_t2.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t3,"com.eqela.libhtml5gui.HTMLElement")){var e=_t3;{com.eqela.libhtml5gui.HTMLElement.prototype.add_event_listener.call(e,eq.api.StringStatic.for_strptr("click"),ch);}}}}}}};P.get_head=function(){var _t13=null;var els=com.eqela.libhtml5gui.HTMLElement.prototype.get_elements_by_tag.call(this,eq.api.StringStatic.for_strptr("head"));if(els===null){return(null);}return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t13=els.get(0)),"com.eqela.libhtml5gui.HTMLElement")?_t13:null));};P.get_body=function(){var _t14=null;var els=com.eqela.libhtml5gui.HTMLElement.prototype.get_elements_by_tag.call(this,eq.api.StringStatic.for_strptr("body"));if(els===null){return(null);}return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t14=els.get(0)),"com.eqela.libhtml5gui.HTMLElement")?_t14:null));};P.append_to_head=function(el){var bd=com.eqela.libhtml5gui.HTMLDocument.prototype.get_head.call(this);if(bd===null){return(false);}com.eqela.libhtml5gui.HTMLElement.prototype.append_child.call(bd,el);return(true);};P.append_to_body=function(el){var bd=com.eqela.libhtml5gui.HTMLDocument.prototype.get_body.call(this);if(bd===null){return(false);}com.eqela.libhtml5gui.HTMLElement.prototype.append_child.call(bd,el);return(true);};P.on_click_id=function(id){};P.on_resize=function(w,h){};P.set_register_click_handlers=function(v){this.com_eqela_libhtml5gui_HTMLDocument_register_click_handlers=v;return(this);};P.get_register_click_handlers=function(){return(this.com_eqela_libhtml5gui_HTMLDocument_register_click_handlers);};com.eqela.libhtml5gui.HTMLElement=function(){eq.api.Object.call(this);this.com_eqela_libhtml5gui_HTMLElement_element=null;{}};P=com.eqela.libhtml5gui.HTMLElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libhtml5gui.HTMLElement']=true;P.constructor=com.eqela.libhtml5gui.HTMLElement;com.eqela.libhtml5gui.HTMLElement.create=function(type){if(type===null){return(null);}var el=null;el = document.createElement(type.to_strptr());if(el===null){return(null);}return(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),el));};com.eqela.libhtml5gui.HTMLElement.for_element=function(el){return(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),el));};P.get_id=function(){return(com.eqela.libhtml5gui.HTMLElement.prototype.get_attribute.call(this,eq.api.StringStatic.for_strptr("id")));};P.get_classes=function(){return(eq.api.LinkedList.for_iterator(eq.api.StringSplitter.split(com.eqela.libhtml5gui.HTMLElement.prototype.get_attribute.call(this,eq.api.StringStatic.for_strptr("class")),' '.charCodeAt(0),-1)));};P.remove_from_dom=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return;}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.parentNode.removeChild(ee);};P.get_attribute=function(attr){if((attr===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(null);}var v="";var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.getAttribute(attr.to_strptr());if(v===null){return(null);}return(eq.api.StringStatic.for_strptr(v));};P.set_attribute=function(attr,val){if((attr===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;if(val===null){ee.removeAttribute(attr.to_strptr());}else {ee.setAttribute(attr.to_strptr(), val.to_strptr());}return(this);};P.set_style=function(key,val){if((key===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(this);}var v=val;if(v===null){v=eq.api.StringStatic.for_strptr("");}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.style[key.to_strptr()] = v.to_strptr();return(this);};P.get_style=function(key){if((key===null)||(this.com_eqela_libhtml5gui_HTMLElement_element===null)){return(null);}var v="";var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.style[key.to_strptr()];if(v===null){return(null);}return(eq.api.StringStatic.for_strptr(v));};P.add_sibling_before=function(sibling){if(sibling===null){return(this);}var tel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(this);var nel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(sibling);if((tel===null)||(nel===null)){return(this);}tel.parentNode.insertBefore(nel, tel);return(this);};P.add_sibling_after=function(sibling){if(sibling===null){return(this);}var tel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(this);var nel=com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(sibling);if((tel===null)||(nel===null)){return(this);}tel.parentNode.insertBefore(nel, tel.nextSibling);return(this);};P.append_child=function(child){if(((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(child===null))||(com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(child)===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.appendChild(child.get_element());return(this);};P.prepend_child=function(child){if(((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(child===null))||(com.eqela.libhtml5gui.HTMLElement.prototype.get_element.call(child)===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.insertBefore(child.get_element(), ee.firstChild);return(this);};P.get_children=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(null);}var v=eq.api.LinkedList.create();var p=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;if(ee.children && ee.children.length) {var els = ee.children;for(var i = 0; i<els.length; i++) {p = els[i];v.append(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),p));}}return(v);};P.get_width=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(0);}var v=0;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.offsetWidth;return(v);};P.get_height=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(0);}var v=0;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.offsetHeight;return(v);};P.get_inner_html=function(){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(null);}var v="";var ee=this.com_eqela_libhtml5gui_HTMLElement_element;v = ee.innerHTML;if(v===null){return(null);}return(eq.api.StringStatic.for_strptr(v));};P.set_inner_html=function(ahtml){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(this);}var html=ahtml;if(html===null){html=eq.api.StringStatic.for_strptr("");}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;ee.innerHTML = html.to_strptr();return(this);};P.get_element_by_id=function(id){if(this.com_eqela_libhtml5gui_HTMLElement_element===null){return(null);}var el=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;el = ee.getElementById(id.to_strptr());if(el===null){return(null);}return(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),el));};P.get_elements_by_class=function(cls){if((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(cls===null)){return(null);}var v=eq.api.LinkedList.create();var p=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;var els = ee.getElementsByClassName(cls.to_strptr());for(var i = 0; i<els.length; i++) {p = els[i];v.append(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),p));}return(v);};P.get_elements_by_tag=function(tag){if((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(tag===null)){return(null);}var v=eq.api.LinkedList.create();var p=null;var ee=this.com_eqela_libhtml5gui_HTMLElement_element;var els = ee.getElementsByTagName(tag.to_strptr());for(var i = 0; i<els.length; i++) {p = els[i];v.append(com.eqela.libhtml5gui.HTMLElement.prototype.set_element.call(new com.eqela.libhtml5gui.HTMLElement(),p));}return(v);};P.add_event_listener=function(event,handler){if(((this.com_eqela_libhtml5gui_HTMLElement_element===null)||(event===null))||(handler===null)){return(this);}var ee=this.com_eqela_libhtml5gui_HTMLElement_element;var self = this;ee.addEventListener(event.to_strptr(), function(e) {handler.on_html_event(self, event.to_strptr(), e);});return(this);};P.set_element=function(v){this.com_eqela_libhtml5gui_HTMLElement_element=v;return(this);};P.get_element=function(){return(this.com_eqela_libhtml5gui_HTMLElement_element);};