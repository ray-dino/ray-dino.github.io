var com=com||{};com.eqela=com.eqela||{};com.eqela.libspriteengine=com.eqela.libspriteengine||{};com.eqela.libspriteengine.SEAnimationElement=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEAnimationElement_factor=1.0;this.com_eqela_libspriteengine_SEAnimationElement_done=false;{}};P=com.eqela.libspriteengine.SEAnimationElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEAnimationElement']=true;P.constructor=com.eqela.libspriteengine.SEAnimationElement;P.on_first_tick=function(){};P.on_animation_element_tick=function(f){};P.set_factor=function(v){this.com_eqela_libspriteengine_SEAnimationElement_factor=v;return(this);};P.get_factor=function(){return(this.com_eqela_libspriteengine_SEAnimationElement_factor);};P.set_done=function(v){this.com_eqela_libspriteengine_SEAnimationElement_done=v;return(this);};P.get_done=function(){return(this.com_eqela_libspriteengine_SEAnimationElement_done);};com.eqela.libspriteengine.SEEntity=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEEntity_scene=null;this.com_eqela_libspriteengine_SEEntity_mynode=null;this.com_eqela_libspriteengine_SEEntity_container=null;{}};P=com.eqela.libspriteengine.SEEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P.constructor=com.eqela.libspriteengine.SEEntity;P.on_message=function(o){};P.initialize=function(rsc){};P.cleanup=function(){};P.tick=function(now,delta){};P.px=function(s,dpi){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(0);}return(com.eqela.libspriteengine.SEScene.prototype.px.call(this.com_eqela_libspriteengine_SEEntity_scene,s,dpi));};P.iterate_pointers=function(){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(com.eqela.libspriteengine.SEScene.prototype.iterate_pointers.call(this.com_eqela_libspriteengine_SEEntity_scene));};P.remove_entity=function(){if(this.com_eqela_libspriteengine_SEEntity_scene!==null){com.eqela.libspriteengine.SEScene.prototype.remove_entity.call(this.com_eqela_libspriteengine_SEEntity_scene,this);}};P.on_entity_removed=function(){};P.add_entity=function(entity){if((this.com_eqela_libspriteengine_SEEntity_scene===null)||(entity===null)){return(null);}com.eqela.libspriteengine.SEEntity.prototype.set_container.call(entity,this.com_eqela_libspriteengine_SEEntity_container);return(com.eqela.libspriteengine.SEScene.prototype.add_entity.call(this.com_eqela_libspriteengine_SEEntity_scene,entity));};P.get_scene_width=function(){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(0);}return(~~(com.eqela.libspriteengine.SEScene.prototype.get_scene_width.call(this.com_eqela_libspriteengine_SEEntity_scene)));};P.get_scene_height=function(){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(0);}return(~~(com.eqela.libspriteengine.SEScene.prototype.get_scene_height.call(this.com_eqela_libspriteengine_SEEntity_scene)));};P.is_key_pressed=function(_name){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(false);}return(com.eqela.libspriteengine.SEScene.prototype.is_key_pressed.call(this.com_eqela_libspriteengine_SEEntity_scene,_name));};P.add_sprite=function(){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite());}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite());};P.add_sprite_for_image=function(image){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite_for_image(image));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite_for_image(image));};P.add_sprite_for_text=function(text,fontid){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite_for_text(text,fontid));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite_for_text(text,fontid));};P.add_sprite_for_color=function(color,width,height){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite_for_color(color,width,height));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite_for_color(color,width,height));};P.add_layer=function(x,y,width,height,force_clipped){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_layer(x,y,width,height,force_clipped));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_layer(x,y,width,height,force_clipped));};P.set_scene=function(v){this.com_eqela_libspriteengine_SEEntity_scene=v;return(this);};P.get_scene=function(){return(this.com_eqela_libspriteengine_SEEntity_scene);};P.set_mynode=function(v){this.com_eqela_libspriteengine_SEEntity_mynode=v;return(this);};P.get_mynode=function(){return(this.com_eqela_libspriteengine_SEEntity_mynode);};P.set_container=function(v){this.com_eqela_libspriteengine_SEEntity_container=v;return(this);};P.get_container=function(){return(this.com_eqela_libspriteengine_SEEntity_container);};com.eqela.libspriteengine.SEAnimationManagerEntity=function(){com.eqela.libspriteengine.SEEntity.call(this);this.com_eqela_libspriteengine_SEAnimationManagerEntity_duration=750000;this.com_eqela_libspriteengine_SEAnimationManagerEntity_listener=null;this.com_eqela_libspriteengine_SEAnimationManagerEntity_start=null;this.com_eqela_libspriteengine_SEAnimationManagerEntity_endflag=false;this.com_eqela_libspriteengine_SEAnimationManagerEntity_elements=null;{}};P=com.eqela.libspriteengine.SEAnimationManagerEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SEAnimationManagerEntity']=true;P.constructor=com.eqela.libspriteengine.SEAnimationManagerEntity;P.add_element=function(ae){if(this.com_eqela_libspriteengine_SEAnimationManagerEntity_elements===null){this.com_eqela_libspriteengine_SEAnimationManagerEntity_elements=eq.api.LinkedList.create();}if(ae!==null){this.com_eqela_libspriteengine_SEAnimationManagerEntity_elements.add(ae);}return(this);};P.on_animation_manager_tick=function(f){{var _t0=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEAnimationManagerEntity_elements);if(_t0!==null){var _t1=null;for(_t1=_t0.next();_t1!==null;_t1=_t0.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t1,"com.eqela.libspriteengine.SEAnimationElement")){var ae=_t1;{if(com.eqela.libspriteengine.SEAnimationElement.prototype.get_done.call(ae)){continue;}var ff=f*com.eqela.libspriteengine.SEAnimationElement.prototype.get_factor.call(ae);ae.on_animation_element_tick(ff);if(ff >= 1.0){com.eqela.libspriteengine.SEAnimationElement.prototype.set_done.call(ae,true);}}}}}}};P.on_first_tick=function(){{var _t2=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEAnimationManagerEntity_elements);if(_t2!==null){var _t3=null;for(_t3=_t2.next();_t3!==null;_t3=_t2.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t3,"com.eqela.libspriteengine.SEAnimationElement")){var ae=_t3;{ae.on_first_tick();}}}}}};P.tick=function(now,delta){if(this.com_eqela_libspriteengine_SEAnimationManagerEntity_start===null){this.com_eqela_libspriteengine_SEAnimationManagerEntity_start=now;this.com_eqela_libspriteengine_SEAnimationManagerEntity_endflag=false;this.on_first_tick();}var diff=eq.api.TimeVal.diff(now,this.com_eqela_libspriteengine_SEAnimationManagerEntity_start);var f=(diff/(this.com_eqela_libspriteengine_SEAnimationManagerEntity_duration));var ef=false;if(f > 1){f=1;ef=true;}this.on_animation_manager_tick(f);if(this.com_eqela_libspriteengine_SEAnimationManagerEntity_endflag){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);if(this.com_eqela_libspriteengine_SEAnimationManagerEntity_listener!==null){this.com_eqela_libspriteengine_SEAnimationManagerEntity_listener.on_animation_ended();}}this.com_eqela_libspriteengine_SEAnimationManagerEntity_endflag=ef;};P.set_duration=function(v){this.com_eqela_libspriteengine_SEAnimationManagerEntity_duration=v;return(this);};P.get_duration=function(){return(this.com_eqela_libspriteengine_SEAnimationManagerEntity_duration);};P.set_listener=function(v){this.com_eqela_libspriteengine_SEAnimationManagerEntity_listener=v;return(this);};P.get_listener=function(){return(this.com_eqela_libspriteengine_SEAnimationManagerEntity_listener);};com.eqela.libspriteengine.SEBackend=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEBackend_resource_cache=null;this.com_eqela_libspriteengine_SEBackend_sescene=null;this.com_eqela_libspriteengine_SEBackend_frame=null;{}};P=com.eqela.libspriteengine.SEBackend.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEBackend']=true;P.constructor=com.eqela.libspriteengine.SEBackend;P.create_resource_cache=function(){return(com.eqela.libspriteengine.SEResourceCache.for_frame(this.com_eqela_libspriteengine_SEBackend_frame));};P.update_resource_cache=function(){if(this.com_eqela_libspriteengine_SEBackend_resource_cache!==null){this.com_eqela_libspriteengine_SEBackend_resource_cache.cleanup();this.com_eqela_libspriteengine_SEBackend_resource_cache=null;}this.com_eqela_libspriteengine_SEBackend_resource_cache=this.create_resource_cache();com.eqela.libspriteengine.SEResourceCache.prototype.set_frame.call(this.com_eqela_libspriteengine_SEBackend_resource_cache,com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this));};P.on_scene_changed=function(){com.eqela.libspriteengine.SEBackend.prototype.update_resource_cache.call(this);};P.start=function(scene){this.com_eqela_libspriteengine_SEBackend_sescene=scene;};P.stop=function(){this.com_eqela_libspriteengine_SEBackend_sescene=null;};P.cleanup=function(){if(this.com_eqela_libspriteengine_SEBackend_resource_cache!==null){this.com_eqela_libspriteengine_SEBackend_resource_cache.cleanup();this.com_eqela_libspriteengine_SEBackend_resource_cache=null;}this.com_eqela_libspriteengine_SEBackend_frame=null;this.com_eqela_libspriteengine_SEBackend_sescene=null;};P.is_high_performance=function(){return(false);};P.add_sprite=function(){return(null);};P.add_sprite_for_image=function(image){return(null);};P.add_sprite_for_text=function(text,fontid){return(null);};P.add_sprite_for_color=function(color,width,height){return(null);};P.add_layer=function(x,y,width,height,force_clipped){return(null);};P.set_resource_cache=function(v){this.com_eqela_libspriteengine_SEBackend_resource_cache=v;return(this);};P.get_resource_cache=function(){return(this.com_eqela_libspriteengine_SEBackend_resource_cache);};P.set_sescene=function(v){this.com_eqela_libspriteengine_SEBackend_sescene=v;return(this);};P.get_sescene=function(){return(this.com_eqela_libspriteengine_SEBackend_sescene);};P.set_frame=function(v){this.com_eqela_libspriteengine_SEBackend_frame=v;return(this);};P.get_frame=function(){return(this.com_eqela_libspriteengine_SEBackend_frame);};com.eqela.libspriteengine.SESpriteEntity=function(){com.eqela.libspriteengine.SEEntity.call(this);this.com_eqela_libspriteengine_SESpriteEntity_sprite=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_position=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_image=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_text=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_font=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_color=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_width=0.0;this.com_eqela_libspriteengine_SESpriteEntity_initial_height=0.0;this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation=0.0;this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha=1.0;this.com_eqela_libspriteengine_SESpriteEntity_image_sheet=null;this.com_eqela_libspriteengine_SESpriteEntity_current_frame=-1;{}};P=com.eqela.libspriteengine.SESpriteEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P.constructor=com.eqela.libspriteengine.SESpriteEntity;com.eqela.libspriteengine.SESpriteEntity.for_image=function(image){return(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_image.call(new com.eqela.libspriteengine.SESpriteEntity(),image));};com.eqela.libspriteengine.SESpriteEntity.for_text=function(text,fontid){return(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_font.call(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_text.call(new com.eqela.libspriteengine.SESpriteEntity(),text),fontid));};com.eqela.libspriteengine.SESpriteEntity.for_color=function(color,width,height){return(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_height.call(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_width.call(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_color.call(new com.eqela.libspriteengine.SESpriteEntity(),color),width),height));};P.set_image_sheet=function(imgs){this.com_eqela_libspriteengine_SESpriteEntity_image_sheet=imgs;this.com_eqela_libspriteengine_SESpriteEntity_current_frame=-1;com.eqela.libspriteengine.SESpriteEntity.prototype.next_frame.call(this);return(this);};P.next_frame=function(){if((this.com_eqela_libspriteengine_SESpriteEntity_image_sheet===null)||(this.com_eqela_libspriteengine_SESpriteEntity_image_sheet.count() < 1)){this.set_image(null);return(false);}this.com_eqela_libspriteengine_SESpriteEntity_current_frame++;if(this.com_eqela_libspriteengine_SESpriteEntity_current_frame >= this.com_eqela_libspriteengine_SESpriteEntity_image_sheet.count()){this.com_eqela_libspriteengine_SESpriteEntity_current_frame=0;}this.set_image(com.eqela.libspriteengine.SEImage.for_texture(this.com_eqela_libspriteengine_SESpriteEntity_image_sheet.get(this.com_eqela_libspriteengine_SESpriteEntity_current_frame)));return(true);};P.set_xy=function(x,y){this.com_eqela_libspriteengine_SESpriteEntity_initial_position=com.eqela.libgui.PositionStatic.instance(x,y);this.move(x,y);return(this);};P.create_sprite=function(){var container=com.eqela.libspriteengine.SEEntity.prototype.get_container.call(this);if(container!==null){return(container.add_sprite());}var scene=com.eqela.libspriteengine.SEEntity.prototype.get_scene.call(this);if(scene===null){return(null);}return(scene.add_sprite());};P.initialize=function(rsc){com.eqela.libspriteengine.SEEntity.prototype.initialize.call(this,rsc);this.com_eqela_libspriteengine_SESpriteEntity_sprite=this.create_sprite();if(this.com_eqela_libspriteengine_SESpriteEntity_initial_image!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_image(this.com_eqela_libspriteengine_SESpriteEntity_initial_image);}else {if(this.com_eqela_libspriteengine_SESpriteEntity_initial_text!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_text(this.com_eqela_libspriteengine_SESpriteEntity_initial_text,this.com_eqela_libspriteengine_SESpriteEntity_initial_font);}else {if(this.com_eqela_libspriteengine_SESpriteEntity_initial_color!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_color(this.com_eqela_libspriteengine_SESpriteEntity_initial_color,this.com_eqela_libspriteengine_SESpriteEntity_initial_width,this.com_eqela_libspriteengine_SESpriteEntity_initial_height);}}}if(this.com_eqela_libspriteengine_SESpriteEntity_initial_position!==null){this.move(this.com_eqela_libspriteengine_SESpriteEntity_initial_position.get_x(),this.com_eqela_libspriteengine_SESpriteEntity_initial_position.get_y());}this.set_rotation(this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation);this.set_alpha(this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha);};P.cleanup=function(){com.eqela.libspriteengine.SEEntity.prototype.cleanup.call(this);if(this.com_eqela_libspriteengine_SESpriteEntity_sprite!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite=com.eqela.libspriteengine.SESpriteStatic.remove(this.com_eqela_libspriteengine_SESpriteEntity_sprite);}};P.is_inside=function(pi){if(pi===null){return(false);}var x=com.eqela.libspriteengine.SEPointerInfo.prototype.get_x.call(pi);var y=com.eqela.libspriteengine.SEPointerInfo.prototype.get_y.call(pi);if((((x >= this.get_x())&&(x < (this.get_x()+this.get_width())))&&(y >= this.get_y()))&&(y < (this.get_y()+this.get_height()))){return(true);}return(false);};P.set_image=function(image){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_image(image);};P.set_text=function(text,fontid){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_text(text,fontid);};P.set_color=function(color,width,height){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_color(color,width,height);};P.move=function(x,y){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.move(x,y);};P.set_rotation=function(angle){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_rotation(angle);};P.set_alpha=function(alpha){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_alpha(alpha);};P.get_sprite=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_sprite);};P.get_x=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_x());};P.get_y=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_y());};P.get_width=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_width());};P.get_height=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_height());};P.get_rotation=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_rotation());};P.get_alpha=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_alpha());};P.remove_from_container=function(){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.set_initial_position=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_position=v;return(this);};P.get_initial_position=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_position);};P.set_initial_image=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_image=v;return(this);};P.get_initial_image=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_image);};P.set_initial_text=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_text=v;return(this);};P.get_initial_text=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_text);};P.set_initial_font=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_font=v;return(this);};P.get_initial_font=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_font);};P.set_initial_color=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_color=v;return(this);};P.get_initial_color=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_color);};P.set_initial_width=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_width=v;return(this);};P.get_initial_width=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_width);};P.set_initial_height=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_height=v;return(this);};P.get_initial_height=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_height);};P.set_initial_rotation=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation=v;return(this);};P.get_initial_rotation=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation);};P.set_initial_alpha=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha=v;return(this);};P.get_initial_alpha=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha);};com.eqela.libspriteengine.SEButtonEntity=function(){com.eqela.libspriteengine.SESpriteEntity.call(this);this.com_eqela_libspriteengine_SEButtonEntity_listener=null;this.com_eqela_libspriteengine_SEButtonEntity_data=null;this.com_eqela_libspriteengine_SEButtonEntity_pressed=false;this.com_eqela_libspriteengine_SEButtonEntity_has_pointer=false;{}};P=com.eqela.libspriteengine.SEButtonEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SESpriteEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEPointerListener']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEButtonEntity']=true;P.constructor=com.eqela.libspriteengine.SEButtonEntity;com.eqela.libspriteengine.SEButtonEntity.for_image=function(img){return(com.eqela.libspriteengine.SEButtonEntity.for_images(img,null,null));};com.eqela.libspriteengine.SEButtonEntity.for_images=function(normal,hover,pressed){return(com.eqela.libspriteengine.SEImageButtonEntity.prototype.set_image_pressed.call(com.eqela.libspriteengine.SEImageButtonEntity.prototype.set_image_hover.call(com.eqela.libspriteengine.SEImageButtonEntity.prototype.set_image_normal.call(new com.eqela.libspriteengine.SEImageButtonEntity(),normal),hover),pressed));};com.eqela.libspriteengine.SEButtonEntity.for_text=function(text,normal_font,hover_font,pressed_font){return(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_pressed_font.call(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_hover_font.call(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_normal_font.call(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_button_text.call(new com.eqela.libspriteengine.SETextButtonEntity(),text),normal_font),hover_font),pressed_font));};P.get_pressed=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_pressed);};P.get_has_pointer=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer);};P.initialize=function(rsc){com.eqela.libspriteengine.SESpriteEntity.prototype.initialize.call(this,rsc);this.update();};P.update=function(){};P.on_pointer_enter=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer){return;}this.com_eqela_libspriteengine_SEButtonEntity_has_pointer=true;this.update();};P.on_pointer_leave=function(pi){if((this.com_eqela_libspriteengine_SEButtonEntity_has_pointer===false)&&(this.com_eqela_libspriteengine_SEButtonEntity_pressed===false)){return;}this.com_eqela_libspriteengine_SEButtonEntity_has_pointer=false;this.com_eqela_libspriteengine_SEButtonEntity_pressed=false;this.update();};P.on_pointer_move=function(pi){if(com.eqela.libspriteengine.SEPointerInfo.prototype.is_inside.call(pi,this.get_x(),this.get_y(),this.get_width(),this.get_height())){if(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer===false){this.on_pointer_enter(pi);}}else {if(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer){this.on_pointer_leave(pi);}}};P.on_pointer_press=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_pressed){return;}if(com.eqela.libspriteengine.SEPointerInfo.prototype.is_inside.call(pi,this.get_x(),this.get_y(),this.get_width(),this.get_height())===false){return;}this.com_eqela_libspriteengine_SEButtonEntity_pressed=true;this.update();};P.on_pointer_release=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_pressed===false){return;}if(com.eqela.libspriteengine.SEPointerInfo.prototype.is_inside.call(pi,this.get_x(),this.get_y(),this.get_width(),this.get_height())===false){return;}this.on_pointer_click(pi);this.com_eqela_libspriteengine_SEButtonEntity_pressed=false;this.update();};P.on_pointer_click=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_listener!==null){this.com_eqela_libspriteengine_SEButtonEntity_listener.on_message(this.com_eqela_libspriteengine_SEButtonEntity_data);}};P.set_listener=function(v){this.com_eqela_libspriteengine_SEButtonEntity_listener=v;return(this);};P.get_listener=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_listener);};P.set_data=function(v){this.com_eqela_libspriteengine_SEButtonEntity_data=v;return(this);};P.get_data=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_data);};com.eqela.libspriteengine.SEImageButtonEntity=function(){com.eqela.libspriteengine.SEButtonEntity.call(this);this.com_eqela_libspriteengine_SEImageButtonEntity_image_normal=null;this.com_eqela_libspriteengine_SEImageButtonEntity_image_hover=null;this.com_eqela_libspriteengine_SEImageButtonEntity_image_pressed=null;{}};P=com.eqela.libspriteengine.SEImageButtonEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEButtonEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEPointerListener']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEButtonEntity']=true;P._t['com.eqela.libspriteengine.SEImageButtonEntity']=true;P.constructor=com.eqela.libspriteengine.SEImageButtonEntity;P.update=function(){if(com.eqela.libspriteengine.SEButtonEntity.prototype.get_pressed.call(this)){var img=this.com_eqela_libspriteengine_SEImageButtonEntity_image_pressed;if(img===null){img=this.com_eqela_libspriteengine_SEImageButtonEntity_image_hover;}if(img===null){img=this.com_eqela_libspriteengine_SEImageButtonEntity_image_normal;}this.set_image(img);}else {if(com.eqela.libspriteengine.SEButtonEntity.prototype.get_has_pointer.call(this)){var img=this.com_eqela_libspriteengine_SEImageButtonEntity_image_hover;if(img===null){img=this.com_eqela_libspriteengine_SEImageButtonEntity_image_normal;}this.set_image(img);}else {this.set_image(this.com_eqela_libspriteengine_SEImageButtonEntity_image_normal);}}};P.set_image_normal=function(v){this.com_eqela_libspriteengine_SEImageButtonEntity_image_normal=v;return(this);};P.get_image_normal=function(){return(this.com_eqela_libspriteengine_SEImageButtonEntity_image_normal);};P.set_image_hover=function(v){this.com_eqela_libspriteengine_SEImageButtonEntity_image_hover=v;return(this);};P.get_image_hover=function(){return(this.com_eqela_libspriteengine_SEImageButtonEntity_image_hover);};P.set_image_pressed=function(v){this.com_eqela_libspriteengine_SEImageButtonEntity_image_pressed=v;return(this);};P.get_image_pressed=function(){return(this.com_eqela_libspriteengine_SEImageButtonEntity_image_pressed);};com.eqela.libspriteengine.SETextButtonEntity=function(){com.eqela.libspriteengine.SEButtonEntity.call(this);this.com_eqela_libspriteengine_SETextButtonEntity_button_text=null;this.com_eqela_libspriteengine_SETextButtonEntity_normal_font=null;this.com_eqela_libspriteengine_SETextButtonEntity_hover_font=null;this.com_eqela_libspriteengine_SETextButtonEntity_pressed_font=null;{}};P=com.eqela.libspriteengine.SETextButtonEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEButtonEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEPointerListener']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEButtonEntity']=true;P._t['com.eqela.libspriteengine.SETextButtonEntity']=true;P.constructor=com.eqela.libspriteengine.SETextButtonEntity;P.update=function(){if(com.eqela.libspriteengine.SEButtonEntity.prototype.get_pressed.call(this)){var ff=this.com_eqela_libspriteengine_SETextButtonEntity_pressed_font;if(eq.api.StringStatic.is_empty(ff)){ff=this.com_eqela_libspriteengine_SETextButtonEntity_hover_font;}if(eq.api.StringStatic.is_empty(ff)){ff=this.com_eqela_libspriteengine_SETextButtonEntity_normal_font;}this.set_text(this.com_eqela_libspriteengine_SETextButtonEntity_button_text,ff);}else {if(com.eqela.libspriteengine.SEButtonEntity.prototype.get_has_pointer.call(this)){var ff=this.com_eqela_libspriteengine_SETextButtonEntity_hover_font;if(eq.api.StringStatic.is_empty(ff)){ff=this.com_eqela_libspriteengine_SETextButtonEntity_normal_font;}this.set_text(this.com_eqela_libspriteengine_SETextButtonEntity_button_text,ff);}else {this.set_text(this.com_eqela_libspriteengine_SETextButtonEntity_button_text,this.com_eqela_libspriteengine_SETextButtonEntity_normal_font);}}};P.set_button_text=function(v){this.com_eqela_libspriteengine_SETextButtonEntity_button_text=v;return(this);};P.get_button_text=function(){return(this.com_eqela_libspriteengine_SETextButtonEntity_button_text);};P.set_normal_font=function(v){this.com_eqela_libspriteengine_SETextButtonEntity_normal_font=v;return(this);};P.get_normal_font=function(){return(this.com_eqela_libspriteengine_SETextButtonEntity_normal_font);};P.set_hover_font=function(v){this.com_eqela_libspriteengine_SETextButtonEntity_hover_font=v;return(this);};P.get_hover_font=function(){return(this.com_eqela_libspriteengine_SETextButtonEntity_hover_font);};P.set_pressed_font=function(v){this.com_eqela_libspriteengine_SETextButtonEntity_pressed_font=v;return(this);};P.get_pressed_font=function(){return(this.com_eqela_libspriteengine_SETextButtonEntity_pressed_font);};com.eqela.libspriteengine.SEButtonEntity=function(){com.eqela.libspriteengine.SESpriteEntity.call(this);this.com_eqela_libspriteengine_SEButtonEntity_listener=null;this.com_eqela_libspriteengine_SEButtonEntity_data=null;this.com_eqela_libspriteengine_SEButtonEntity_pressed=false;this.com_eqela_libspriteengine_SEButtonEntity_has_pointer=false;{}};P=com.eqela.libspriteengine.SEButtonEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SESpriteEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEPointerListener']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEButtonEntity']=true;P.constructor=com.eqela.libspriteengine.SEButtonEntity;com.eqela.libspriteengine.SEButtonEntity.for_image=function(img){return(com.eqela.libspriteengine.SEButtonEntity.for_images(img,null,null));};com.eqela.libspriteengine.SEButtonEntity.for_images=function(normal,hover,pressed){return(com.eqela.libspriteengine.SEImageButtonEntity.prototype.set_image_pressed.call(com.eqela.libspriteengine.SEImageButtonEntity.prototype.set_image_hover.call(com.eqela.libspriteengine.SEImageButtonEntity.prototype.set_image_normal.call(new com.eqela.libspriteengine.SEImageButtonEntity(),normal),hover),pressed));};com.eqela.libspriteengine.SEButtonEntity.for_text=function(text,normal_font,hover_font,pressed_font){return(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_pressed_font.call(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_hover_font.call(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_normal_font.call(com.eqela.libspriteengine.SETextButtonEntity.prototype.set_button_text.call(new com.eqela.libspriteengine.SETextButtonEntity(),text),normal_font),hover_font),pressed_font));};P.get_pressed=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_pressed);};P.get_has_pointer=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer);};P.initialize=function(rsc){com.eqela.libspriteengine.SESpriteEntity.prototype.initialize.call(this,rsc);this.update();};P.update=function(){};P.on_pointer_enter=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer){return;}this.com_eqela_libspriteengine_SEButtonEntity_has_pointer=true;this.update();};P.on_pointer_leave=function(pi){if((this.com_eqela_libspriteengine_SEButtonEntity_has_pointer===false)&&(this.com_eqela_libspriteengine_SEButtonEntity_pressed===false)){return;}this.com_eqela_libspriteengine_SEButtonEntity_has_pointer=false;this.com_eqela_libspriteengine_SEButtonEntity_pressed=false;this.update();};P.on_pointer_move=function(pi){if(com.eqela.libspriteengine.SEPointerInfo.prototype.is_inside.call(pi,this.get_x(),this.get_y(),this.get_width(),this.get_height())){if(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer===false){this.on_pointer_enter(pi);}}else {if(this.com_eqela_libspriteengine_SEButtonEntity_has_pointer){this.on_pointer_leave(pi);}}};P.on_pointer_press=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_pressed){return;}if(com.eqela.libspriteengine.SEPointerInfo.prototype.is_inside.call(pi,this.get_x(),this.get_y(),this.get_width(),this.get_height())===false){return;}this.com_eqela_libspriteengine_SEButtonEntity_pressed=true;this.update();};P.on_pointer_release=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_pressed===false){return;}if(com.eqela.libspriteengine.SEPointerInfo.prototype.is_inside.call(pi,this.get_x(),this.get_y(),this.get_width(),this.get_height())===false){return;}this.on_pointer_click(pi);this.com_eqela_libspriteengine_SEButtonEntity_pressed=false;this.update();};P.on_pointer_click=function(pi){if(this.com_eqela_libspriteengine_SEButtonEntity_listener!==null){this.com_eqela_libspriteengine_SEButtonEntity_listener.on_message(this.com_eqela_libspriteengine_SEButtonEntity_data);}};P.set_listener=function(v){this.com_eqela_libspriteengine_SEButtonEntity_listener=v;return(this);};P.get_listener=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_listener);};P.set_data=function(v){this.com_eqela_libspriteengine_SEButtonEntity_data=v;return(this);};P.get_data=function(){return(this.com_eqela_libspriteengine_SEButtonEntity_data);};com.eqela.libspriteengine.SEEntity=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEEntity_scene=null;this.com_eqela_libspriteengine_SEEntity_mynode=null;this.com_eqela_libspriteengine_SEEntity_container=null;{}};P=com.eqela.libspriteengine.SEEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P.constructor=com.eqela.libspriteengine.SEEntity;P.on_message=function(o){};P.initialize=function(rsc){};P.cleanup=function(){};P.tick=function(now,delta){};P.px=function(s,dpi){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(0);}return(com.eqela.libspriteengine.SEScene.prototype.px.call(this.com_eqela_libspriteengine_SEEntity_scene,s,dpi));};P.iterate_pointers=function(){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(com.eqela.libspriteengine.SEScene.prototype.iterate_pointers.call(this.com_eqela_libspriteengine_SEEntity_scene));};P.remove_entity=function(){if(this.com_eqela_libspriteengine_SEEntity_scene!==null){com.eqela.libspriteengine.SEScene.prototype.remove_entity.call(this.com_eqela_libspriteengine_SEEntity_scene,this);}};P.on_entity_removed=function(){};P.add_entity=function(entity){if((this.com_eqela_libspriteengine_SEEntity_scene===null)||(entity===null)){return(null);}com.eqela.libspriteengine.SEEntity.prototype.set_container.call(entity,this.com_eqela_libspriteengine_SEEntity_container);return(com.eqela.libspriteengine.SEScene.prototype.add_entity.call(this.com_eqela_libspriteengine_SEEntity_scene,entity));};P.get_scene_width=function(){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(0);}return(~~(com.eqela.libspriteengine.SEScene.prototype.get_scene_width.call(this.com_eqela_libspriteengine_SEEntity_scene)));};P.get_scene_height=function(){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(0);}return(~~(com.eqela.libspriteengine.SEScene.prototype.get_scene_height.call(this.com_eqela_libspriteengine_SEEntity_scene)));};P.is_key_pressed=function(_name){if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(false);}return(com.eqela.libspriteengine.SEScene.prototype.is_key_pressed.call(this.com_eqela_libspriteengine_SEEntity_scene,_name));};P.add_sprite=function(){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite());}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite());};P.add_sprite_for_image=function(image){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite_for_image(image));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite_for_image(image));};P.add_sprite_for_text=function(text,fontid){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite_for_text(text,fontid));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite_for_text(text,fontid));};P.add_sprite_for_color=function(color,width,height){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_sprite_for_color(color,width,height));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_sprite_for_color(color,width,height));};P.add_layer=function(x,y,width,height,force_clipped){if(this.com_eqela_libspriteengine_SEEntity_container!==null){return(this.com_eqela_libspriteengine_SEEntity_container.add_layer(x,y,width,height,force_clipped));}if(this.com_eqela_libspriteengine_SEEntity_scene===null){return(null);}return(this.com_eqela_libspriteengine_SEEntity_scene.add_layer(x,y,width,height,force_clipped));};P.set_scene=function(v){this.com_eqela_libspriteengine_SEEntity_scene=v;return(this);};P.get_scene=function(){return(this.com_eqela_libspriteengine_SEEntity_scene);};P.set_mynode=function(v){this.com_eqela_libspriteengine_SEEntity_mynode=v;return(this);};P.get_mynode=function(){return(this.com_eqela_libspriteengine_SEEntity_mynode);};P.set_container=function(v){this.com_eqela_libspriteengine_SEEntity_container=v;return(this);};P.get_container=function(){return(this.com_eqela_libspriteengine_SEEntity_container);};com.eqela.libspriteengine.SEFaderAnimationElement=function(){com.eqela.libspriteengine.SEAnimationElement.call(this);this.com_eqela_libspriteengine_SEFaderAnimationElement_elements=null;this.com_eqela_libspriteengine_SEFaderAnimationElement_start_alpha=0.0;this.com_eqela_libspriteengine_SEFaderAnimationElement_target_alpha=0.0;{}};P=com.eqela.libspriteengine.SEFaderAnimationElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEAnimationElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEAnimationElement']=true;P._t['com.eqela.libspriteengine.SEFaderAnimationElement']=true;P.constructor=com.eqela.libspriteengine.SEFaderAnimationElement;com.eqela.libspriteengine.SEFaderAnimationElement.for_fadeout=function(s){return(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.initialize.call(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.set_target_alpha.call(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.set_start_alpha.call(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.add_fader_element.call(new com.eqela.libspriteengine.SEFaderAnimationElement(),s),1.0),0.0)));};com.eqela.libspriteengine.SEFaderAnimationElement.for_fadein=function(s){return(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.initialize.call(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.set_target_alpha.call(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.set_start_alpha.call(com.eqela.libspriteengine.SEFaderAnimationElement.prototype.add_fader_element.call(new com.eqela.libspriteengine.SEFaderAnimationElement(),s),0.0),1.0)));};P.add_fader_element=function(s){if(this.com_eqela_libspriteengine_SEFaderAnimationElement_elements===null){this.com_eqela_libspriteengine_SEFaderAnimationElement_elements=eq.api.LinkedList.create();}this.com_eqela_libspriteengine_SEFaderAnimationElement_elements.add(s);return(this);};P.initialize=function(){{var _t4=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEFaderAnimationElement_elements);if(_t4!==null){var _t5=null;for(_t5=_t4.next();_t5!==null;_t5=_t4.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t5,"com.eqela.libspriteengine.SEElement")){var element=_t5;{element.set_alpha(this.com_eqela_libspriteengine_SEFaderAnimationElement_start_alpha);}}}}}return(this);};P.on_animation_element_tick=function(f){var r=this.com_eqela_libspriteengine_SEFaderAnimationElement_start_alpha+((this.com_eqela_libspriteengine_SEFaderAnimationElement_target_alpha-this.com_eqela_libspriteengine_SEFaderAnimationElement_start_alpha)*f);{var _t6=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEFaderAnimationElement_elements);if(_t6!==null){var _t7=null;for(_t7=_t6.next();_t7!==null;_t7=_t6.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t7,"com.eqela.libspriteengine.SEElement")){var element=_t7;{element.set_alpha(r);}}}}}};P.set_start_alpha=function(v){this.com_eqela_libspriteengine_SEFaderAnimationElement_start_alpha=v;return(this);};P.get_start_alpha=function(){return(this.com_eqela_libspriteengine_SEFaderAnimationElement_start_alpha);};P.set_target_alpha=function(v){this.com_eqela_libspriteengine_SEFaderAnimationElement_target_alpha=v;return(this);};P.get_target_alpha=function(){return(this.com_eqela_libspriteengine_SEFaderAnimationElement_target_alpha);};com.eqela.libspriteengine.SEMovingSpriteEntity=function(){com.eqela.libspriteengine.SESpriteEntity.call(this);this.com_eqela_libspriteengine_SEMovingSpriteEntity_xspeed=0.0;this.com_eqela_libspriteengine_SEMovingSpriteEntity_yspeed=0.0;this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed=0;{}};P=com.eqela.libspriteengine.SEMovingSpriteEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SESpriteEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEMovingSpriteEntity']=true;P.constructor=com.eqela.libspriteengine.SEMovingSpriteEntity;P.randomize_speed=function(){com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_xspeed.call(this,(com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this)*((eq.api.Math.random(0-100,100)/1500.0))));com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_yspeed.call(this,(com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this)*((eq.api.Math.random(0-100,100)/1500.0))));com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_rotatespeed.call(this,eq.api.Math.random(1,3));};P.on_outside_x=function(){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.on_outside_y=function(){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.move_vector=function(x,y,f){this.move(this.get_x()+(x*f),this.get_y()+(y*f));};P.tick=function(now,delta){com.eqela.libspriteengine.SESpriteEntity.prototype.tick.call(this,now,delta);var xspeed=com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.get_xspeed.call(this);var yspeed=com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.get_yspeed.call(this);com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.move_vector.call(this,xspeed,yspeed,delta);this.set_rotation(this.get_rotation()+((this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed)*delta));if((this.get_x() < (0-this.get_width()))||(this.get_x() > com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this))){this.on_outside_x();return;}if((this.get_y() < 0)||(this.get_y() >= (com.eqela.libspriteengine.SEEntity.prototype.get_scene_height.call(this)-this.get_height()))){this.on_outside_y();return;}};P.set_xspeed=function(v){this.com_eqela_libspriteengine_SEMovingSpriteEntity_xspeed=v;return(this);};P.get_xspeed=function(){return(this.com_eqela_libspriteengine_SEMovingSpriteEntity_xspeed);};P.set_yspeed=function(v){this.com_eqela_libspriteengine_SEMovingSpriteEntity_yspeed=v;return(this);};P.get_yspeed=function(){return(this.com_eqela_libspriteengine_SEMovingSpriteEntity_yspeed);};P.set_rotatespeed=function(v){this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed=v;return(this);};P.get_rotatespeed=function(){return(this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed);};com.eqela.libspriteengine.SEFallingSpriteEntity=function(){com.eqela.libspriteengine.SEMovingSpriteEntity.call(this);this.com_eqela_libspriteengine_SEFallingSpriteEntity_acceleration=50;{}};P=com.eqela.libspriteengine.SEFallingSpriteEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEMovingSpriteEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEMovingSpriteEntity']=true;P._t['com.eqela.libspriteengine.SEFallingSpriteEntity']=true;P.constructor=com.eqela.libspriteengine.SEFallingSpriteEntity;P.tick=function(now,delta){com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_yspeed.call(this,com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.get_yspeed.call(this)+(((com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this)*this.com_eqela_libspriteengine_SEFallingSpriteEntity_acceleration)/2880.0)*delta));com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.tick.call(this,now,delta);};P.set_acceleration=function(v){this.com_eqela_libspriteengine_SEFallingSpriteEntity_acceleration=v;return(this);};P.get_acceleration=function(){return(this.com_eqela_libspriteengine_SEFallingSpriteEntity_acceleration);};com.eqela.libspriteengine.SEGenericBackend=function(){com.eqela.libspriteengine.SEBackend.call(this);this.com_eqela_libspriteengine_SEGenericBackend_gameloop=null;{}};P=com.eqela.libspriteengine.SEGenericBackend.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEBackend.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEBackend']=true;P._t['com.eqela.libspriteengine.SEGenericBackend']=true;P.constructor=com.eqela.libspriteengine.SEGenericBackend;com.eqela.libspriteengine.SEGenericBackend.MyElement=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEGenericBackend_MyElement_rsc=null;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface=null;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface_container=null;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_x=0.0;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_y=0.0;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_rotat=0.0;{}};P2=P;P=com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SEGenericBackend.MyElement']=true;P.constructor=com.eqela.libspriteengine.SEGenericBackend.MyElement;P.get_x=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_x);};P.get_y=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_y);};P.get_width=function(){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface===null){return(0.0);}return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.get_width());};P.get_height=function(){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface===null){return(0.0);}return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.get_height());};P.move=function(x,y){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface!==null){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.move(x,y);this.com_eqela_libspriteengine_SEGenericBackend_MyElement_x=x;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_y=y;}};P.set_scale=function(s){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface!==null){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.set_scale(s);}};P.set_alpha=function(f){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface!==null){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.set_alpha(f);}};P.set_rotation=function(a){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface!==null){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.set_rotation_angle(a);this.com_eqela_libspriteengine_SEGenericBackend_MyElement_rotat=a;}};P.get_scale=function(){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface===null){return(0.0);}return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.get_scale());};P.get_alpha=function(){if(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface===null){return(0.0);}return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface.get_alpha());};P.get_rotation=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_rotat);};P.remove_from_container=function(){if((this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface===null)||(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface_container===null)){return;}this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface_container.remove_surface(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface);this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface=null;this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface_container=null;};P.set_rsc=function(v){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_rsc=v;return(this);};P.get_rsc=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_rsc);};P.set_surface=function(v){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface=v;return(this);};P.get_surface=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface);};P.set_surface_container=function(v){this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface_container=v;return(this);};P.get_surface_container=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyElement_surface_container);};P=P2;P2=null;com.eqela.libspriteengine.SEGenericBackend.MyLayer=function(){com.eqela.libspriteengine.SEGenericBackend.MyElement.call(this);this.com_eqela_libspriteengine_SEGenericBackend_MyLayer_helper_surface=null;{}};P2=P;P=com.eqela.libspriteengine.SEGenericBackend.MyLayer.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SELayer']=true;P._t['com.eqela.libspriteengine.SEGenericBackend.MyElement']=true;P._t['com.eqela.libspriteengine.SEGenericBackend.MyLayer']=true;P.constructor=com.eqela.libspriteengine.SEGenericBackend.MyLayer;com.eqela.libspriteengine.SEGenericBackend.MyLayer.create=function(container,parent,rsc){if(container===null){return(null);}var opts=null;if(parent!==null){opts=com.eqela.libgui.SurfaceOptions.below(com.eqela.libspriteengine.SEGenericBackend.MyLayer.prototype.get_helper_surface.call(parent));}else {opts=com.eqela.libgui.SurfaceOptions.top();}com.eqela.libgui.SurfaceOptions.prototype.set_surface_type.call(opts,com.eqela.libgui.SurfaceOptions.com_eqela_libgui_SurfaceOptions_SURFACE_TYPE_CONTAINER);var surf=container.add_surface(opts);if(surf===null){return(null);}var helper_surface=container.add_surface(com.eqela.libgui.SurfaceOptions.inside(surf));if(helper_surface===null){container.remove_surface(surf);return(null);}var v=new com.eqela.libspriteengine.SEGenericBackend.MyLayer();com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.set_rsc.call(v,rsc);com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.set_surface.call(v,surf);com.eqela.libspriteengine.SEGenericBackend.MyLayer.prototype.set_helper_surface.call(v,helper_surface);com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.set_surface_container.call(v,container);return(v);};P.cleanup=function(){};P.add_sprite=function(){return(com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface_container.call(this),this,com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_rsc.call(this)));};P.add_sprite_for_image=function(image){var sprite=com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface_container.call(this),this,com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_rsc.call(this));if(sprite!==null){sprite.set_image(image);}return(sprite);};P.add_sprite_for_text=function(text,fontid){var sprite=com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface_container.call(this),this,com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_rsc.call(this));if(sprite!==null){sprite.set_text(text,fontid);}return(sprite);};P.add_sprite_for_color=function(color,width,height){var sprite=com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface_container.call(this),this,com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_rsc.call(this));if(sprite!==null){sprite.set_color(color,width,height);}return(sprite);};P.add_layer=function(x,y,width,height,force_clipped){var layer=com.eqela.libspriteengine.SEGenericBackend.MyLayer.create(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface_container.call(this),this,com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_rsc.call(this));if(layer!==null){layer.move(x,y);layer.resize(width,height);}return(layer);};P.resize=function(width,height){var surface=com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface.call(this);if(surface!==null){surface.resize(width,height);}};P.remove_from_container=function(){var surface_container=com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface_container.call(this);if((this.com_eqela_libspriteengine_SEGenericBackend_MyLayer_helper_surface!==null)&&(surface_container!==null)){surface_container.remove_surface(this.com_eqela_libspriteengine_SEGenericBackend_MyLayer_helper_surface);this.com_eqela_libspriteengine_SEGenericBackend_MyLayer_helper_surface=null;}com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.remove_from_container.call(this);};P.set_helper_surface=function(v){this.com_eqela_libspriteengine_SEGenericBackend_MyLayer_helper_surface=v;return(this);};P.get_helper_surface=function(){return(this.com_eqela_libspriteengine_SEGenericBackend_MyLayer_helper_surface);};P=P2;P2=null;com.eqela.libspriteengine.SEGenericBackend.MySprite=function(){com.eqela.libspriteengine.SEGenericBackend.MyElement.call(this);this.com_eqela_libspriteengine_SEGenericBackend_MySprite_image=null;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_resource=null;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_text=null;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_fontid=null;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color=null;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_width=0.0;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_height=0.0;{}};P2=P;P=com.eqela.libspriteengine.SEGenericBackend.MySprite.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libgui.Renderable']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEGenericBackend.MyElement']=true;P._t['com.eqela.libspriteengine.SEGenericBackend.MySprite']=true;P.constructor=com.eqela.libspriteengine.SEGenericBackend.MySprite;com.eqela.libspriteengine.SEGenericBackend.MySprite.create=function(container,parent,rsc){if(container===null){return(null);}var opts=null;if(parent!==null){opts=com.eqela.libgui.SurfaceOptions.below(com.eqela.libspriteengine.SEGenericBackend.MyLayer.prototype.get_helper_surface.call(parent));}else {opts=com.eqela.libgui.SurfaceOptions.top();}var surf=container.add_surface(opts);if(surf===null){return(null);}var v=new com.eqela.libspriteengine.SEGenericBackend.MySprite();com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.set_rsc.call(v,rsc);com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.set_surface.call(v,surf);com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.set_surface_container.call(v,container);return(v);};P.set_color=function(color,width,height){this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color=color;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_width=width;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_height=height;com.eqela.libspriteengine.SEGenericBackend.MySprite.prototype.update_sprite_surface.call(this);};P.set_image=function(img){var _t28=null;if(img!==null){this.com_eqela_libspriteengine_SEGenericBackend_MySprite_image=((function(l,r){return(l!=null&&l._t[r]===true);})((_t28=com.eqela.libspriteengine.SEImage.prototype.get_texture.call(img)),"com.eqela.libgui.Image")?_t28:null);if(this.com_eqela_libspriteengine_SEGenericBackend_MySprite_image===null){this.com_eqela_libspriteengine_SEGenericBackend_MySprite_image=com.eqela.libspriteengine.SEImage.prototype.get_image.call(img);}this.com_eqela_libspriteengine_SEGenericBackend_MySprite_resource=com.eqela.libspriteengine.SEImage.prototype.get_resource.call(img);}else {this.com_eqela_libspriteengine_SEGenericBackend_MySprite_image=null;this.com_eqela_libspriteengine_SEGenericBackend_MySprite_resource=null;}com.eqela.libspriteengine.SEGenericBackend.MySprite.prototype.update_sprite_surface.call(this);};P.set_text=function(text,fontid){this.com_eqela_libspriteengine_SEGenericBackend_MySprite_text=text;if(fontid!==null){this.com_eqela_libspriteengine_SEGenericBackend_MySprite_fontid=fontid;}com.eqela.libspriteengine.SEGenericBackend.MySprite.prototype.update_sprite_surface.call(this);};P.update_sprite_surface=function(){var _t29=null;var rsc=com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_rsc.call(this);if(rsc===null){return;}var img=this.com_eqela_libspriteengine_SEGenericBackend_MySprite_image;if(eq.api.StringStatic.is_empty(this.com_eqela_libspriteengine_SEGenericBackend_MySprite_resource)===false){img=((function(l,r){return(l!=null&&l._t[r]===true);})((_t29=com.eqela.libspriteengine.SEResourceCache.prototype.get_texture.call(rsc,this.com_eqela_libspriteengine_SEGenericBackend_MySprite_resource)),"com.eqela.libgui.Image")?_t29:null);}else {if(eq.api.StringStatic.is_empty(this.com_eqela_libspriteengine_SEGenericBackend_MySprite_text)===false){img=com.eqela.libspriteengine.SEResourceCache.prototype.create_image_for_text.call(rsc,this.com_eqela_libspriteengine_SEGenericBackend_MySprite_text,this.com_eqela_libspriteengine_SEGenericBackend_MySprite_fontid);}}var surface=com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface.call(this);if((surface!==null)&&((function(l,r){return(l!=null&&l._t[r]===true);})(surface,"com.eqela.libgui.Renderable"))){if(img===null){if(this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color!==null){surface.resize(this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_width,this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_height);surface.render(eq.api.LinkedList.create().add(com.eqela.libgui.FillColorOperation.prototype.set_shape.call(com.eqela.libgui.FillColorOperation.prototype.set_color.call(new com.eqela.libgui.FillColorOperation(),this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color),com.eqela.libgui.RectangleShape.create(0,0,this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_width,this.com_eqela_libspriteengine_SEGenericBackend_MySprite_color_height))));}else {surface.render(null);surface.resize(0,0);}}else {if((img.get_width()!==this.get_width())||(img.get_height()!==this.get_height())){surface.resize(img.get_width(),img.get_height());}surface.render(eq.api.LinkedList.create().add(com.eqela.libgui.DrawObjectOperation.prototype.set_object.call(new com.eqela.libgui.DrawObjectOperation(),img)));}}};P.render=function(ops){var surface=com.eqela.libspriteengine.SEGenericBackend.MyElement.prototype.get_surface.call(this);if((surface!==null)&&((function(l,r){return(l!=null&&l._t[r]===true);})(surface,"com.eqela.libgui.Renderable"))){surface.render(ops);}};P=P2;P2=null;com.eqela.libspriteengine.SEGenericBackend.instance=function(frame){var v=new com.eqela.libspriteengine.SEGenericBackend();com.eqela.libspriteengine.SEBackend.prototype.set_frame.call(v,frame);return(com.eqela.libspriteengine.SEGenericBackend.prototype.initialize.call(v));};P.initialize=function(){com.eqela.libspriteengine.SEBackend.prototype.update_resource_cache.call(this);return(this);};P.create_game_loop=function(){var sescene=com.eqela.libspriteengine.SEBackend.prototype.get_sescene.call(this);if(sescene===null){return(null);}return(com.eqela.libspriteengine.TimerGameLoop.for_scene(sescene,60));};P.start=function(scene){if(this.com_eqela_libspriteengine_SEGenericBackend_gameloop!==null){this.stop();}com.eqela.libspriteengine.SEBackend.prototype.start.call(this,scene);this.com_eqela_libspriteengine_SEGenericBackend_gameloop=this.create_game_loop();};P.stop=function(){if(this.com_eqela_libspriteengine_SEGenericBackend_gameloop!==null){this.com_eqela_libspriteengine_SEGenericBackend_gameloop.stop();this.com_eqela_libspriteengine_SEGenericBackend_gameloop=null;}com.eqela.libspriteengine.SEBackend.prototype.stop.call(this);};P.cleanup=function(){this.stop();com.eqela.libspriteengine.SEBackend.prototype.cleanup.call(this);};P.add_sprite=function(){return(com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this),null,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this)));};P.add_sprite_for_image=function(image){var sprite=com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this),null,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));if(sprite!==null){sprite.set_image(image);}return(sprite);};P.add_sprite_for_text=function(text,fontid){var sprite=com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this),null,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));if(sprite!==null){sprite.set_text(text,fontid);}return(sprite);};P.add_sprite_for_color=function(color,width,height){var sprite=com.eqela.libspriteengine.SEGenericBackend.MySprite.create(com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this),null,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));if(sprite!==null){sprite.set_color(color,width,height);}return(sprite);};P.add_layer=function(x,y,width,height,force_clipped){var layer=com.eqela.libspriteengine.SEGenericBackend.MyLayer.create(com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this),null,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));if(layer!==null){layer.move(x,y);layer.resize(width,height);}return(layer);};com.eqela.libspriteengine.SEResourceCache=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEResourceCache_frame=null;this.com_eqela_libspriteengine_SEResourceCache_dpi=96;this.com_eqela_libspriteengine_SEResourceCache_images=null;this.com_eqela_libspriteengine_SEResourceCache_fonts=null;this.com_eqela_libspriteengine_SEResourceCache_sheets=null;{}};P=com.eqela.libspriteengine.SEResourceCache.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEResourceCache']=true;P.constructor=com.eqela.libspriteengine.SEResourceCache;com.eqela.libspriteengine.SEResourceCache.for_frame=function(frame){return(com.eqela.libspriteengine.SEResourceCache.prototype.set_frame.call(new com.eqela.libspriteengine.SEResourceCache(),frame));};P.release_texture=function(o){if(o===null){return;}if((function(l,r){return(l!=null&&l._t[r]===true);})(o,"com.eqela.libgui.Image")){o.release();}};P.cleanup=function(){eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEResourceCache: Cleaning up cached resources .."),null);if(this.com_eqela_libspriteengine_SEResourceCache_images!==null){{var _t8=eq.api.IteratorStatic.for_object(eq.api.HashTable.prototype.iterate_values.call(this.com_eqela_libspriteengine_SEResourceCache_images));if(_t8!==null){var _t9=null;for(_t9=_t8.next();_t9!==null;_t9=_t8.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t9,"eq.api.Object")){var img=_t9;{this.release_texture(img);}}}}}this.com_eqela_libspriteengine_SEResourceCache_images=null;}this.com_eqela_libspriteengine_SEResourceCache_fonts=null;if(this.com_eqela_libspriteengine_SEResourceCache_sheets!==null){{var _t10=eq.api.IteratorStatic.for_object(eq.api.HashTable.prototype.iterate_values.call(this.com_eqela_libspriteengine_SEResourceCache_sheets));if(_t10!==null){var _t11=null;for(_t11=_t10.next();_t11!==null;_t11=_t10.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t11,"eq.api.Collection")){var sheet=_t11;{{var _t12=eq.api.IteratorStatic.for_object(sheet);if(_t12!==null){var _t13=null;for(_t13=_t12.next();_t13!==null;_t13=_t12.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t13,"eq.api.Object")){var o=_t13;{this.release_texture(o);}}}}}}}}}}this.com_eqela_libspriteengine_SEResourceCache_sheets=null;}};P.get_frame=function(){return(this.com_eqela_libspriteengine_SEResourceCache_frame);};P.set_frame=function(frame){this.com_eqela_libspriteengine_SEResourceCache_frame=frame;if(frame!==null){com.eqela.libspriteengine.SEResourceCache.prototype.set_dpi.call(this,frame.get_dpi());}else {com.eqela.libspriteengine.SEResourceCache.prototype.set_dpi.call(this,96);}return(this);};P.on_font_prepared=function(id){};P.prepare_font=function(id,details,height){if(eq.api.StringStatic.is_empty(id)){return(false);}var font=com.eqela.libgui.Font.instance(details);if(font===null){return(false);}if(height > 0){var sz=eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_integer(~~(eq.api.Math.rint(height)))).to_string();com.eqela.libgui.Font.prototype.set_size.call(font,sz);}if(this.com_eqela_libspriteengine_SEResourceCache_fonts===null){this.com_eqela_libspriteengine_SEResourceCache_fonts=eq.api.HashTable.create();}eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEResourceCache: Prepared font `%s': `%s' / %f").printf().add(id).add(details).add(eq.api.Primitive.for_double(height)),null);eq.api.HashTable.prototype.set.call(this.com_eqela_libspriteengine_SEResourceCache_fonts,id,font);this.on_font_prepared(id);return(true);};P.get_font=function(id){var _t33=null;var v=null;if(this.com_eqela_libspriteengine_SEResourceCache_fonts!==null){v=((function(l,r){return(l!=null&&l._t[r]===true);})((_t33=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_fonts,id)),"com.eqela.libgui.Font")?_t33:null);}if(v===null){v=com.eqela.libgui.Font.instance(eq.api.StringStatic.for_strptr("4mm"));}return(v);};P.image_to_texture=function(img){return(img);};P.create_image_for_text=function(text,fontid){var img=com.eqela.libgui.TextImage.for_properties(com.eqela.libgui.TextProperties.prototype.set_font.call(com.eqela.libgui.TextProperties.for_string(text),com.eqela.libspriteengine.SEResourceCache.prototype.get_font.call(this,fontid)),com.eqela.libspriteengine.SEResourceCache.prototype.get_frame.call(this),com.eqela.libspriteengine.SEResourceCache.prototype.get_dpi.call(this));return(img);};P.create_texture_for_text=function(text,fontid){return(this.image_to_texture(com.eqela.libspriteengine.SEResourceCache.prototype.create_image_for_text.call(this,text,fontid)));};P.get_image_sheet=function(id){var _t34=null;if(this.com_eqela_libspriteengine_SEResourceCache_sheets===null){return(null);}return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t34=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_sheets,id)),"eq.api.Array")?_t34:null));};P.prepare_image_sheet=function(id,resid,cols,rows,max,width,height){var _t36=null;var _t35=null;if(id===null){return(false);}if(this.com_eqela_libspriteengine_SEResourceCache_sheets!==null){var v=((function(l,r){return(l!=null&&l._t[r]===true);})((_t35=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_sheets,id)),"eq.api.Array")?_t35:null);if(v!==null){return(true);}}var ars=resid;if(ars===null){ars=id;}var img=null;img=com.eqela.libgui.IconCache.get(ars,-1,-1,false);if(img===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to read image resource: `%s'").printf().add(ars),null);return(false);}var imgs=com.eqela.libimage.ImageSheet.prototype.to_images.call(com.eqela.libimage.ImageSheet.prototype.set_max_images.call(com.eqela.libimage.ImageSheet.prototype.set_rows.call(com.eqela.libimage.ImageSheet.prototype.set_cols.call(com.eqela.libimage.ImageSheet.prototype.set_sheet.call(new com.eqela.libimage.ImageSheet(),img),cols),rows),max),~~(width),~~(height));if(imgs===null){return(false);}if(this.com_eqela_libspriteengine_SEResourceCache_sheets===null){this.com_eqela_libspriteengine_SEResourceCache_sheets=eq.api.HashTable.create();}var nimgs=eq.api.ArrayStatic.create(imgs.count());var n=0;for(n=0;n < imgs.count();n++){nimgs.set(n,this.image_to_texture(((function(l,r){return(l!=null&&l._t[r]===true);})((_t36=imgs.get(n)),"com.eqela.libgui.Image")?_t36:null)));}eq.api.HashTable.prototype.set.call(this.com_eqela_libspriteengine_SEResourceCache_sheets,id,nimgs);return(true);};P.prepare_image=function(id,resid,width,height){if(this.com_eqela_libspriteengine_SEResourceCache_images===null){this.com_eqela_libspriteengine_SEResourceCache_images=eq.api.HashTable.create();}var oo=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_images,id);if(oo!==null){return(true);}var ars=resid;if(ars===null){ars=id;}var img=null;img=com.eqela.libgui.IconCache.get(ars,-1,-1,false);if(img===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to read image resource: `%s'").printf().add(ars),null);return(false);}if((width > 0.0)||(height > 0.0)){var nw=width;var nh=height;if(nw===0){nw=img.get_width();}if(nh===0){nh=img.get_height();}if(((nw > 0)&&((~~(nw))!==img.get_width()))||((nh > 0)&&((~~(nh))!==img.get_height()))){img=img.resize(~~(nw),~~(nh));}if(img===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to scale image `%s' as %f x %f").printf().add(ars).add(eq.api.Primitive.for_double(nw)).add(eq.api.Primitive.for_double(nh)),null);return(false);}}var txt=this.image_to_texture(img);if(txt===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Preparing image `%s': Failed to convert image to texture").printf().add(id),null);return(false);}eq.api.HashTable.prototype.set.call(this.com_eqela_libspriteengine_SEResourceCache_images,id,txt);eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEResourceCache: Prepared image `%s' (%dx%dpx)").printf().add(id).add(eq.api.Primitive.for_double(img.get_width())).add(eq.api.Primitive.for_double(img.get_height())),null);return(true);};P.get_texture=function(id){if(this.com_eqela_libspriteengine_SEResourceCache_images!==null){var v=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_images,id);if(v!==null){return(v);}}return(null);};P.set_dpi=function(v){this.com_eqela_libspriteengine_SEResourceCache_dpi=v;return(this);};P.get_dpi=function(){return(this.com_eqela_libspriteengine_SEResourceCache_dpi);};com.eqela.libspriteengine.SEHTMLElementBackend=function(){com.eqela.libspriteengine.SEBackend.call(this);this.com_eqela_libspriteengine_SEHTMLElementBackend_debug=false;{}};P=com.eqela.libspriteengine.SEHTMLElementBackend.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEBackend.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEBackend']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend']=true;P.constructor=com.eqela.libspriteengine.SEHTMLElementBackend;com.eqela.libspriteengine.SEHTMLElementBackend.MyResourceCache=function(){com.eqela.libspriteengine.SEResourceCache.call(this);this.com_eqela_libspriteengine_SEHTMLElementBackend_MyResourceCache_custom_font_table=null;{}};P2=P;P=com.eqela.libspriteengine.SEHTMLElementBackend.MyResourceCache.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEResourceCache.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEResourceCache']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend.MyResourceCache']=true;P.constructor=com.eqela.libspriteengine.SEHTMLElementBackend.MyResourceCache;P.image_to_texture=function(img){return(img);};P.on_font_prepared=function(id){var font=com.eqela.libspriteengine.SEResourceCache.prototype.get_font.call(this,id);var _name=com.eqela.libgui.Font.prototype.get_name.call(font);com.eqela.libhtml5gui.HTML5FontFaceManager.add_font(com.eqela.libspriteengine.SEResourceCache.prototype.get_frame.call(this),_name);};P=P2;P2=null;com.eqela.libspriteengine.SEHTMLElementBackend.MyElement=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_x=0.0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_y=0.0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_width=0.0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_height=0.0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_rotation=0.0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_alpha=1.0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element=null;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_parent=null;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_rsc=null;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_document=null;{}};P2=P;P=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend.MyElement']=true;P.constructor=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement;P.set_x=function(x){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_x=x;};P.set_y=function(y){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_y=y;};P.set_width=function(width){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_width=width;};P.set_height=function(height){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_height=height;};P.set_parent=function(pp){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_parent=pp;};P.get_parent=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_parent);};P.move=function(x,y){if(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element!==null){var ee=this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element;var ix=~~(x);var iy=~~(y);ee.style.left = ix;ee.style.top = iy;}this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_x=x;this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_y=y;};P.set_rotation=function(a){var ee=this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element;if(ee!==null){var ang=(a*180.0)/eq.api.MathConstant.eq_api_MathConstant_M_PI;var str=eq.api.StringStatic.for_strptr("rotate(%ddeg)").printf().add(eq.api.Primitive.for_double(ang)).to_string();var sp=str.to_strptr();ee.style.transform = sp;ee.style.webkitTransform = sp;ee.style.msTransform = sp;ee.style.oTransform = sp;ee.style.mozTransform = sp;}this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_rotation=a;};P.set_alpha=function(alpha){var ee=this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element;if(ee!==null){ee.style.opacity = alpha;}this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_alpha=alpha;};P.get_x=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_x);};P.get_y=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_y);};P.get_width=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_width);};P.get_height=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_height);};P.get_rotation=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_rotation);};P.get_alpha=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_alpha);};P.remove_from_container=function(){if(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element===null){return;}var ee=this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element;ee.parentNode.removeChild(ee);this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element=null;};P.set_element=function(v){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element=v;return(this);};P.get_element=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_element);};P.set_rsc=function(v){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_rsc=v;return(this);};P.get_rsc=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_rsc);};P.set_document=function(v){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_document=v;return(this);};P.get_document=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyElement_document);};P=P2;P2=null;com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer=function(){com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.call(this);this.com_eqela_libspriteengine_SEHTMLElementBackend_MyLayer_force_clipping=false;{}};P2=P;P=com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SELayer']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend.MyElement']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer']=true;P.constructor=com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer;P.resize=function(width,height){var el=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this);if(el===null){return;}var iw=~~(width);var ih=~~(height);el.style.width = iw;el.style.height = ih;com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_width.call(this,iw);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_height.call(this,ih);};P.initialize=function(){var el=null;var pp=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_parent.call(this);var mydoc=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this);var force_clipping=this.com_eqela_libspriteengine_SEHTMLElementBackend_MyLayer_force_clipping;el = mydoc.createElement("div");el.style.position = "absolute";if(force_clipping) {el.style.overflow = "hidden";}pp.appendChild(el);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_element.call(this,el);};P.cleanup=function(){this.remove_from_container();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_element.call(this,null);};P.add_sprite=function(){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this));return(v);};P.add_sprite_for_image=function(image){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this));v.set_image(image);return(v);};P.add_sprite_for_text=function(text,fontid){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this));v.set_text(text,fontid);return(v);};P.add_sprite_for_color=function(color,width,height){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this));v.set_color(color,width,height);return(v);};P.add_layer=function(x,y,width,height,force_clipped){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer();com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer.prototype.set_force_clipping.call(v,force_clipped);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer.prototype.initialize.call(v);v.resize(width,height);v.move(x,y);return(v);};P.set_force_clipping=function(v){this.com_eqela_libspriteengine_SEHTMLElementBackend_MyLayer_force_clipping=v;return(this);};P.get_force_clipping=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MyLayer_force_clipping);};P=P2;P2=null;com.eqela.libspriteengine.SEHTMLElementBackend.MySprite=function(){com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.call(this);this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type=0;this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_last_font=null;{}};P2=P;P=com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend.MyElement']=true;P._t['com.eqela.libspriteengine.SEHTMLElementBackend.MySprite']=true;P.constructor=com.eqela.libspriteengine.SEHTMLElementBackend.MySprite;P.on_created=function(){this.move(this.get_x(),this.get_y());this.set_rotation(this.get_rotation());this.set_alpha(this.get_alpha());};P.set_image=function(image){var _t30=null;if(image===null){this.remove_from_container();return;}var txt=((function(l,r){return(l!=null&&l._t[r]===true);})((_t30=com.eqela.libspriteengine.SEImage.prototype.as_texture.call(image,com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this))),"com.eqela.libgui.Image")?_t30:null);if(txt===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to get texture when setting the image of a sprite"),null);return;}var element=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this);if((element!==null)&&(this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type!==0)){this.remove_from_container();}if(element===null){var pp=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_parent.call(this);var mydoc=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this);element = mydoc.createElement("img");element.style.position = "absolute";element.style.MozUserSelect = "none";element.style.mozUserSelect = "none";element.style.webkitUserSelect = "none";element.style.oUserSelect = "none";element.style.userSelect = "none";element.setAttribute("unselectable", "on");pp.appendChild(element);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_element.call(this,element);this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type=0;}var imgurl=null;if((function(l,r){return(l!=null&&l._t[r]===true);})(txt,"com.eqela.libhtml5canvas.HTML5RenderableImage")){var canvas=com.eqela.libhtml5canvas.HTML5RenderableImage.prototype.get_element.call(txt);var urlptr="";urlptr = canvas.toDataURL();imgurl=eq.api.StringStatic.for_strptr(urlptr);}else {if((function(l,r){return(l!=null&&l._t[r]===true);})(txt,"com.eqela.libhtml5canvas.HTML5Image")){imgurl=txt.get_url();}}if(eq.api.StringStatic.is_empty(imgurl)){eq.api.Log.error(eq.api.StringStatic.for_strptr("No URL for texture"),null);return;}var width=txt.get_width();var height=txt.get_height();element.setAttribute("src", imgurl.to_strptr());element.setAttribute("width", "" + width);element.setAttribute("height" , "" + height);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_width.call(this,width);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_height.call(this,height);com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.on_created.call(this);};P.get_font_name=function(font){if(font===null){return(eq.api.StringStatic.for_strptr("Arial"));}var n=com.eqela.libgui.Font.prototype.get_name.call(font);if(eq.api.StringStatic.is_empty(n)){n=eq.api.StringStatic.for_strptr("Arial");}else {if(eq.api.StringStatic.for_strptr("Sans").equals(n)){n=eq.api.StringStatic.for_strptr("Arial");}}if(n.has_suffix(eq.api.StringStatic.for_strptr(".ttf"))||n.has_suffix(eq.api.StringStatic.for_strptr(".otf"))){n=n.substring(0,n.get_length()-4).replace_char('_'.charCodeAt(0),' '.charCodeAt(0));}return(n);};P.set_text=function(text,fontid){var rsc=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_rsc.call(this);if(eq.api.StringStatic.is_empty(text)||(rsc===null)){this.remove_from_container();return;}var fid=fontid;if(fid===null){fid=this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_last_font;}else {this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_last_font=fid;}var ff=com.eqela.libspriteengine.SEResourceCache.prototype.get_font.call(rsc,fid);if(ff===null){this.remove_from_container();return;}var element=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this);if((element!==null)&&(this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type!==1)){this.remove_from_container();}if(element===null){var pp=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_parent.call(this);var mydoc=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this);element = mydoc.createElement("div");element.style.position = "absolute";element.style.MozUserSelect = "none";element.style.mozUserSelect = "none";element.style.webkitUserSelect = "none";element.style.oUserSelect = "none";element.style.userSelect = "none";element.setAttribute("unselectable", "on");pp.appendChild(element);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_element.call(this,element);this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type=1;}var width=0;var height=0;var fn=com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.get_font_name.call(this,ff);var sb=eq.api.StringBufferStatic.create(null);if(com.eqela.libgui.Font.prototype.is_bold.call(ff)){sb.append(eq.api.StringStatic.for_strptr("bold"));}if(com.eqela.libgui.Font.prototype.is_italic.call(ff)){if(sb.count() > 0){sb.append_c(' '.charCodeAt(0));}sb.append(eq.api.StringStatic.for_strptr("italic"));}if(sb.count() < 1){sb.append(eq.api.StringStatic.for_strptr("normal"));}var fstyle=sb.to_string();var sz=com.eqela.libgui.Font.prototype.get_size.call(ff);if(sz===null){sz=eq.api.StringStatic.for_strptr("");}var cc=com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.to_js_rgba_string.call(this,com.eqela.libgui.Font.prototype.get_color.call(ff));element.innerHTML = text.to_strptr();element.style.fontFamily = fn.to_strptr();element.style.fontSize = sz.to_strptr();element.style.fontStyle = fstyle.to_strptr();element.style.color = cc.to_strptr();width = element.offsetWidth;height = element.offsetHeight;com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_width.call(this,width);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_height.call(this,height);com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.on_created.call(this);};P.to_js_rgba_string=function(c){if(c===null){return(eq.api.StringStatic.for_strptr(""));}var v=eq.api.StringStatic.for_strptr("rgba(%d,%d,%d,%f)").printf().add(eq.api.Primitive.for_integer(~~((com.eqela.libgui.Color.prototype.get_r.call(c)*255)))).add(eq.api.Primitive.for_integer(~~((com.eqela.libgui.Color.prototype.get_g.call(c)*255)))).add(eq.api.Primitive.for_integer(~~((com.eqela.libgui.Color.prototype.get_b.call(c)*255)))).add(eq.api.Primitive.for_double(com.eqela.libgui.Color.prototype.get_a.call(c))).to_string();return(v);};P.set_color=function(color,width,height){if(((color===null)||(width <= 1))||(height <= 1)){this.remove_from_container();return;}var element=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_element.call(this);var element_type=com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.get_element_type.call(this);if((element!==null)&&(element_type!==2)){this.remove_from_container();}if(element===null){var pp=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_parent.call(this);var mydoc=com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.get_document.call(this);element = mydoc.createElement("div");element.style.position = "absolute";element.style.MozUserSelect = "none";element.style.mozUserSelect = "none";element.style.webkitUserSelect = "none";element.style.oUserSelect = "none";element.style.userSelect = "none";element.setAttribute("unselectable", "on");pp.appendChild(element);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_element.call(this,element);element_type=2;}var str=com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.to_js_rgba_string.call(this,color);element.style.width = "" + width;element.style.height = "" + height;element.style.backgroundColor = str.to_strptr();element.style.position = "absolute";com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_width.call(this,width);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_height.call(this,height);com.eqela.libspriteengine.SEHTMLElementBackend.MySprite.prototype.on_created.call(this);};P.set_element_type=function(v){this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type=v;return(this);};P.get_element_type=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_MySprite_element_type);};P=P2;P2=null;com.eqela.libspriteengine.SEHTMLElementBackend.instance=function(fr,debug){var v=new com.eqela.libspriteengine.SEHTMLElementBackend();if(debug){com.eqela.libspriteengine.SEHTMLElementBackend.prototype.set_debug.call(v,debug);}com.eqela.libspriteengine.SEBackend.prototype.set_frame.call(v,fr);return(com.eqela.libspriteengine.SEHTMLElementBackend.prototype.initialize.call(v));};P.initialize=function(){com.eqela.libspriteengine.SEBackend.prototype.update_resource_cache.call(this);return(this);};P.get_document=function(){var _t31=null;var v=null;var ff=((function(l,r){return(l!=null&&l._t[r]===true);})((_t31=com.eqela.libspriteengine.SEBackend.prototype.get_frame.call(this)),"com.eqela.libhtml5gui.HTML5Frame")?_t31:null);if(ff!==null){v=com.eqela.libhtml5gui.HTML5Frame.prototype.get_document.call(ff);}if(v===null){v = document;}return(v);};P.get_document_body=function(){var doc=com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document.call(this);var v=null;v = doc.body;return(v);};P.start=function(scene){com.eqela.libspriteengine.SEBackend.prototype.start.call(this,scene);var self=this;var mainloop = function() {self.on_update();};var animframe = window.requestAnimationFrame ||window.webkitRequestAnimationFrame ||window.mozRequestAnimationFrame ||window.oRequestAnimationFrame ||window.msRequestAnimationFrame ||null;if(animframe != null) {var rr = function() {mainloop();animframe(rr);};animframe(rr);}else {setInterval(mainloop, 1000.0 / 60.0);}};P.on_update=function(){var se=com.eqela.libspriteengine.SEBackend.prototype.get_sescene.call(this);if(se!==null){com.eqela.libspriteengine.SEScene.prototype.tick.call(se);}};P.stop=function(){com.eqela.libspriteengine.SEBackend.prototype.stop.call(this);};P.cleanup=function(){com.eqela.libspriteengine.SEBackend.prototype.cleanup.call(this);};P.add_sprite=function(){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document_body.call(this));return(v);};P.add_sprite_for_image=function(image){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document_body.call(this));v.set_image(image);return(v);};P.add_sprite_for_text=function(text,fontid){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document_body.call(this));v.set_text(text,fontid);return(v);};P.add_sprite_for_color=function(color,width,height){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MySprite();com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document_body.call(this));v.set_color(color,width,height);return(v);};P.add_layer=function(x,y,width,height,force_clipped){var v=new com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer();com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer.prototype.set_force_clipping.call(v,force_clipped);com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_rsc.call(v,com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_document.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyElement.prototype.set_parent.call(v,com.eqela.libspriteengine.SEHTMLElementBackend.prototype.get_document_body.call(this));com.eqela.libspriteengine.SEHTMLElementBackend.MyLayer.prototype.initialize.call(v);v.resize(width,height);v.move(x,y);return(v);};P.set_debug=function(v){this.com_eqela_libspriteengine_SEHTMLElementBackend_debug=v;return(this);};P.get_debug=function(){return(this.com_eqela_libspriteengine_SEHTMLElementBackend_debug);};com.eqela.libspriteengine.SEImage=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEImage_resource=null;this.com_eqela_libspriteengine_SEImage_image=null;this.com_eqela_libspriteengine_SEImage_texture=null;{}};P=com.eqela.libspriteengine.SEImage.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEImage']=true;P.constructor=com.eqela.libspriteengine.SEImage;com.eqela.libspriteengine.SEImage.for_resource=function(id){return(com.eqela.libspriteengine.SEImage.prototype.set_resource.call(new com.eqela.libspriteengine.SEImage(),id));};com.eqela.libspriteengine.SEImage.for_image=function(image){return(com.eqela.libspriteengine.SEImage.prototype.set_image.call(new com.eqela.libspriteengine.SEImage(),image));};com.eqela.libspriteengine.SEImage.for_texture=function(txt){return(com.eqela.libspriteengine.SEImage.prototype.set_texture.call(new com.eqela.libspriteengine.SEImage(),txt));};P.as_texture=function(rsc){var txt=com.eqela.libspriteengine.SEImage.prototype.get_texture.call(this);if((txt===null)&&(rsc!==null)){var img=com.eqela.libspriteengine.SEImage.prototype.get_image.call(this);if(img!==null){txt=rsc.image_to_texture(img);}if(txt===null){txt=com.eqela.libspriteengine.SEResourceCache.prototype.get_texture.call(rsc,com.eqela.libspriteengine.SEImage.prototype.get_resource.call(this));}}return(txt);};P.set_resource=function(v){this.com_eqela_libspriteengine_SEImage_resource=v;return(this);};P.get_resource=function(){return(this.com_eqela_libspriteengine_SEImage_resource);};P.set_image=function(v){this.com_eqela_libspriteengine_SEImage_image=v;return(this);};P.get_image=function(){return(this.com_eqela_libspriteengine_SEImage_image);};P.set_texture=function(v){this.com_eqela_libspriteengine_SEImage_texture=v;return(this);};P.get_texture=function(){return(this.com_eqela_libspriteengine_SEImage_texture);};com.eqela.libspriteengine.SEMoverAnimationElement=function(){com.eqela.libspriteengine.SEAnimationElement.call(this);this.com_eqela_libspriteengine_SEMoverAnimationElement_element=null;this.com_eqela_libspriteengine_SEMoverAnimationElement_fadeout=false;this.com_eqela_libspriteengine_SEMoverAnimationElement_fadein=false;this.com_eqela_libspriteengine_SEMoverAnimationElement_start=null;this.com_eqela_libspriteengine_SEMoverAnimationElement_end=null;{}};P=com.eqela.libspriteengine.SEMoverAnimationElement.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEAnimationElement.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEAnimationElement']=true;P._t['com.eqela.libspriteengine.SEMoverAnimationElement']=true;P.constructor=com.eqela.libspriteengine.SEMoverAnimationElement;com.eqela.libspriteengine.SEMoverAnimationElement.for_element=function(element,sx,sy,ex,ey,factor,fadeout,fadein){var v=com.eqela.libspriteengine.SEMoverAnimationElement.prototype.set_end.call(com.eqela.libspriteengine.SEMoverAnimationElement.prototype.set_start.call(com.eqela.libspriteengine.SEMoverAnimationElement.prototype.set_element.call(new com.eqela.libspriteengine.SEMoverAnimationElement(),element),sx,sy),ex,ey);com.eqela.libspriteengine.SEAnimationElement.prototype.set_factor.call(v,factor);com.eqela.libspriteengine.SEMoverAnimationElement.prototype.set_fadeout.call(v,fadeout);com.eqela.libspriteengine.SEMoverAnimationElement.prototype.set_fadein.call(v,fadein);return(com.eqela.libspriteengine.SEMoverAnimationElement.prototype.initialize.call(v));};com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEMoverAnimationElement_MyPoint_x=0.0;this.com_eqela_libspriteengine_SEMoverAnimationElement_MyPoint_y=0.0;{}};P2=P;P=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint']=true;P.constructor=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint;P.set_x=function(v){this.com_eqela_libspriteengine_SEMoverAnimationElement_MyPoint_x=v;return(this);};P.get_x=function(){return(this.com_eqela_libspriteengine_SEMoverAnimationElement_MyPoint_x);};P.set_y=function(v){this.com_eqela_libspriteengine_SEMoverAnimationElement_MyPoint_y=v;return(this);};P.get_y=function(){return(this.com_eqela_libspriteengine_SEMoverAnimationElement_MyPoint_y);};P=P2;P2=null;P.set_start=function(x,y){this.com_eqela_libspriteengine_SEMoverAnimationElement_start=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_y.call(com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_x.call(new com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint(),x),y);return(this);};P.set_end=function(x,y){this.com_eqela_libspriteengine_SEMoverAnimationElement_end=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_y.call(com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_x.call(new com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint(),x),y);return(this);};P.initialize=function(){if(this.com_eqela_libspriteengine_SEMoverAnimationElement_element!==null){if(this.com_eqela_libspriteengine_SEMoverAnimationElement_fadeout){this.com_eqela_libspriteengine_SEMoverAnimationElement_element.set_alpha(1.0);}if(this.com_eqela_libspriteengine_SEMoverAnimationElement_fadein){this.com_eqela_libspriteengine_SEMoverAnimationElement_element.set_alpha(0.0);}if(this.com_eqela_libspriteengine_SEMoverAnimationElement_start!==null){this.com_eqela_libspriteengine_SEMoverAnimationElement_element.move(com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_x.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_start),com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_y.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_start));}}return(this);};P.on_first_tick=function(){if(this.com_eqela_libspriteengine_SEMoverAnimationElement_element===null){return;}if(this.com_eqela_libspriteengine_SEMoverAnimationElement_start===null){this.com_eqela_libspriteengine_SEMoverAnimationElement_start=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_y.call(com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_x.call(new com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint(),this.com_eqela_libspriteengine_SEMoverAnimationElement_element.get_x()),this.com_eqela_libspriteengine_SEMoverAnimationElement_element.get_y());}if(this.com_eqela_libspriteengine_SEMoverAnimationElement_end===null){this.com_eqela_libspriteengine_SEMoverAnimationElement_end=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_y.call(com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.set_x.call(new com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint(),this.com_eqela_libspriteengine_SEMoverAnimationElement_element.get_x()),this.com_eqela_libspriteengine_SEMoverAnimationElement_element.get_y());}};P.on_animation_element_tick=function(f){var x=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_x.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_start)+((com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_x.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_end)-com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_x.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_start))*f);var y=com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_y.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_start)+((com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_y.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_end)-com.eqela.libspriteengine.SEMoverAnimationElement.MyPoint.prototype.get_y.call(this.com_eqela_libspriteengine_SEMoverAnimationElement_start))*f);if(this.com_eqela_libspriteengine_SEMoverAnimationElement_fadeout){this.com_eqela_libspriteengine_SEMoverAnimationElement_element.set_alpha(1.0-f);}if(this.com_eqela_libspriteengine_SEMoverAnimationElement_fadein){this.com_eqela_libspriteengine_SEMoverAnimationElement_element.set_alpha(f);}this.com_eqela_libspriteengine_SEMoverAnimationElement_element.move(x,y);};P.set_element=function(v){this.com_eqela_libspriteengine_SEMoverAnimationElement_element=v;return(this);};P.get_element=function(){return(this.com_eqela_libspriteengine_SEMoverAnimationElement_element);};P.set_fadeout=function(v){this.com_eqela_libspriteengine_SEMoverAnimationElement_fadeout=v;return(this);};P.get_fadeout=function(){return(this.com_eqela_libspriteengine_SEMoverAnimationElement_fadeout);};P.set_fadein=function(v){this.com_eqela_libspriteengine_SEMoverAnimationElement_fadein=v;return(this);};P.get_fadein=function(){return(this.com_eqela_libspriteengine_SEMoverAnimationElement_fadein);};com.eqela.libspriteengine.SEMovingSpriteEntity=function(){com.eqela.libspriteengine.SESpriteEntity.call(this);this.com_eqela_libspriteengine_SEMovingSpriteEntity_xspeed=0.0;this.com_eqela_libspriteengine_SEMovingSpriteEntity_yspeed=0.0;this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed=0;{}};P=com.eqela.libspriteengine.SEMovingSpriteEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SESpriteEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P._t['com.eqela.libspriteengine.SEMovingSpriteEntity']=true;P.constructor=com.eqela.libspriteengine.SEMovingSpriteEntity;P.randomize_speed=function(){com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_xspeed.call(this,(com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this)*((eq.api.Math.random(0-100,100)/1500.0))));com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_yspeed.call(this,(com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this)*((eq.api.Math.random(0-100,100)/1500.0))));com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.set_rotatespeed.call(this,eq.api.Math.random(1,3));};P.on_outside_x=function(){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.on_outside_y=function(){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.move_vector=function(x,y,f){this.move(this.get_x()+(x*f),this.get_y()+(y*f));};P.tick=function(now,delta){com.eqela.libspriteengine.SESpriteEntity.prototype.tick.call(this,now,delta);var xspeed=com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.get_xspeed.call(this);var yspeed=com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.get_yspeed.call(this);com.eqela.libspriteengine.SEMovingSpriteEntity.prototype.move_vector.call(this,xspeed,yspeed,delta);this.set_rotation(this.get_rotation()+((this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed)*delta));if((this.get_x() < (0-this.get_width()))||(this.get_x() > com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this))){this.on_outside_x();return;}if((this.get_y() < 0)||(this.get_y() >= (com.eqela.libspriteengine.SEEntity.prototype.get_scene_height.call(this)-this.get_height()))){this.on_outside_y();return;}};P.set_xspeed=function(v){this.com_eqela_libspriteengine_SEMovingSpriteEntity_xspeed=v;return(this);};P.get_xspeed=function(){return(this.com_eqela_libspriteengine_SEMovingSpriteEntity_xspeed);};P.set_yspeed=function(v){this.com_eqela_libspriteengine_SEMovingSpriteEntity_yspeed=v;return(this);};P.get_yspeed=function(){return(this.com_eqela_libspriteengine_SEMovingSpriteEntity_yspeed);};P.set_rotatespeed=function(v){this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed=v;return(this);};P.get_rotatespeed=function(){return(this.com_eqela_libspriteengine_SEMovingSpriteEntity_rotatespeed);};com.eqela.libspriteengine.SEPeriodicTimer=function(){com.eqela.libspriteengine.SEEntity.call(this);this.com_eqela_libspriteengine_SEPeriodicTimer_delay=0;this.com_eqela_libspriteengine_SEPeriodicTimer_handler=null;this.com_eqela_libspriteengine_SEPeriodicTimer_starttime=null;this.com_eqela_libspriteengine_SEPeriodicTimer_remove_when_timer_expired=true;{}};P=com.eqela.libspriteengine.SEPeriodicTimer.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SEPeriodicTimer']=true;P.constructor=com.eqela.libspriteengine.SEPeriodicTimer;com.eqela.libspriteengine.SEPeriodicTimer.for_handler=function(handler,delay){return(com.eqela.libspriteengine.SEPeriodicTimer.prototype.set_delay.call(com.eqela.libspriteengine.SEPeriodicTimer.prototype.set_handler.call(new com.eqela.libspriteengine.SEPeriodicTimer(),handler),delay));};P.on_timer=function(now){if(this.com_eqela_libspriteengine_SEPeriodicTimer_handler!==null){return(this.com_eqela_libspriteengine_SEPeriodicTimer_handler.on_timer(now));}return(false);};P.tick=function(now,delta){if(this.com_eqela_libspriteengine_SEPeriodicTimer_starttime===null){this.com_eqela_libspriteengine_SEPeriodicTimer_starttime=now;}var v=true;if(eq.api.TimeVal.diff(now,this.com_eqela_libspriteengine_SEPeriodicTimer_starttime) >= this.com_eqela_libspriteengine_SEPeriodicTimer_delay){this.com_eqela_libspriteengine_SEPeriodicTimer_starttime=now;v=this.on_timer(now);}if(v===false){if(this.com_eqela_libspriteengine_SEPeriodicTimer_remove_when_timer_expired){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);}}};P.set_delay=function(v){this.com_eqela_libspriteengine_SEPeriodicTimer_delay=v;return(this);};P.get_delay=function(){return(this.com_eqela_libspriteengine_SEPeriodicTimer_delay);};P.set_handler=function(v){this.com_eqela_libspriteengine_SEPeriodicTimer_handler=v;return(this);};P.get_handler=function(){return(this.com_eqela_libspriteengine_SEPeriodicTimer_handler);};P.set_remove_when_timer_expired=function(v){this.com_eqela_libspriteengine_SEPeriodicTimer_remove_when_timer_expired=v;return(this);};P.get_remove_when_timer_expired=function(){return(this.com_eqela_libspriteengine_SEPeriodicTimer_remove_when_timer_expired);};com.eqela.libspriteengine.SEPointerInfo=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEPointerInfo_id=-1;this.com_eqela_libspriteengine_SEPointerInfo_x=-1;this.com_eqela_libspriteengine_SEPointerInfo_y=-1;this.com_eqela_libspriteengine_SEPointerInfo_pressed=false;this.com_eqela_libspriteengine_SEPointerInfo_pressed_x=-1;this.com_eqela_libspriteengine_SEPointerInfo_pressed_y=-1;this.com_eqela_libspriteengine_SEPointerInfo_last_event=null;{}};P=com.eqela.libspriteengine.SEPointerInfo.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEPointerInfo']=true;P.constructor=com.eqela.libspriteengine.SEPointerInfo;P.is_inside=function(sx,sy,sw,sh){if((((this.com_eqela_libspriteengine_SEPointerInfo_x >= sx)&&(this.com_eqela_libspriteengine_SEPointerInfo_x < (sx+sw)))&&(this.com_eqela_libspriteengine_SEPointerInfo_y >= sy))&&(this.com_eqela_libspriteengine_SEPointerInfo_y < (sy+sh))){return(true);}return(false);};P.set_id=function(v){this.com_eqela_libspriteengine_SEPointerInfo_id=v;return(this);};P.get_id=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_id);};P.set_x=function(v){this.com_eqela_libspriteengine_SEPointerInfo_x=v;return(this);};P.get_x=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_x);};P.set_y=function(v){this.com_eqela_libspriteengine_SEPointerInfo_y=v;return(this);};P.get_y=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_y);};P.set_pressed=function(v){this.com_eqela_libspriteengine_SEPointerInfo_pressed=v;return(this);};P.get_pressed=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_pressed);};P.set_pressed_x=function(v){this.com_eqela_libspriteengine_SEPointerInfo_pressed_x=v;return(this);};P.get_pressed_x=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_pressed_x);};P.set_pressed_y=function(v){this.com_eqela_libspriteengine_SEPointerInfo_pressed_y=v;return(this);};P.get_pressed_y=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_pressed_y);};P.set_last_event=function(v){this.com_eqela_libspriteengine_SEPointerInfo_last_event=v;return(this);};P.get_last_event=function(){return(this.com_eqela_libspriteengine_SEPointerInfo_last_event);};com.eqela.libspriteengine.SEResourceCache=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEResourceCache_frame=null;this.com_eqela_libspriteengine_SEResourceCache_dpi=96;this.com_eqela_libspriteengine_SEResourceCache_images=null;this.com_eqela_libspriteengine_SEResourceCache_fonts=null;this.com_eqela_libspriteengine_SEResourceCache_sheets=null;{}};P=com.eqela.libspriteengine.SEResourceCache.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEResourceCache']=true;P.constructor=com.eqela.libspriteengine.SEResourceCache;com.eqela.libspriteengine.SEResourceCache.for_frame=function(frame){return(com.eqela.libspriteengine.SEResourceCache.prototype.set_frame.call(new com.eqela.libspriteengine.SEResourceCache(),frame));};P.release_texture=function(o){if(o===null){return;}if((function(l,r){return(l!=null&&l._t[r]===true);})(o,"com.eqela.libgui.Image")){o.release();}};P.cleanup=function(){eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEResourceCache: Cleaning up cached resources .."),null);if(this.com_eqela_libspriteengine_SEResourceCache_images!==null){{var _t8=eq.api.IteratorStatic.for_object(eq.api.HashTable.prototype.iterate_values.call(this.com_eqela_libspriteengine_SEResourceCache_images));if(_t8!==null){var _t9=null;for(_t9=_t8.next();_t9!==null;_t9=_t8.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t9,"eq.api.Object")){var img=_t9;{this.release_texture(img);}}}}}this.com_eqela_libspriteengine_SEResourceCache_images=null;}this.com_eqela_libspriteengine_SEResourceCache_fonts=null;if(this.com_eqela_libspriteengine_SEResourceCache_sheets!==null){{var _t10=eq.api.IteratorStatic.for_object(eq.api.HashTable.prototype.iterate_values.call(this.com_eqela_libspriteengine_SEResourceCache_sheets));if(_t10!==null){var _t11=null;for(_t11=_t10.next();_t11!==null;_t11=_t10.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t11,"eq.api.Collection")){var sheet=_t11;{{var _t12=eq.api.IteratorStatic.for_object(sheet);if(_t12!==null){var _t13=null;for(_t13=_t12.next();_t13!==null;_t13=_t12.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t13,"eq.api.Object")){var o=_t13;{this.release_texture(o);}}}}}}}}}}this.com_eqela_libspriteengine_SEResourceCache_sheets=null;}};P.get_frame=function(){return(this.com_eqela_libspriteengine_SEResourceCache_frame);};P.set_frame=function(frame){this.com_eqela_libspriteengine_SEResourceCache_frame=frame;if(frame!==null){com.eqela.libspriteengine.SEResourceCache.prototype.set_dpi.call(this,frame.get_dpi());}else {com.eqela.libspriteengine.SEResourceCache.prototype.set_dpi.call(this,96);}return(this);};P.on_font_prepared=function(id){};P.prepare_font=function(id,details,height){if(eq.api.StringStatic.is_empty(id)){return(false);}var font=com.eqela.libgui.Font.instance(details);if(font===null){return(false);}if(height > 0){var sz=eq.api.StringStatic.for_strptr("%dpx").printf().add(eq.api.Primitive.for_integer(~~(eq.api.Math.rint(height)))).to_string();com.eqela.libgui.Font.prototype.set_size.call(font,sz);}if(this.com_eqela_libspriteengine_SEResourceCache_fonts===null){this.com_eqela_libspriteengine_SEResourceCache_fonts=eq.api.HashTable.create();}eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEResourceCache: Prepared font `%s': `%s' / %f").printf().add(id).add(details).add(eq.api.Primitive.for_double(height)),null);eq.api.HashTable.prototype.set.call(this.com_eqela_libspriteengine_SEResourceCache_fonts,id,font);this.on_font_prepared(id);return(true);};P.get_font=function(id){var _t33=null;var v=null;if(this.com_eqela_libspriteengine_SEResourceCache_fonts!==null){v=((function(l,r){return(l!=null&&l._t[r]===true);})((_t33=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_fonts,id)),"com.eqela.libgui.Font")?_t33:null);}if(v===null){v=com.eqela.libgui.Font.instance(eq.api.StringStatic.for_strptr("4mm"));}return(v);};P.image_to_texture=function(img){return(img);};P.create_image_for_text=function(text,fontid){var img=com.eqela.libgui.TextImage.for_properties(com.eqela.libgui.TextProperties.prototype.set_font.call(com.eqela.libgui.TextProperties.for_string(text),com.eqela.libspriteengine.SEResourceCache.prototype.get_font.call(this,fontid)),com.eqela.libspriteengine.SEResourceCache.prototype.get_frame.call(this),com.eqela.libspriteengine.SEResourceCache.prototype.get_dpi.call(this));return(img);};P.create_texture_for_text=function(text,fontid){return(this.image_to_texture(com.eqela.libspriteengine.SEResourceCache.prototype.create_image_for_text.call(this,text,fontid)));};P.get_image_sheet=function(id){var _t34=null;if(this.com_eqela_libspriteengine_SEResourceCache_sheets===null){return(null);}return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t34=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_sheets,id)),"eq.api.Array")?_t34:null));};P.prepare_image_sheet=function(id,resid,cols,rows,max,width,height){var _t36=null;var _t35=null;if(id===null){return(false);}if(this.com_eqela_libspriteengine_SEResourceCache_sheets!==null){var v=((function(l,r){return(l!=null&&l._t[r]===true);})((_t35=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_sheets,id)),"eq.api.Array")?_t35:null);if(v!==null){return(true);}}var ars=resid;if(ars===null){ars=id;}var img=null;img=com.eqela.libgui.IconCache.get(ars,-1,-1,false);if(img===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to read image resource: `%s'").printf().add(ars),null);return(false);}var imgs=com.eqela.libimage.ImageSheet.prototype.to_images.call(com.eqela.libimage.ImageSheet.prototype.set_max_images.call(com.eqela.libimage.ImageSheet.prototype.set_rows.call(com.eqela.libimage.ImageSheet.prototype.set_cols.call(com.eqela.libimage.ImageSheet.prototype.set_sheet.call(new com.eqela.libimage.ImageSheet(),img),cols),rows),max),~~(width),~~(height));if(imgs===null){return(false);}if(this.com_eqela_libspriteengine_SEResourceCache_sheets===null){this.com_eqela_libspriteengine_SEResourceCache_sheets=eq.api.HashTable.create();}var nimgs=eq.api.ArrayStatic.create(imgs.count());var n=0;for(n=0;n < imgs.count();n++){nimgs.set(n,this.image_to_texture(((function(l,r){return(l!=null&&l._t[r]===true);})((_t36=imgs.get(n)),"com.eqela.libgui.Image")?_t36:null)));}eq.api.HashTable.prototype.set.call(this.com_eqela_libspriteengine_SEResourceCache_sheets,id,nimgs);return(true);};P.prepare_image=function(id,resid,width,height){if(this.com_eqela_libspriteengine_SEResourceCache_images===null){this.com_eqela_libspriteengine_SEResourceCache_images=eq.api.HashTable.create();}var oo=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_images,id);if(oo!==null){return(true);}var ars=resid;if(ars===null){ars=id;}var img=null;img=com.eqela.libgui.IconCache.get(ars,-1,-1,false);if(img===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to read image resource: `%s'").printf().add(ars),null);return(false);}if((width > 0.0)||(height > 0.0)){var nw=width;var nh=height;if(nw===0){nw=img.get_width();}if(nh===0){nh=img.get_height();}if(((nw > 0)&&((~~(nw))!==img.get_width()))||((nh > 0)&&((~~(nh))!==img.get_height()))){img=img.resize(~~(nw),~~(nh));}if(img===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to scale image `%s' as %f x %f").printf().add(ars).add(eq.api.Primitive.for_double(nw)).add(eq.api.Primitive.for_double(nh)),null);return(false);}}var txt=this.image_to_texture(img);if(txt===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("Preparing image `%s': Failed to convert image to texture").printf().add(id),null);return(false);}eq.api.HashTable.prototype.set.call(this.com_eqela_libspriteengine_SEResourceCache_images,id,txt);eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEResourceCache: Prepared image `%s' (%dx%dpx)").printf().add(id).add(eq.api.Primitive.for_double(img.get_width())).add(eq.api.Primitive.for_double(img.get_height())),null);return(true);};P.get_texture=function(id){if(this.com_eqela_libspriteengine_SEResourceCache_images!==null){var v=eq.api.HashTable.prototype.get.call(this.com_eqela_libspriteengine_SEResourceCache_images,id);if(v!==null){return(v);}}return(null);};P.set_dpi=function(v){this.com_eqela_libspriteengine_SEResourceCache_dpi=v;return(this);};P.get_dpi=function(){return(this.com_eqela_libspriteengine_SEResourceCache_dpi);};com.eqela.libspriteengine.SEScene=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEScene_frame=null;this.com_eqela_libspriteengine_SEScene_scene_controller=null;this.com_eqela_libspriteengine_SEScene_pointers=null;this.com_eqela_libspriteengine_SEScene_keys_pressed=null;this.com_eqela_libspriteengine_SEScene_last_tick=null;this.com_eqela_libspriteengine_SEScene_entities=null;this.com_eqela_libspriteengine_SEScene_next_scene=null;this.com_eqela_libspriteengine_SEScene_next_scene_action=0;this.com_eqela_libspriteengine_SEScene_do_switch_scene=false;this.com_eqela_libspriteengine_SEScene_stop_request=false;this.com_eqela_libspriteengine_SEScene_is_initialized=false;this.com_eqela_libspriteengine_SEScene_pointer_listeners=null;this.com_eqela_libspriteengine_SEScene_resource_cache=null;this.com_eqela_libspriteengine_SEScene_backend=null;this.com_eqela_libspriteengine_SEScene_started=false;this.com_eqela_libspriteengine_SEScene_scene_end_listener=null;this.com_eqela_libspriteengine_SEScene_background_sprite=null;this.com_eqela_libspriteengine_SEScene_debug=false;this.com_eqela_libspriteengine_SEScene_do_cleanup_backend=true;this.com_eqela_libspriteengine_SEScene_accept_volume_keys=false;{this.com_eqela_libspriteengine_SEScene_entities=eq.api.LinkedList.create();this.com_eqela_libspriteengine_SEScene_pointers=eq.api.LinkedList.create();this.com_eqela_libspriteengine_SEScene_keys_pressed=eq.api.HashTable.create();this.com_eqela_libspriteengine_SEScene_pointer_listeners=eq.api.LinkedList.create();}};P=com.eqela.libspriteengine.SEScene.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libgui.FrameController']=true;P._t['com.eqela.libgui.Scene']=true;P._t['com.eqela.libgui.TransferrableScene']=true;P._t['com.eqela.libspriteengine.SEScene']=true;P.constructor=com.eqela.libspriteengine.SEScene;P.transfer_from=function(scene){var _t37=null;var ss=((function(l,r){return(l!=null&&l._t[r]===true);})((_t37=scene),"com.eqela.libspriteengine.SEScene")?_t37:null);if(ss===null){return(false);}var be=com.eqela.libspriteengine.SEScene.prototype.get_backend.call(ss);if(be===null){return(false);}com.eqela.libspriteengine.SEScene.prototype.set_backend.call(this,be);com.eqela.libspriteengine.SEScene.prototype.set_do_cleanup_backend.call(ss,false);com.eqela.libspriteengine.SEBackend.prototype.on_scene_changed.call(be);return(true);};P.on_message=function(o){};P.iterate_entities=function(){if(this.com_eqela_libspriteengine_SEScene_entities===null){return(null);}return(this.com_eqela_libspriteengine_SEScene_entities.iterate());};P.get_entities=function(){return(this.com_eqela_libspriteengine_SEScene_entities);};P.get_frame=function(){return(this.com_eqela_libspriteengine_SEScene_frame);};P.get_dpi=function(){if(this.com_eqela_libspriteengine_SEScene_frame!==null){return(this.com_eqela_libspriteengine_SEScene_frame.get_dpi());}return(96);};P.px=function(s,dpi){var dd=dpi;if(dd < 0){dd=com.eqela.libspriteengine.SEScene.prototype.get_dpi.call(this);}return(com.eqela.libgui.Length.to_pixels(s,dd));};P.get_scene_width=function(){if(this.com_eqela_libspriteengine_SEScene_frame===null){return(0);}return(this.com_eqela_libspriteengine_SEScene_frame.get_width());};P.get_scene_height=function(){if(this.com_eqela_libspriteengine_SEScene_frame===null){return(0);}return(this.com_eqela_libspriteengine_SEScene_frame.get_height());};P.set_scene_controller=function(sc){this.com_eqela_libspriteengine_SEScene_scene_controller=sc;};P.on_scene_shown=function(){};P.on_scene_hidden=function(){this.com_eqela_libspriteengine_SEScene_do_switch_scene=true;};com.eqela.libspriteengine.SEScene.ShowSceneListener=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEScene_ShowSceneListener_scene=null;{}};P2=P;P=com.eqela.libspriteengine.SEScene.ShowSceneListener.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEAnimationListener']=true;P._t['com.eqela.libspriteengine.SEScene.ShowSceneListener']=true;P.constructor=com.eqela.libspriteengine.SEScene.ShowSceneListener;P.on_animation_ended=function(){if(this.com_eqela_libspriteengine_SEScene_ShowSceneListener_scene!==null){this.com_eqela_libspriteengine_SEScene_ShowSceneListener_scene.on_scene_shown();}};P.set_scene=function(v){this.com_eqela_libspriteengine_SEScene_ShowSceneListener_scene=v;return(this);};P.get_scene=function(){return(this.com_eqela_libspriteengine_SEScene_ShowSceneListener_scene);};P=P2;P2=null;com.eqela.libspriteengine.SEScene.HideSceneListener=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SEScene_HideSceneListener_scene=null;{}};P2=P;P=com.eqela.libspriteengine.SEScene.HideSceneListener.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEAnimationListener']=true;P._t['com.eqela.libspriteengine.SEScene.HideSceneListener']=true;P.constructor=com.eqela.libspriteengine.SEScene.HideSceneListener;P.on_animation_ended=function(){if(this.com_eqela_libspriteengine_SEScene_HideSceneListener_scene!==null){this.com_eqela_libspriteengine_SEScene_HideSceneListener_scene.on_scene_hidden();}};P.set_scene=function(v){this.com_eqela_libspriteengine_SEScene_HideSceneListener_scene=v;return(this);};P.get_scene=function(){return(this.com_eqela_libspriteengine_SEScene_HideSceneListener_scene);};P=P2;P2=null;P.show_scene=function(listener){listener.on_animation_ended();};P.hide_scene=function(listener){listener.on_animation_ended();};P.switch_scene=function(scene){this.com_eqela_libspriteengine_SEScene_next_scene_action=0;this.com_eqela_libspriteengine_SEScene_next_scene=scene;this.hide_scene(com.eqela.libspriteengine.SEScene.HideSceneListener.prototype.set_scene.call(new com.eqela.libspriteengine.SEScene.HideSceneListener(),this));};P.push_scene=function(scene){this.com_eqela_libspriteengine_SEScene_next_scene_action=1;this.com_eqela_libspriteengine_SEScene_next_scene=scene;this.hide_scene(com.eqela.libspriteengine.SEScene.HideSceneListener.prototype.set_scene.call(new com.eqela.libspriteengine.SEScene.HideSceneListener(),this));};P.pop_scene=function(){this.com_eqela_libspriteengine_SEScene_next_scene_action=2;this.com_eqela_libspriteengine_SEScene_next_scene=null;this.hide_scene(com.eqela.libspriteengine.SEScene.HideSceneListener.prototype.set_scene.call(new com.eqela.libspriteengine.SEScene.HideSceneListener(),this));};P.get_preferred_type=function(){var wt=com.eqela.libos.SystemEnvironment.get_env_var(eq.api.StringStatic.for_strptr("EQ_SPRITEENGINE_WINDOW_TYPE"));if(eq.api.StringStatic.is_empty(wt)===false){return(wt);}return(eq.api.StringStatic.for_strptr("fullscreen"));};P.get_preferred_size=function(){return(com.eqela.libgui.SizeStatic.instance(1024,768));};P.create_backend=function(){var v=null;var backendname=com.eqela.libos.SystemEnvironment.get_env_var(eq.api.StringStatic.for_strptr("EQ_SPRITEENGINE_BACKEND"));if(eq.api.StringStatic.is_empty(backendname)===false){v=this.create_backend_by_name(backendname);if(v===null){eq.api.Log.error(eq.api.StringStatic.for_strptr("SEScene: Failed to create requested backend: `%s'").printf().add(backendname),null);}else {eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEScene: Using requested backend: `%s'").printf().add(backendname),null);}return(v);}v=this.create_backend_by_name(eq.api.StringStatic.for_strptr("html"));if(v!==null){eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEScene: Using HTML optimized backend"),null);return(v);}v=this.create_backend_by_name(eq.api.StringStatic.for_strptr("generic"));if(v!==null){eq.api.Log.debug(eq.api.StringStatic.for_strptr("SEScene: Using the generic surface based backend"),null);return(v);}eq.api.Log.error(eq.api.StringStatic.for_strptr("Failed to create any backend"),null);return(null);};P.create_backend_by_name=function(_name){if(eq.api.StringStatic.for_strptr("html").equals(_name)){return(com.eqela.libspriteengine.SEHTMLElementBackend.instance(this.com_eqela_libspriteengine_SEScene_frame,this.com_eqela_libspriteengine_SEScene_debug));}if(eq.api.StringStatic.for_strptr("generic").equals(_name)){return(com.eqela.libspriteengine.SEGenericBackend.instance(this.com_eqela_libspriteengine_SEScene_frame));}eq.api.Log.error(eq.api.StringStatic.for_strptr("Unknown backend name: `%s'").printf().add(_name),null);return(null);};P.initialize_frame=function(fr){this.com_eqela_libspriteengine_SEScene_frame=fr;com.eqela.libspriteengine.SEScene.prototype.try_initialize.call(this);};P.try_initialize=function(){if(((this.com_eqela_libspriteengine_SEScene_is_initialized===false)&&(com.eqela.libspriteengine.SEScene.prototype.get_scene_width.call(this) > 0))&&(com.eqela.libspriteengine.SEScene.prototype.get_scene_height.call(this) > 0)){this.com_eqela_libspriteengine_SEScene_is_initialized=true;if(this.com_eqela_libspriteengine_SEScene_backend===null){this.com_eqela_libspriteengine_SEScene_backend=this.create_backend();if(this.com_eqela_libspriteengine_SEScene_backend===null){com.eqela.libos.SystemEnvironment.terminate(1);}}if(this.com_eqela_libspriteengine_SEScene_backend!==null){if(this.com_eqela_libspriteengine_SEScene_started){this.com_eqela_libspriteengine_SEScene_backend.start(this);}this.com_eqela_libspriteengine_SEScene_resource_cache=com.eqela.libspriteengine.SEBackend.prototype.get_resource_cache.call(this.com_eqela_libspriteengine_SEScene_backend);}this.initialize(this.com_eqela_libspriteengine_SEScene_resource_cache);this.show_scene(com.eqela.libspriteengine.SEScene.ShowSceneListener.prototype.set_scene.call(new com.eqela.libspriteengine.SEScene.ShowSceneListener(),this));}};P.initialize=function(rsc){};P.cleanup=function(){this.com_eqela_libspriteengine_SEScene_background_sprite=com.eqela.libspriteengine.SESpriteStatic.remove(this.com_eqela_libspriteengine_SEScene_background_sprite);if(this.com_eqela_libspriteengine_SEScene_backend!==null){if(this.com_eqela_libspriteengine_SEScene_do_cleanup_backend){this.com_eqela_libspriteengine_SEScene_backend.cleanup();}this.com_eqela_libspriteengine_SEScene_backend=null;}this.com_eqela_libspriteengine_SEScene_resource_cache=null;this.com_eqela_libspriteengine_SEScene_is_initialized=false;};P.start=function(){if(this.com_eqela_libspriteengine_SEScene_started){return;}this.com_eqela_libspriteengine_SEScene_started=true;this.com_eqela_libspriteengine_SEScene_last_tick=null;this.com_eqela_libspriteengine_SEScene_stop_request=false;if(this.com_eqela_libspriteengine_SEScene_backend!==null){this.com_eqela_libspriteengine_SEScene_backend.start(this);}};P.clear_entities=function(){{var _t14=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_entities);if(_t14!==null){var _t15=null;for(_t15=_t14.next();_t15!==null;_t15=_t14.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t15,"com.eqela.libspriteengine.SEEntity")){var t=_t15;{t.cleanup();com.eqela.libspriteengine.SEEntity.prototype.set_mynode.call(t,null);com.eqela.libspriteengine.SEEntity.prototype.set_scene.call(t,null);}}}}}this.com_eqela_libspriteengine_SEScene_entities=eq.api.LinkedList.create();};P.stop=function(){if(this.com_eqela_libspriteengine_SEScene_started===false){return;}if((this.com_eqela_libspriteengine_SEScene_backend!==null)&&this.com_eqela_libspriteengine_SEScene_do_cleanup_backend){this.com_eqela_libspriteengine_SEScene_backend.stop();}this.com_eqela_libspriteengine_SEScene_started=false;this.com_eqela_libspriteengine_SEScene_pointers=eq.api.LinkedList.create();this.com_eqela_libspriteengine_SEScene_keys_pressed=eq.api.HashTable.create();this.com_eqela_libspriteengine_SEScene_last_tick=null;};P.destroy=function(){this.stop();com.eqela.libspriteengine.SEScene.prototype.clear_entities.call(this);this.cleanup();this.com_eqela_libspriteengine_SEScene_frame=null;this.com_eqela_libspriteengine_SEScene_scene_controller=null;};P.on_exit_scene_request=function(){com.eqela.libos.SystemEnvironment.terminate(0);};P.on_escape_key_press=function(){this.on_exit_scene_request();};P.on_key_press=function(_name,str){if(eq.api.StringStatic.for_strptr("escape").equals(_name)||eq.api.StringStatic.for_strptr("back").equals(_name)){this.on_escape_key_press();}};P.on_key_release=function(_name,str){};P.on_pointer_leave=function(pi){{var _t16=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_pointer_listeners.iterate_reverse(-1));if(_t16!==null){var _t17=null;for(_t17=_t16.next();_t17!==null;_t17=_t16.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t17,"com.eqela.libspriteengine.SEPointerListener")){var pl=_t17;{pl.on_pointer_move(pi);}}}}}};P.on_pointer_press=function(pi){{var _t18=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_pointer_listeners.iterate_reverse(-1));if(_t18!==null){var _t19=null;for(_t19=_t18.next();_t19!==null;_t19=_t18.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t19,"com.eqela.libspriteengine.SEPointerListener")){var pl=_t19;{pl.on_pointer_press(pi);}}}}}};P.on_pointer_release=function(pi){{var _t20=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_pointer_listeners.iterate_reverse(-1));if(_t20!==null){var _t21=null;for(_t21=_t20.next();_t21!==null;_t21=_t20.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t21,"com.eqela.libspriteengine.SEPointerListener")){var pl=_t21;{pl.on_pointer_release(pi);}}}}}};P.on_pointer_move=function(pi){{var _t22=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_pointer_listeners.iterate_reverse(-1));if(_t22!==null){var _t23=null;for(_t23=_t22.next();_t23!==null;_t23=_t22.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t23,"com.eqela.libspriteengine.SEPointerListener")){var pl=_t23;{pl.on_pointer_move(pi);}}}}}};com.eqela.libspriteengine.SEScene.QuitListener=function(){eq.api.Object.call(this);{}};P2=P;P=com.eqela.libspriteengine.SEScene.QuitListener.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['eq.api.EventReceiver']=true;P._t['com.eqela.libspriteengine.SEScene.QuitListener']=true;P.constructor=com.eqela.libspriteengine.SEScene.QuitListener;P.on_event=function(o){var _t38=null;if(eq.api.StringStatic.for_strptr("yes").equals((((function(l,r){return(l!=null&&l._t[r]===true);})((_t38=o),"eq.api.String")?_t38:null)))){com.eqela.libos.SystemEnvironment.terminate(0);}};P=P2;P2=null;P.on_event=function(e){var _t42=null;var _t41=null;var _t40=null;var _t39=null;if((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.KeyPressEvent")){var ke=e;var nn=com.eqela.libgui.KeyEvent.prototype.get_name.call(ke);if(eq.api.StringStatic.for_strptr("volume-down").equals(nn)||eq.api.StringStatic.for_strptr("volume-up").equals(nn)){if(com.eqela.libspriteengine.SEScene.prototype.get_accept_volume_keys.call(this)===false){return(false);}}var ns=com.eqela.libgui.KeyEvent.prototype.get_str.call(ke);if(eq.api.StringStatic.is_empty(nn)===false){eq.api.HashTable.prototype.set_bool.call(this.com_eqela_libspriteengine_SEScene_keys_pressed,nn,true);}if(eq.api.StringStatic.is_empty(ns)===false){eq.api.HashTable.prototype.set_bool.call(this.com_eqela_libspriteengine_SEScene_keys_pressed,ns,true);}this.on_key_press(nn,ns);return(true);}if((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.KeyReleaseEvent")){var ke=e;var nn=com.eqela.libgui.KeyEvent.prototype.get_name.call(ke);var ns=com.eqela.libgui.KeyEvent.prototype.get_str.call(ke);if(eq.api.StringStatic.is_empty(nn)===false){eq.api.HashTable.prototype.set_bool.call(this.com_eqela_libspriteengine_SEScene_keys_pressed,nn,false);}if(eq.api.StringStatic.is_empty(ns)===false){eq.api.HashTable.prototype.set_bool.call(this.com_eqela_libspriteengine_SEScene_keys_pressed,ns,false);}this.on_key_release(nn,ns);return(true);}if((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.PointerLeaveEvent")){var pe=e;com.eqela.libspriteengine.SEScene.prototype.remove_pointer_info.call(this,com.eqela.libgui.PointerEvent.prototype.get_id.call(pe));var pp=com.eqela.libspriteengine.SEScene.prototype.get_pointer_info.call(this,com.eqela.libgui.PointerEvent.prototype.get_id.call(pe));if(pp!==null){com.eqela.libspriteengine.SEPointerInfo.prototype.set_last_event.call(pp,((function(l,r){return(l!=null&&l._t[r]===true);})((_t39=e),"com.eqela.libgui.PointerEvent")?_t39:null));com.eqela.libspriteengine.SEPointerInfo.prototype.set_x.call(pp,-1);com.eqela.libspriteengine.SEPointerInfo.prototype.set_y.call(pp,-1);this.on_pointer_leave(pp);}return(true);}if((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.PointerPressEvent")){var ppe=e;var pp=com.eqela.libspriteengine.SEScene.prototype.get_pointer_info.call(this,com.eqela.libgui.PointerEvent.prototype.get_id.call(ppe));if(pp===null){return(true);}com.eqela.libspriteengine.SEPointerInfo.prototype.set_last_event.call(pp,((function(l,r){return(l!=null&&l._t[r]===true);})((_t40=e),"com.eqela.libgui.PointerEvent")?_t40:null));if(com.eqela.libgui.PointerPressEvent.prototype.get_button.call(ppe)===1){com.eqela.libspriteengine.SEPointerInfo.prototype.set_pressed.call(pp,true);com.eqela.libspriteengine.SEPointerInfo.prototype.set_pressed_x.call(pp,com.eqela.libgui.PointerEvent.prototype.get_x.call(ppe));com.eqela.libspriteengine.SEPointerInfo.prototype.set_pressed_y.call(pp,com.eqela.libgui.PointerEvent.prototype.get_y.call(ppe));}com.eqela.libspriteengine.SEPointerInfo.prototype.set_x.call(pp,com.eqela.libgui.PointerEvent.prototype.get_x.call(ppe));com.eqela.libspriteengine.SEPointerInfo.prototype.set_y.call(pp,com.eqela.libgui.PointerEvent.prototype.get_y.call(ppe));this.on_pointer_press(pp);return(true);}if((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.PointerReleaseEvent")){var pre=e;var pp=com.eqela.libspriteengine.SEScene.prototype.get_pointer_info.call(this,com.eqela.libgui.PointerEvent.prototype.get_id.call(pre));if(pp===null){return(true);}com.eqela.libspriteengine.SEPointerInfo.prototype.set_last_event.call(pp,((function(l,r){return(l!=null&&l._t[r]===true);})((_t41=e),"com.eqela.libgui.PointerEvent")?_t41:null));if(com.eqela.libgui.PointerReleaseEvent.prototype.get_button.call(pre)===1){com.eqela.libspriteengine.SEPointerInfo.prototype.set_pressed.call(pp,false);com.eqela.libspriteengine.SEPointerInfo.prototype.set_pressed_x.call(pp,-1);com.eqela.libspriteengine.SEPointerInfo.prototype.set_pressed_y.call(pp,-1);}com.eqela.libspriteengine.SEPointerInfo.prototype.set_x.call(pp,com.eqela.libgui.PointerEvent.prototype.get_x.call(pre));com.eqela.libspriteengine.SEPointerInfo.prototype.set_y.call(pp,com.eqela.libgui.PointerEvent.prototype.get_y.call(pre));this.on_pointer_release(pp);return(true);}if((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.PointerMoveEvent")){var pe=e;var pp=com.eqela.libspriteengine.SEScene.prototype.get_pointer_info.call(this,com.eqela.libgui.PointerEvent.prototype.get_id.call(pe));if(pp===null){return(true);}com.eqela.libspriteengine.SEPointerInfo.prototype.set_last_event.call(pp,((function(l,r){return(l!=null&&l._t[r]===true);})((_t42=e),"com.eqela.libgui.PointerEvent")?_t42:null));com.eqela.libspriteengine.SEPointerInfo.prototype.set_x.call(pp,com.eqela.libgui.PointerEvent.prototype.get_x.call(pe));com.eqela.libspriteengine.SEPointerInfo.prototype.set_y.call(pp,com.eqela.libgui.PointerEvent.prototype.get_y.call(pe));this.on_pointer_move(pp);return(true);}if((this.com_eqela_libspriteengine_SEScene_is_initialized===false)&&((function(l,r){return(l!=null&&l._t[r]===true);})(e,"com.eqela.libgui.FrameResizeEvent"))){com.eqela.libspriteengine.SEScene.prototype.try_initialize.call(this);}return(false);};P.end_scene=function(sel){this.com_eqela_libspriteengine_SEScene_stop_request=true;this.com_eqela_libspriteengine_SEScene_scene_end_listener=sel;};P.add_entity=function(entity){if(entity!==null){com.eqela.libspriteengine.SEEntity.prototype.set_scene.call(entity,this);var nn=eq.api.LinkedListNode.create(entity);com.eqela.libspriteengine.SEEntity.prototype.set_mynode.call(entity,nn);eq.api.LinkedList.prototype.add_node.call(this.com_eqela_libspriteengine_SEScene_entities,nn);entity.initialize(this.com_eqela_libspriteengine_SEScene_resource_cache);if((function(l,r){return(l!=null&&l._t[r]===true);})(entity,"com.eqela.libspriteengine.SEPointerListener")){this.com_eqela_libspriteengine_SEScene_pointer_listeners.add(entity);}}return(entity);};P.remove_entity=function(entity){if(entity!==null){entity.cleanup();eq.api.LinkedList.prototype.remove_node.call(this.com_eqela_libspriteengine_SEScene_entities,com.eqela.libspriteengine.SEEntity.prototype.get_mynode.call(entity));com.eqela.libspriteengine.SEEntity.prototype.set_mynode.call(entity,null);com.eqela.libspriteengine.SEEntity.prototype.set_scene.call(entity,null);if((function(l,r){return(l!=null&&l._t[r]===true);})(entity,"com.eqela.libspriteengine.SEPointerListener")){this.com_eqela_libspriteengine_SEScene_pointer_listeners.remove(entity);}entity.on_entity_removed();}return(null);};P.tick=function(){var now=com.eqela.libos.SystemClock.timeval();var delta=0.0;if(this.com_eqela_libspriteengine_SEScene_last_tick===null){delta=0.0;}else {delta=(eq.api.TimeVal.diff(now,this.com_eqela_libspriteengine_SEScene_last_tick)/1000000.0);}if(this.com_eqela_libspriteengine_SEScene_is_initialized){this.update(now,delta);}this.com_eqela_libspriteengine_SEScene_last_tick=now;if(this.com_eqela_libspriteengine_SEScene_do_switch_scene){var ns=this.com_eqela_libspriteengine_SEScene_next_scene;this.com_eqela_libspriteengine_SEScene_do_switch_scene=false;this.com_eqela_libspriteengine_SEScene_next_scene=null;if(this.com_eqela_libspriteengine_SEScene_scene_controller!==null){if(this.com_eqela_libspriteengine_SEScene_next_scene_action===0){this.com_eqela_libspriteengine_SEScene_scene_controller.switch_scene(ns);}else {if(this.com_eqela_libspriteengine_SEScene_next_scene_action===1){this.com_eqela_libspriteengine_SEScene_scene_controller.push_scene(ns);}else {if(this.com_eqela_libspriteengine_SEScene_next_scene_action===2){this.com_eqela_libspriteengine_SEScene_scene_controller.pop_scene();}}}}}if(this.com_eqela_libspriteengine_SEScene_stop_request){this.com_eqela_libspriteengine_SEScene_stop_request=false;if(this.com_eqela_libspriteengine_SEScene_scene_end_listener!==null){this.com_eqela_libspriteengine_SEScene_scene_end_listener.on_scene_ended(this);this.com_eqela_libspriteengine_SEScene_scene_end_listener=null;}}};P.update=function(now,delta){{var _t24=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_entities);if(_t24!==null){var _t25=null;for(_t25=_t24.next();_t25!==null;_t25=_t24.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t25,"com.eqela.libspriteengine.SEEntity")){var t=_t25;{t.tick(now,delta);}}}}}};P.get_pointer_info=function(id){var v=null;{var _t26=eq.api.IteratorStatic.for_object(this.com_eqela_libspriteengine_SEScene_pointers);if(_t26!==null){var _t27=null;for(_t27=_t26.next();_t27!==null;_t27=_t26.next()){if((function(l,r){return(l!=null&&l._t[r]===true);})(_t27,"com.eqela.libspriteengine.SEPointerInfo")){var pi=_t27;{if(com.eqela.libspriteengine.SEPointerInfo.prototype.get_id.call(pi)===id){v=pi;break;}}}}}}if(v===null){v=com.eqela.libspriteengine.SEPointerInfo.prototype.set_id.call(new com.eqela.libspriteengine.SEPointerInfo(),id);this.com_eqela_libspriteengine_SEScene_pointers.append(v);}return(v);};P.remove_pointer_info=function(id){var _t43=null;var node=eq.api.LinkedList.prototype.get_first_node.call(this.com_eqela_libspriteengine_SEScene_pointers);while(node!==null){var pi=((function(l,r){return(l!=null&&l._t[r]===true);})((_t43=node.eq_api_LinkedListNode_value),"com.eqela.libspriteengine.SEPointerInfo")?_t43:null);if((pi!==null)&&(com.eqela.libspriteengine.SEPointerInfo.prototype.get_id.call(pi)===id)){eq.api.LinkedList.prototype.remove_node.call(this.com_eqela_libspriteengine_SEScene_pointers,node);break;}node=eq.api.LinkedListNode.prototype.get_next_node.call(node);}};P.iterate_pointers=function(){return(this.com_eqela_libspriteengine_SEScene_pointers.iterate());};P.is_key_pressed=function(_name){return(eq.api.HashTable.prototype.get_bool.call(this.com_eqela_libspriteengine_SEScene_keys_pressed,_name,false));};P.on_create=function(command,args){};P.set_background=function(color){this.com_eqela_libspriteengine_SEScene_background_sprite=com.eqela.libspriteengine.SESpriteStatic.remove(this.com_eqela_libspriteengine_SEScene_background_sprite);if(color!==null){this.com_eqela_libspriteengine_SEScene_background_sprite=this.add_sprite_for_color(color,com.eqela.libspriteengine.SEScene.prototype.get_scene_width.call(this),com.eqela.libspriteengine.SEScene.prototype.get_scene_height.call(this));}};P.add_sprite=function(){if(this.com_eqela_libspriteengine_SEScene_backend===null){return(null);}return(this.com_eqela_libspriteengine_SEScene_backend.add_sprite());};P.add_sprite_for_image=function(image){if(this.com_eqela_libspriteengine_SEScene_backend===null){return(null);}return(this.com_eqela_libspriteengine_SEScene_backend.add_sprite_for_image(image));};P.add_sprite_for_text=function(text,fontid){if(this.com_eqela_libspriteengine_SEScene_backend===null){return(null);}return(this.com_eqela_libspriteengine_SEScene_backend.add_sprite_for_text(text,fontid));};P.add_sprite_for_color=function(color,width,height){if(this.com_eqela_libspriteengine_SEScene_backend===null){return(null);}return(this.com_eqela_libspriteengine_SEScene_backend.add_sprite_for_color(color,width,height));};P.add_layer=function(x,y,width,height,force_clipped){if(this.com_eqela_libspriteengine_SEScene_backend===null){return(null);}return(this.com_eqela_libspriteengine_SEScene_backend.add_layer(x,y,width,height,force_clipped));};P.set_backend=function(v){this.com_eqela_libspriteengine_SEScene_backend=v;return(this);};P.get_backend=function(){return(this.com_eqela_libspriteengine_SEScene_backend);};P.set_debug=function(v){this.com_eqela_libspriteengine_SEScene_debug=v;return(this);};P.get_debug=function(){return(this.com_eqela_libspriteengine_SEScene_debug);};P.set_do_cleanup_backend=function(v){this.com_eqela_libspriteengine_SEScene_do_cleanup_backend=v;return(this);};P.get_do_cleanup_backend=function(){return(this.com_eqela_libspriteengine_SEScene_do_cleanup_backend);};P.set_accept_volume_keys=function(v){this.com_eqela_libspriteengine_SEScene_accept_volume_keys=v;return(this);};P.get_accept_volume_keys=function(){return(this.com_eqela_libspriteengine_SEScene_accept_volume_keys);};com.eqela.libspriteengine.SESplashScene=function(){com.eqela.libspriteengine.SEScene.call(this);this.com_eqela_libspriteengine_SESplashScene_next_scene=null;this.com_eqela_libspriteengine_SESplashScene_logos=null;this.com_eqela_libspriteengine_SESplashScene_current_logo=-1;{com.eqela.libspriteengine.SESplashScene.prototype.add_image_centered.call(this,eq.api.StringStatic.for_strptr("eqela_splash_logo"),com.eqela.libgui.Color.instance(eq.api.StringStatic.for_strptr("black")),0.3);}};P=com.eqela.libspriteengine.SESplashScene.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEScene.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libgui.FrameController']=true;P._t['com.eqela.libgui.Scene']=true;P._t['com.eqela.libgui.TransferrableScene']=true;P._t['com.eqela.libspriteengine.SEScene']=true;P._t['com.eqela.libspriteengine.SESplashScene']=true;P.constructor=com.eqela.libspriteengine.SESplashScene;com.eqela.libspriteengine.SESplashScene.LogoInfo=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_SESplashScene_LogoInfo__name=null;this.com_eqela_libspriteengine_SESplashScene_LogoInfo_type=0;this.com_eqela_libspriteengine_SESplashScene_LogoInfo_background=null;this.com_eqela_libspriteengine_SESplashScene_LogoInfo_width_ratio=0.0;{}};P2=P;P=com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SESplashScene.LogoInfo']=true;P.constructor=com.eqela.libspriteengine.SESplashScene.LogoInfo;com.eqela.libspriteengine.SESplashScene.LogoInfo.com_eqela_libspriteengine_SESplashScene_LogoInfo_TYPE_STRETCHED=0;com.eqela.libspriteengine.SESplashScene.LogoInfo.com_eqela_libspriteengine_SESplashScene_LogoInfo_TYPE_FILLED=1;com.eqela.libspriteengine.SESplashScene.LogoInfo.com_eqela_libspriteengine_SESplashScene_LogoInfo_TYPE_CENTERED=2;P.set_name=function(v){this.com_eqela_libspriteengine_SESplashScene_LogoInfo__name=v;return(this);};P.get_name=function(){return(this.com_eqela_libspriteengine_SESplashScene_LogoInfo__name);};P.set_type=function(v){this.com_eqela_libspriteengine_SESplashScene_LogoInfo_type=v;return(this);};P.get_type=function(){return(this.com_eqela_libspriteengine_SESplashScene_LogoInfo_type);};P.set_background=function(v){this.com_eqela_libspriteengine_SESplashScene_LogoInfo_background=v;return(this);};P.get_background=function(){return(this.com_eqela_libspriteengine_SESplashScene_LogoInfo_background);};P.set_width_ratio=function(v){this.com_eqela_libspriteengine_SESplashScene_LogoInfo_width_ratio=v;return(this);};P.get_width_ratio=function(){return(this.com_eqela_libspriteengine_SESplashScene_LogoInfo_width_ratio);};P=P2;P2=null;P.add_logo_info=function(li){if(li===null){return;}if(this.com_eqela_libspriteengine_SESplashScene_logos===null){this.com_eqela_libspriteengine_SESplashScene_logos=eq.api.ArrayStatic.create(0);}this.com_eqela_libspriteengine_SESplashScene_logos.append(li);};P.add_image_stretched=function(_name){if(eq.api.StringStatic.is_empty(_name)){return(this);}com.eqela.libspriteengine.SESplashScene.prototype.add_logo_info.call(this,com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_name.call(com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_type.call(new com.eqela.libspriteengine.SESplashScene.LogoInfo(),com.eqela.libspriteengine.SESplashScene.LogoInfo.com_eqela_libspriteengine_SESplashScene_LogoInfo_TYPE_STRETCHED),_name));return(this);};P.add_image_filled=function(_name){if(eq.api.StringStatic.is_empty(_name)){return(this);}com.eqela.libspriteengine.SESplashScene.prototype.add_logo_info.call(this,com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_name.call(com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_type.call(new com.eqela.libspriteengine.SESplashScene.LogoInfo(),com.eqela.libspriteengine.SESplashScene.LogoInfo.com_eqela_libspriteengine_SESplashScene_LogoInfo_TYPE_FILLED),_name));return(this);};P.add_image_centered=function(_name,background,width_ratio){if(eq.api.StringStatic.is_empty(_name)){return(this);}com.eqela.libspriteengine.SESplashScene.prototype.add_logo_info.call(this,com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_width_ratio.call(com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_background.call(com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_name.call(com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.set_type.call(new com.eqela.libspriteengine.SESplashScene.LogoInfo(),com.eqela.libspriteengine.SESplashScene.LogoInfo.com_eqela_libspriteengine_SESplashScene_LogoInfo_TYPE_CENTERED),_name),background),width_ratio));return(this);};com.eqela.libspriteengine.SESplashScene.LogoEntity=function(){com.eqela.libspriteengine.SEEntity.call(this);this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer=null;this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo=null;this.com_eqela_libspriteengine_SESplashScene_LogoEntity_bg=null;this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logoinfo=null;{}};P2=P;P=com.eqela.libspriteengine.SESplashScene.LogoEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEAnimationListener']=true;P._t['com.eqela.libspriteengine.SEPeriodicTimerHandler']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESplashScene.LogoEntity']=true;P.constructor=com.eqela.libspriteengine.SESplashScene.LogoEntity;P.initialize=function(rsc){com.eqela.libspriteengine.SEEntity.prototype.initialize.call(this,rsc);if(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logoinfo===null){com.eqela.libspriteengine.SESplashScene.LogoEntity.prototype.next.call(this);}var _name=com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.get_name.call(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logoinfo);com.eqela.libspriteengine.SEResourceCache.prototype.prepare_image.call(rsc,_name,_name,0.3*com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this),-1.0);this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer=this.add_layer(0,0,com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this),com.eqela.libspriteengine.SEEntity.prototype.get_scene_height.call(this),false);var cc=com.eqela.libspriteengine.SESplashScene.LogoInfo.prototype.get_background.call(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logoinfo);if(cc!==null){this.com_eqela_libspriteengine_SESplashScene_LogoEntity_bg=this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer.add_sprite_for_color(cc,com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this),com.eqela.libspriteengine.SEEntity.prototype.get_scene_height.call(this));}this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo=this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer.add_sprite_for_image(com.eqela.libspriteengine.SEImage.for_resource(_name));this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo.move(((~~(com.eqela.libspriteengine.SEEntity.prototype.get_scene_width.call(this)/2))-(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo.get_width()/2)),((~~(com.eqela.libspriteengine.SEEntity.prototype.get_scene_height.call(this)/2))-(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo.get_height()/2)));var ame=new com.eqela.libspriteengine.SEAnimationManagerEntity();com.eqela.libspriteengine.SEAnimationManagerEntity.prototype.add_element.call(ame,com.eqela.libspriteengine.SEFaderAnimationElement.for_fadein(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer));com.eqela.libspriteengine.SEEntity.prototype.add_entity.call(this,ame);com.eqela.libspriteengine.SEEntity.prototype.add_entity.call(this,com.eqela.libspriteengine.SEPeriodicTimer.for_handler(this,2000000));};P.cleanup=function(){com.eqela.libspriteengine.SEEntity.prototype.cleanup.call(this);this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo=com.eqela.libspriteengine.SESpriteStatic.remove(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logo);this.com_eqela_libspriteengine_SESplashScene_LogoEntity_bg=com.eqela.libspriteengine.SESpriteStatic.remove(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_bg);this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer=com.eqela.libspriteengine.SELayerStatic.remove(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer);};P.next=function(){var ame=com.eqela.libspriteengine.SEAnimationManagerEntity.prototype.set_listener.call(new com.eqela.libspriteengine.SEAnimationManagerEntity(),this);com.eqela.libspriteengine.SEAnimationManagerEntity.prototype.add_element.call(ame,com.eqela.libspriteengine.SEFaderAnimationElement.for_fadeout(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_layer));com.eqela.libspriteengine.SEEntity.prototype.add_entity.call(this,ame);};P.on_animation_ended=function(){var _t44=null;var ss=((function(l,r){return(l!=null&&l._t[r]===true);})((_t44=com.eqela.libspriteengine.SEEntity.prototype.get_scene.call(this)),"com.eqela.libspriteengine.SESplashScene")?_t44:null);if(ss!==null){com.eqela.libspriteengine.SESplashScene.prototype.next_logo.call(ss);}com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.on_timer=function(now){com.eqela.libspriteengine.SESplashScene.LogoEntity.prototype.next.call(this);return(false);};P.set_logoinfo=function(v){this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logoinfo=v;return(this);};P.get_logoinfo=function(){return(this.com_eqela_libspriteengine_SESplashScene_LogoEntity_logoinfo);};P=P2;P2=null;P.next_logo=function(){var _t45=null;this.com_eqela_libspriteengine_SESplashScene_current_logo++;var logoinfo=null;if(this.com_eqela_libspriteengine_SESplashScene_logos!==null){logoinfo=((function(l,r){return(l!=null&&l._t[r]===true);})((_t45=this.com_eqela_libspriteengine_SESplashScene_logos.get(this.com_eqela_libspriteengine_SESplashScene_current_logo)),"com.eqela.libspriteengine.SESplashScene.LogoInfo")?_t45:null);}if(logoinfo===null){com.eqela.libspriteengine.SEScene.prototype.switch_scene.call(this,this.com_eqela_libspriteengine_SESplashScene_next_scene);return;}com.eqela.libspriteengine.SEScene.prototype.add_entity.call(this,com.eqela.libspriteengine.SESplashScene.LogoEntity.prototype.set_logoinfo.call(new com.eqela.libspriteengine.SESplashScene.LogoEntity(),logoinfo));};P.start=function(){com.eqela.libspriteengine.SEScene.prototype.start.call(this);this.com_eqela_libspriteengine_SESplashScene_current_logo=-1;com.eqela.libspriteengine.SESplashScene.prototype.next_logo.call(this);};P.set_next_scene=function(v){this.com_eqela_libspriteengine_SESplashScene_next_scene=v;return(this);};P.get_next_scene=function(){return(this.com_eqela_libspriteengine_SESplashScene_next_scene);};com.eqela.libspriteengine.SESpriteEntity=function(){com.eqela.libspriteengine.SEEntity.call(this);this.com_eqela_libspriteengine_SESpriteEntity_sprite=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_position=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_image=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_text=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_font=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_color=null;this.com_eqela_libspriteengine_SESpriteEntity_initial_width=0.0;this.com_eqela_libspriteengine_SESpriteEntity_initial_height=0.0;this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation=0.0;this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha=1.0;this.com_eqela_libspriteengine_SESpriteEntity_image_sheet=null;this.com_eqela_libspriteengine_SESpriteEntity_current_frame=-1;{}};P=com.eqela.libspriteengine.SESpriteEntity.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(com.eqela.libspriteengine.SEEntity.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libspriteengine.SEElement']=true;P._t['com.eqela.libspriteengine.SESprite']=true;P._t['com.eqela.libspriteengine.SEMessageListener']=true;P._t['com.eqela.libspriteengine.SEElementContainer']=true;P._t['com.eqela.libspriteengine.SEEntity']=true;P._t['com.eqela.libspriteengine.SESpriteEntity']=true;P.constructor=com.eqela.libspriteengine.SESpriteEntity;com.eqela.libspriteengine.SESpriteEntity.for_image=function(image){return(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_image.call(new com.eqela.libspriteengine.SESpriteEntity(),image));};com.eqela.libspriteengine.SESpriteEntity.for_text=function(text,fontid){return(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_font.call(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_text.call(new com.eqela.libspriteengine.SESpriteEntity(),text),fontid));};com.eqela.libspriteengine.SESpriteEntity.for_color=function(color,width,height){return(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_height.call(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_width.call(com.eqela.libspriteengine.SESpriteEntity.prototype.set_initial_color.call(new com.eqela.libspriteengine.SESpriteEntity(),color),width),height));};P.set_image_sheet=function(imgs){this.com_eqela_libspriteengine_SESpriteEntity_image_sheet=imgs;this.com_eqela_libspriteengine_SESpriteEntity_current_frame=-1;com.eqela.libspriteengine.SESpriteEntity.prototype.next_frame.call(this);return(this);};P.next_frame=function(){if((this.com_eqela_libspriteengine_SESpriteEntity_image_sheet===null)||(this.com_eqela_libspriteengine_SESpriteEntity_image_sheet.count() < 1)){this.set_image(null);return(false);}this.com_eqela_libspriteengine_SESpriteEntity_current_frame++;if(this.com_eqela_libspriteengine_SESpriteEntity_current_frame >= this.com_eqela_libspriteengine_SESpriteEntity_image_sheet.count()){this.com_eqela_libspriteengine_SESpriteEntity_current_frame=0;}this.set_image(com.eqela.libspriteengine.SEImage.for_texture(this.com_eqela_libspriteengine_SESpriteEntity_image_sheet.get(this.com_eqela_libspriteengine_SESpriteEntity_current_frame)));return(true);};P.set_xy=function(x,y){this.com_eqela_libspriteengine_SESpriteEntity_initial_position=com.eqela.libgui.PositionStatic.instance(x,y);this.move(x,y);return(this);};P.create_sprite=function(){var container=com.eqela.libspriteengine.SEEntity.prototype.get_container.call(this);if(container!==null){return(container.add_sprite());}var scene=com.eqela.libspriteengine.SEEntity.prototype.get_scene.call(this);if(scene===null){return(null);}return(scene.add_sprite());};P.initialize=function(rsc){com.eqela.libspriteengine.SEEntity.prototype.initialize.call(this,rsc);this.com_eqela_libspriteengine_SESpriteEntity_sprite=this.create_sprite();if(this.com_eqela_libspriteengine_SESpriteEntity_initial_image!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_image(this.com_eqela_libspriteengine_SESpriteEntity_initial_image);}else {if(this.com_eqela_libspriteengine_SESpriteEntity_initial_text!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_text(this.com_eqela_libspriteengine_SESpriteEntity_initial_text,this.com_eqela_libspriteengine_SESpriteEntity_initial_font);}else {if(this.com_eqela_libspriteengine_SESpriteEntity_initial_color!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_color(this.com_eqela_libspriteengine_SESpriteEntity_initial_color,this.com_eqela_libspriteengine_SESpriteEntity_initial_width,this.com_eqela_libspriteengine_SESpriteEntity_initial_height);}}}if(this.com_eqela_libspriteengine_SESpriteEntity_initial_position!==null){this.move(this.com_eqela_libspriteengine_SESpriteEntity_initial_position.get_x(),this.com_eqela_libspriteengine_SESpriteEntity_initial_position.get_y());}this.set_rotation(this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation);this.set_alpha(this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha);};P.cleanup=function(){com.eqela.libspriteengine.SEEntity.prototype.cleanup.call(this);if(this.com_eqela_libspriteengine_SESpriteEntity_sprite!==null){this.com_eqela_libspriteengine_SESpriteEntity_sprite=com.eqela.libspriteengine.SESpriteStatic.remove(this.com_eqela_libspriteengine_SESpriteEntity_sprite);}};P.is_inside=function(pi){if(pi===null){return(false);}var x=com.eqela.libspriteengine.SEPointerInfo.prototype.get_x.call(pi);var y=com.eqela.libspriteengine.SEPointerInfo.prototype.get_y.call(pi);if((((x >= this.get_x())&&(x < (this.get_x()+this.get_width())))&&(y >= this.get_y()))&&(y < (this.get_y()+this.get_height()))){return(true);}return(false);};P.set_image=function(image){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_image(image);};P.set_text=function(text,fontid){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_text(text,fontid);};P.set_color=function(color,width,height){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_color(color,width,height);};P.move=function(x,y){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.move(x,y);};P.set_rotation=function(angle){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_rotation(angle);};P.set_alpha=function(alpha){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return;}this.com_eqela_libspriteengine_SESpriteEntity_sprite.set_alpha(alpha);};P.get_sprite=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_sprite);};P.get_x=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_x());};P.get_y=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_y());};P.get_width=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_width());};P.get_height=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_height());};P.get_rotation=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_rotation());};P.get_alpha=function(){if(this.com_eqela_libspriteengine_SESpriteEntity_sprite===null){return(0);}return(this.com_eqela_libspriteengine_SESpriteEntity_sprite.get_alpha());};P.remove_from_container=function(){com.eqela.libspriteengine.SEEntity.prototype.remove_entity.call(this);};P.set_initial_position=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_position=v;return(this);};P.get_initial_position=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_position);};P.set_initial_image=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_image=v;return(this);};P.get_initial_image=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_image);};P.set_initial_text=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_text=v;return(this);};P.get_initial_text=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_text);};P.set_initial_font=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_font=v;return(this);};P.get_initial_font=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_font);};P.set_initial_color=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_color=v;return(this);};P.get_initial_color=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_color);};P.set_initial_width=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_width=v;return(this);};P.get_initial_width=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_width);};P.set_initial_height=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_height=v;return(this);};P.get_initial_height=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_height);};P.set_initial_rotation=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation=v;return(this);};P.get_initial_rotation=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_rotation);};P.set_initial_alpha=function(v){this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha=v;return(this);};P.get_initial_alpha=function(){return(this.com_eqela_libspriteengine_SESpriteEntity_initial_alpha);};com.eqela.libspriteengine.TimerGameLoop=function(){eq.api.Object.call(this);this.com_eqela_libspriteengine_TimerGameLoop_timer=null;this.com_eqela_libspriteengine_TimerGameLoop_scene=null;this.com_eqela_libspriteengine_TimerGameLoop_target_fps=60;this.com_eqela_libspriteengine_TimerGameLoop_stop_flag=false;{}};P=com.eqela.libspriteengine.TimerGameLoop.prototype=(function(o){function F(){};F.prototype=o;return(new F());})(eq.api.Object.prototype);P._t={};P._t['eq.api.Object']=true;P._t['com.eqela.libbackgroundtask.TimerHandler']=true;P._t['com.eqela.libspriteengine.SEGameLoop']=true;P._t['com.eqela.libspriteengine.TimerGameLoop']=true;P.constructor=com.eqela.libspriteengine.TimerGameLoop;com.eqela.libspriteengine.TimerGameLoop.for_scene=function(scene,target_fps){if(scene===null){return(null);}var v=com.eqela.libspriteengine.TimerGameLoop.prototype.set_target_fps.call(com.eqela.libspriteengine.TimerGameLoop.prototype.set_scene.call(new com.eqela.libspriteengine.TimerGameLoop(),scene),target_fps);if(com.eqela.libspriteengine.TimerGameLoop.prototype.start.call(v)===false){v=null;}return(v);};P.start=function(){if(this.com_eqela_libspriteengine_TimerGameLoop_timer!==null){return(false);}if(com.eqela.libgui.GUIStatic.com_eqela_libgui_GUIStatic_engine===null){return(false);}this.com_eqela_libspriteengine_TimerGameLoop_timer=com.eqela.libbackgroundtask.Timer.start(com.eqela.libgui.GUIStatic.com_eqela_libgui_GUIStatic_engine.get_background_task_manager(),~~(1000000/this.com_eqela_libspriteengine_TimerGameLoop_target_fps),this,null);if(this.com_eqela_libspriteengine_TimerGameLoop_timer===null){return(false);}return(true);};P.on_timer=function(arg){if(this.com_eqela_libspriteengine_TimerGameLoop_stop_flag===false){com.eqela.libspriteengine.SEScene.prototype.tick.call(this.com_eqela_libspriteengine_TimerGameLoop_scene);}if(this.com_eqela_libspriteengine_TimerGameLoop_stop_flag){this.com_eqela_libspriteengine_TimerGameLoop_timer=null;return(false);}return(true);};P.stop=function(){this.com_eqela_libspriteengine_TimerGameLoop_stop_flag=true;};P.set_scene=function(v){this.com_eqela_libspriteengine_TimerGameLoop_scene=v;return(this);};P.get_scene=function(){return(this.com_eqela_libspriteengine_TimerGameLoop_scene);};P.set_target_fps=function(v){this.com_eqela_libspriteengine_TimerGameLoop_target_fps=v;return(this);};P.get_target_fps=function(){return(this.com_eqela_libspriteengine_TimerGameLoop_target_fps);};com.eqela.libspriteengine.SEElementStatic=function(){};P=com.eqela.libspriteengine.SEElementStatic.prototype;P._t={};P.constructor=com.eqela.libspriteengine.SEElementStatic;com.eqela.libspriteengine.SEElementStatic.remove=function(ee){if(ee!==null){ee.remove_from_container();}return(null);};com.eqela.libspriteengine.SELayerStatic=function(){};P=com.eqela.libspriteengine.SELayerStatic.prototype;P._t={};P.constructor=com.eqela.libspriteengine.SELayerStatic;com.eqela.libspriteengine.SELayerStatic.remove=function(layer){var _t32=null;return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t32=com.eqela.libspriteengine.SEElementStatic.remove(layer)),"com.eqela.libspriteengine.SELayer")?_t32:null));};com.eqela.libspriteengine.SESpriteStatic=function(){};P=com.eqela.libspriteengine.SESpriteStatic.prototype;P._t={};P.constructor=com.eqela.libspriteengine.SESpriteStatic;com.eqela.libspriteengine.SESpriteStatic.remove=function(sprite){var _t46=null;return(((function(l,r){return(l!=null&&l._t[r]===true);})((_t46=com.eqela.libspriteengine.SEElementStatic.remove(sprite)),"com.eqela.libspriteengine.SESprite")?_t46:null));};